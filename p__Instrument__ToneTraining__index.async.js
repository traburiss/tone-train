!(function(){"use strict";var bn=Object.defineProperty,xn=Object.defineProperties;var Sn=Object.getOwnPropertyDescriptors;var $e=Object.getOwnPropertySymbols;var lt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var st=(T,j,o)=>j in T?bn(T,j,{enumerable:!0,configurable:!0,writable:!0,value:o}):T[j]=o,h=(T,j)=>{for(var o in j||(j={}))lt.call(j,o)&&st(T,o,j[o]);if($e)for(var o of $e(j))ct.call(j,o)&&st(T,o,j[o]);return T},q=(T,j)=>xn(T,Sn(j));var We=(T,j)=>{var o={};for(var A in T)lt.call(T,A)&&j.indexOf(A)<0&&(o[A]=T[A]);if(T!=null&&$e)for(var A of $e(T))j.indexOf(A)<0&&ct.call(T,A)&&(o[A]=T[A]);return o};(self.webpackChunk=self.webpackChunk||[]).push([[602],{51472:function(T,j,o){o.r(j),o.d(j,{default:function(){return Cn}});var A=o(26068),G=o.n(A),ut=o(48305),O=o.n(ut),mt=o(1528),v=o(69454),V=o(40624),we=o(24486),oe=o(97375),dt=o(1501),_=o(59942),Ee=o(28322),i=o(75271),Me=o(65195),r=o(52676),ft=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],gt=i.forwardRef(function(t,e){var n=t.fieldProps,a=t.unCheckedChildren,l=t.checkedChildren,s=t.proFieldProps,u=(0,Ee.Z)(t,ft);return(0,r.jsx)(Me.Z,(0,_.Z)({valueType:"switch",fieldProps:(0,_.Z)({unCheckedChildren:a,checkedChildren:l},n),ref:e,valuePropName:"checked",proFieldProps:s,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},u))}),fe=gt,Be=o(92418),Ge=o(40356),pt=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],ht=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],vt=function(e,n){var a=e.fieldProps,l=e.children,s=e.params,u=e.proFieldProps,f=e.mode,p=e.valueEnum,m=e.request,y=e.showSearch,$=e.options,P=(0,Ee.Z)(e,pt),w=(0,i.useContext)(Ge.Z);return(0,r.jsx)(Me.Z,(0,_.Z)((0,_.Z)({valueEnum:(0,Be.h)(p),request:m,params:s,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,_.Z)({options:$,mode:f,showSearch:y,getPopupContainer:w.getPopupContainer},a),ref:n,proFieldProps:u},P),{},{children:l}))},yt=i.forwardRef(function(t,e){var n=t.fieldProps,a=t.children,l=t.params,s=t.proFieldProps,u=t.mode,f=t.valueEnum,p=t.request,m=t.options,y=(0,Ee.Z)(t,ht),$=(0,_.Z)({options:m,mode:u||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},n),P=(0,i.useContext)(Ge.Z);return(0,r.jsx)(Me.Z,(0,_.Z)((0,_.Z)({valueEnum:(0,Be.h)(f),request:p,params:l,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,_.Z)({getPopupContainer:P.getPopupContainer},$),ref:e,proFieldProps:s},y),{},{children:a}))}),Ct=i.forwardRef(vt),bt=yt,Te=Ct;Te.SearchSelect=bt,Te.displayName="ProFormComponent";var xt=Te,Ce=o(91056),De=o(45803),St=function(){var e=(0,Ce.useIntl)();return(0,r.jsxs)(De.Z,{title:e.formatMessage({id:"common.basic-settings"}),className:"mb-3 sm:mb-6",children:[(0,r.jsx)(V.A.Group,{children:(0,r.jsx)(we.Z.Group,{name:"instrumentName",label:e.formatMessage({id:"common.instrument-choice"}),tooltip:e.formatMessage({id:"common.instrument-choice.tooltip"}),radioType:"button",fieldProps:{buttonStyle:"solid",size:"small"},options:v.qL.map(function(n){return G()(G()({},n),{},{label:e.formatMessage({id:n.label})})})})}),(0,r.jsxs)(V.A.Group,{children:[(0,r.jsx)(we.Z.Group,{name:"loopCountType",label:e.formatMessage({id:"common.loop-count"}),tooltip:e.formatMessage({id:"common.loop-count.tooltip"}),radioType:"button",fieldProps:{buttonStyle:"solid",size:"small"},options:v.qx.map(function(n){return G()(G()({},n),{},{label:e.formatMessage({id:n.label,defaultMessage:n.label})})})}),(0,r.jsx)(oe.Z,{name:["loopCountType"],children:function(a){var l=a.loopCountType;return l==="custom"&&(0,r.jsx)(dt.Z,{name:"loopCountCustom",label:" ",width:"xs",placeholder:e.formatMessage({id:"common.count"}),min:1,max:1e3,fieldProps:{precision:0}})}})]}),(0,r.jsx)(V.A.Group,{children:(0,r.jsx)(fe,{name:"random",label:e.formatMessage({id:"common.random-play"}),tooltip:e.formatMessage({id:"common.random-play.tooltip"})})}),(0,r.jsxs)(V.A.Group,{children:[(0,r.jsx)(fe,{name:"referenceNoteEnabled",label:e.formatMessage({id:"common.reference-note"}),tooltip:e.formatMessage({id:"common.reference-note.tooltip"})}),(0,r.jsx)(oe.Z,{name:["referenceNoteEnabled"],children:function(a){var l=a.referenceNoteEnabled;return l&&(0,r.jsx)(xt,{name:"referenceNote",label:" ",width:"xs",options:v.cS,placeholder:e.formatMessage({id:"common.reference-note.placeholder"})})}})]})]})},Pt=St,ie=o(84611),Nt=function(){var e=(0,Ce.useIntl)(),n=(0,v.L3)(e);return(0,r.jsxs)(De.Z,{title:e.formatMessage({id:"common.playback-settings"}),className:"mb-3 sm:mb-6",children:[(0,r.jsxs)(V.A.Group,{title:e.formatMessage({id:"common.time-settings"}),children:[(0,r.jsx)(ie.Z,{name:"toneDuration",label:e.formatMessage({id:"common.tone-duration"}),width:"md",min:v.Qx,max:v.Zf,step:v.LB,fieldProps:{tooltip:{formatter:n}}}),(0,r.jsx)(ie.Z,{name:"toneWait",label:e.formatMessage({id:"common.tone-wait"}),width:"md",min:v.Qx,max:v.Zf,step:v.LB,fieldProps:{tooltip:{formatter:n}}})]}),(0,r.jsxs)(V.A.Group,{title:e.formatMessage({id:"common.tts-settings"}),children:[(0,r.jsx)(fe,{name:"ttsEnable",label:e.formatMessage({id:"common.tts-enable"}),tooltip:e.formatMessage({id:"common.tts-enable.tooltip"})}),(0,r.jsx)(oe.Z,{name:["ttsEnable"],children:function(l){var s=l.ttsEnable;return s&&(0,r.jsx)(ie.Z,{name:"ttsRate",label:e.formatMessage({id:"common.tts-rate"}),tooltip:e.formatMessage({id:"common.tts-rate.tooltip"}),width:"md",min:.5,max:4,step:.1,fieldProps:{tooltip:{formatter:function(f){return"".concat(f,"x ").concat(e.formatMessage({id:"common.tone-duration"}))}}}})}}),(0,r.jsx)(oe.Z,{name:["ttsEnable"],children:function(l){var s=l.ttsEnable;return s&&(0,r.jsx)(ie.Z,{name:"ttsWait",label:e.formatMessage({id:"common.tts-wait"}),width:"md",min:v.Qx,max:v.Zf,step:v.LB,fieldProps:{tooltip:{formatter:n}}})}})]}),(0,r.jsx)(oe.Z,{name:["ttsEnable"],children:function(l){var s=l.ttsEnable;return s&&(0,r.jsxs)(V.A.Group,{children:[(0,r.jsx)(fe,{name:"ttsSolfege",label:e.formatMessage({id:"common.tts-solfege"}),tooltip:e.formatMessage({id:"common.tts-solfege.tooltip"})}),(0,r.jsx)(oe.Z,{name:["ttsSolfege"],children:function(f){var p=f.ttsSolfege;return p&&(0,r.jsx)(ie.Z,{name:"ttsSolfegeWait",label:e.formatMessage({id:"common.tts-solfege-wait"}),width:"sm",min:v.Qx,max:v.Zf,step:v.LB,fieldProps:{tooltip:{formatter:n}}})}})]})}}),(0,r.jsx)(oe.Z,{name:["ttsEnable"],children:function(l){var s=l.ttsEnable;return s&&(0,r.jsxs)(V.A.Group,{children:[(0,r.jsx)(fe,{name:"ttsNotation",label:e.formatMessage({id:"common.tts-notation"}),tooltip:e.formatMessage({id:"common.tts-notation.tooltip"})}),(0,r.jsx)(oe.Z,{name:["ttsNotation"],children:function(f){var p=f.ttsNotation;return p&&(0,r.jsx)(ie.Z,{name:"ttsNotationWait",label:e.formatMessage({id:"common.tts-notation-wait"}),width:"sm",min:v.Qx,max:v.Zf,step:v.LB,fieldProps:{tooltip:{formatter:n}}})}})]})}})]})},$t=Nt,Et=o(90228),be=o.n(Et),Mt=o(87999),ze=o.n(Mt),Tt=o(27487),jt=o(39419),ge=o(86850),je=o(15612),Ie=o(53419),It=o(82773),He=o(1073),Ft=o(87150),Zt=o(30371),se=o(85419),Fe=o(44241),Ae=o(95977),Oe=o(6640),Ve=o(9281),ke=o(49735),Lt=o(80743),Ze=o(64933),k=o(4814),le=o(62114),ce=o(8201),Ue=o(95314),K=o(49933),Rt=o(15690),Qe=o(15218),Wt=o(53925),Xe=o(32748),wt=t=>{const{componentCls:e,notificationMarginEdge:n,animationMaxHeight:a}=t,l=`${e}-notice`,s=new K.E4("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),u=new K.E4("antNotificationTopFadeIn",{"0%":{top:-a,opacity:0},"100%":{top:0,opacity:1}}),f=new K.E4("antNotificationBottomFadeIn",{"0%":{bottom:t.calc(a).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),p=new K.E4("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[e]:{[`&${e}-top, &${e}-bottom`]:{marginInline:0,[l]:{marginInline:"auto auto"}},[`&${e}-top`]:{[`${e}-fade-enter${e}-fade-enter-active, ${e}-fade-appear${e}-fade-appear-active`]:{animationName:u}},[`&${e}-bottom`]:{[`${e}-fade-enter${e}-fade-enter-active, ${e}-fade-appear${e}-fade-appear-active`]:{animationName:f}},[`&${e}-topRight, &${e}-bottomRight`]:{[`${e}-fade-enter${e}-fade-enter-active, ${e}-fade-appear${e}-fade-appear-active`]:{animationName:s}},[`&${e}-topLeft, &${e}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:n,_skip_check_:!0},[l]:{marginInlineEnd:"auto",marginInlineStart:0},[`${e}-fade-enter${e}-fade-enter-active, ${e}-fade-appear${e}-fade-appear-active`]:{animationName:p}}}}};const Bt=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Gt={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},Dt=(t,e)=>{const{componentCls:n}=t;return{[`${n}-${e}`]:{[`&${n}-stack > ${n}-notice-wrapper`]:{[e.startsWith("top")?"top":"bottom"]:0,[Gt[e]]:{value:0,_skip_check_:!0}}}}},zt=t=>{const e={};for(let n=1;n<t.notificationStackLayer;n++)e[`&:nth-last-child(${n+1})`]={overflow:"hidden",[`& > ${t.componentCls}-notice`]:{opacity:0,transition:`opacity ${t.motionDurationMid}`}};return h({[`&:not(:nth-last-child(-n+${t.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},e)},Ht=t=>{const e={};for(let n=1;n<t.notificationStackLayer;n++)e[`&:nth-last-child(${n+1})`]={background:t.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return h({},e)};var At=t=>{const{componentCls:e}=t;return h({[`${e}-stack`]:{[`& > ${e}-notice-wrapper`]:h({transition:`transform ${t.motionDurationSlow}, backdrop-filter 0s`,willChange:"transform, opacity",position:"absolute"},zt(t))},[`${e}-stack:not(${e}-stack-expanded)`]:{[`& > ${e}-notice-wrapper`]:h({},Ht(t))},[`${e}-stack${e}-stack-expanded`]:{[`& > ${e}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${t.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:t.margin,width:"100%",insetInline:0,bottom:t.calc(t.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Bt.map(n=>Dt(t,n)).reduce((n,a)=>h(h({},n),a),{}))};const Je=t=>{const{iconCls:e,componentCls:n,boxShadow:a,fontSizeLG:l,notificationMarginBottom:s,borderRadiusLG:u,colorSuccess:f,colorInfo:p,colorWarning:m,colorError:y,colorTextHeading:$,notificationBg:P,notificationPadding:w,notificationMarginEdge:I,progressBg:D,notificationProgressHeight:F,fontSize:B,lineHeight:E,width:d,notificationIconSize:b,colorText:g,colorSuccessBg:C,colorErrorBg:Z,colorInfoBg:L,colorWarningBg:R}=t,S=`${n}-notice`;return{position:"relative",marginBottom:s,marginInlineStart:"auto",background:P,borderRadius:u,boxShadow:a,[S]:{padding:w,width:d,maxWidth:`calc(100vw - ${(0,K.bf)(t.calc(I).mul(2).equal())})`,lineHeight:E,wordWrap:"break-word",borderRadius:u,overflow:"hidden","&-success":C?{background:C}:{},"&-error":Z?{background:Z}:{},"&-info":L?{background:L}:{},"&-warning":R?{background:R}:{}},[`${S}-title`]:{marginBottom:t.marginXS,color:$,fontSize:l,lineHeight:t.lineHeightLG},[`${S}-description`]:{fontSize:B,color:g,marginTop:t.marginXS},[`${S}-closable ${S}-title`]:{paddingInlineEnd:t.paddingLG},[`${S}-with-icon ${S}-title`]:{marginBottom:t.marginXS,marginInlineStart:t.calc(t.marginSM).add(b).equal(),fontSize:l},[`${S}-with-icon ${S}-description`]:{marginInlineStart:t.calc(t.marginSM).add(b).equal(),fontSize:B},[`${S}-icon`]:{position:"absolute",fontSize:b,lineHeight:1,[`&-success${e}`]:{color:f},[`&-info${e}`]:{color:p},[`&-warning${e}`]:{color:m},[`&-error${e}`]:{color:y}},[`${S}-close`]:h({position:"absolute",top:t.notificationPaddingVertical,insetInlineEnd:t.notificationPaddingHorizontal,color:t.colorIcon,outline:"none",width:t.notificationCloseButtonSize,height:t.notificationCloseButtonSize,borderRadius:t.borderRadiusSM,transition:`background-color ${t.motionDurationMid}, color ${t.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center",background:"none",border:"none","&:hover":{color:t.colorIconHover,backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive}},(0,Qe.Qy)(t)),[`${S}-progress`]:{position:"absolute",display:"block",appearance:"none",inlineSize:`calc(100% - ${(0,K.bf)(u)} * 2)`,left:{_skip_check_:!0,value:u},right:{_skip_check_:!0,value:u},bottom:0,blockSize:F,border:0,"&, &::-webkit-progress-bar":{borderRadius:u,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:D},"&::-webkit-progress-value":{borderRadius:u,background:D}},[`${S}-actions`]:{float:"right",marginTop:t.marginSM}}},Ot=t=>{const{componentCls:e,notificationMarginBottom:n,notificationMarginEdge:a,motionDurationMid:l,motionEaseInOut:s}=t,u=`${e}-notice`,f=new K.E4("antNotificationFadeOut",{"0%":{maxHeight:t.animationMaxHeight,marginBottom:n},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[e]:q(h({},(0,Qe.Wf)(t)),{position:"fixed",zIndex:t.zIndexPopup,marginRight:{value:a,_skip_check_:!0},[`${e}-hook-holder`]:{position:"relative"},[`${e}-fade-appear-prepare`]:{opacity:"0 !important"},[`${e}-fade-enter, ${e}-fade-appear`]:{animationDuration:t.motionDurationMid,animationTimingFunction:s,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${e}-fade-leave`]:{animationTimingFunction:s,animationFillMode:"both",animationDuration:l,animationPlayState:"paused"},[`${e}-fade-enter${e}-fade-enter-active, ${e}-fade-appear${e}-fade-appear-active`]:{animationPlayState:"running"},[`${e}-fade-leave${e}-fade-leave-active`]:{animationName:f,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${u}-actions`]:{float:"left"}}})},{[e]:{[`${u}-wrapper`]:Je(t)}}]},Ke=t=>({zIndexPopup:t.zIndexPopupBase+Rt.u6+50,width:384,progressBg:`linear-gradient(90deg, ${t.colorPrimaryBorderHover}, ${t.colorPrimary})`,colorSuccessBg:void 0,colorErrorBg:void 0,colorInfoBg:void 0,colorWarningBg:void 0}),Ye=t=>{const e=t.paddingMD,n=t.paddingLG;return(0,Wt.IX)(t,{notificationBg:t.colorBgElevated,notificationPaddingVertical:e,notificationPaddingHorizontal:n,notificationIconSize:t.calc(t.fontSizeLG).mul(t.lineHeightLG).equal(),notificationCloseButtonSize:t.calc(t.controlHeightLG).mul(.55).equal(),notificationMarginBottom:t.margin,notificationPadding:`${(0,K.bf)(t.paddingMD)} ${(0,K.bf)(t.paddingContentHorizontalLG)}`,notificationMarginEdge:t.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2})};var qe=(0,Xe.I$)("Notification",t=>{const e=Ye(t);return[Ot(e),wt(e),At(e)]},Ke),Vt=(0,Xe.bk)(["Notification","PurePanel"],t=>{const e=`${t.componentCls}-notice`,n=Ye(t);return{[`${e}-pure-panel`]:q(h({},Je(n)),{width:n.width,maxWidth:`calc(100vw - ${(0,K.bf)(t.calc(n.notificationMarginEdge).mul(2).equal())})`,margin:0})}},Ke);const $n={info:i.createElement(ke.Z,null),success:i.createElement(Ae.Z,null),error:i.createElement(Oe.Z,null),warning:i.createElement(Ie.Z,null),loading:i.createElement(Lt.Z,null)};function Le(t,e){return e===null||e===!1?null:e||i.createElement(Ve.Z,{className:`${t}-close-icon`})}const kt={success:Ae.Z,info:ke.Z,error:Oe.Z,warning:Ie.Z},_e=t=>{const{prefixCls:e,icon:n,type:a,title:l,description:s,actions:u,role:f="alert",styles:p,classNames:m}=t;let y=null;return n?y=i.createElement("span",{className:(0,k.W)(`${e}-icon`,m.icon),style:p.icon},n):a&&(y=i.createElement(kt[a]||null,{className:(0,k.W)(`${e}-icon`,m.icon,`${e}-icon-${a}`),style:p.icon})),i.createElement("div",{className:(0,k.W)({[`${e}-with-icon`]:y}),role:f},y,i.createElement("div",{className:(0,k.W)(`${e}-title`,m.title),style:p.title},l),s&&i.createElement("div",{className:(0,k.W)(`${e}-description`,m.description),style:p.description},s),u&&i.createElement("div",{className:(0,k.W)(`${e}-actions`,m.actions),style:p.actions},u))};var Ut=t=>{const W=t,{prefixCls:e,icon:n,type:a,message:l,title:s,description:u,btn:f,actions:p,closeIcon:m,className:y,style:$,styles:P,classNames:w,closable:I}=W,D=We(W,["prefixCls","icon","type","message","title","description","btn","actions","closeIcon","className","style","styles","classNames","closable"]),{getPrefixCls:F,className:B,style:E,classNames:d,styles:b}=(0,se.dj)("notification"),[g,C]=(0,le.MW)([d,w],[b,P],{props:t}),{notification:Z}=i.useContext(se.E_),L=p!=null?p:f,R=s!=null?s:l,S=e||F("notification"),ee=`${S}-notice`,ue=(0,Ue.Z)(S),[ae,he]=qe(S,ue),[me,ve,,N]=(0,ce.bt)((0,ce.wz)(t),(0,ce.wz)(Z),{closable:!0,closeIcon:i.createElement(Ve.Z,{className:`${S}-close-icon`}),closeIconRender:z=>Le(S,z)}),M=me?h({onClose:I&&typeof I=="object"?I==null?void 0:I.onClose:void 0,closeIcon:ve},N):!1;return i.createElement("div",{className:(0,k.W)(`${ee}-pure-panel`,ae,y,he,ue,g.root),style:C.root},i.createElement(Vt,{prefixCls:S}),i.createElement(Ze.qX,q(h({style:h(h({},E),$)},D),{prefixCls:S,eventKey:"pure",duration:null,closable:M,className:(0,k.W)(y,B),content:i.createElement(_e,{classNames:g,styles:C,prefixCls:ee,icon:n,type:a,title:R,description:u,actions:L})})))},Qt=o(60218),Xt=o(30486);function Jt(t,e,n){let a;switch(t){case"top":a={left:"50%",transform:"translateX(-50%)",right:"auto",top:e,bottom:"auto"};break;case"topLeft":a={left:0,top:e,bottom:"auto"};break;case"topRight":a={right:0,top:e,bottom:"auto"};break;case"bottom":a={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:n};break;case"bottomLeft":a={left:0,top:"auto",bottom:n};break;default:a={right:0,top:"auto",bottom:n};break}return a}function Kt(t){return{motionName:`${t}-fade`}}function Yt(t,e,n){return typeof t!="undefined"?t:typeof(e==null?void 0:e.closeIcon)!="undefined"?e.closeIcon:n==null?void 0:n.closeIcon}const et=24,qt=4.5,_t="topRight",en=({children:t,prefixCls:e})=>{const n=(0,Ue.Z)(e),[a,l]=qe(e,n);return i.createElement(Ze.JB,{classNames:{list:(0,k.W)(a,l,n)}},t)},tn=(t,{prefixCls:e,key:n})=>i.createElement(en,{prefixCls:e,key:n},t),nn=i.forwardRef((t,e)=>{const{top:n,bottom:a,prefixCls:l,getContainer:s,maxCount:u,rtl:f,onAllRemoved:p,stack:m,duration:y=qt,pauseOnHover:$=!0,showProgress:P}=t,{getPrefixCls:w,getPopupContainer:I,direction:D}=(0,se.dj)("notification"),{notification:F}=(0,i.useContext)(se.E_),[,B]=(0,Xt.ZP)(),E=l||w("notification"),d=(0,i.useMemo)(()=>typeof y=="number"&&y>0?y:!1,[y]),b=ee=>Jt(ee,n!=null?n:et,a!=null?a:et),g=()=>(0,k.W)({[`${E}-rtl`]:f!=null?f:D==="rtl"}),C=()=>Kt(E),[Z,L]=(0,Ze.lm)({prefixCls:E,style:b,className:g,motion:C,closable:{closeIcon:Le(E)},duration:d,getContainer:()=>(s==null?void 0:s())||(I==null?void 0:I())||document.body,maxCount:u,pauseOnHover:$,showProgress:P,onAllRemoved:p,renderNotifications:tn,stack:m===!1?!1:{threshold:typeof m=="object"?m==null?void 0:m.threshold:void 0,offset:8,gap:B.margin}}),[R,S]=(0,le.MW)([F==null?void 0:F.classNames,t==null?void 0:t.classNames],[F==null?void 0:F.styles,t==null?void 0:t.styles],{props:t});return i.useImperativeHandle(e,()=>q(h({},Z),{prefixCls:E,notification:F,classNames:R,styles:S})),L});function tt(t){const e=i.useRef(null),n=(0,Qt.ln)("Notification"),{notification:a}=i.useContext(se.E_);return[i.useMemo(()=>{const s=m=>{var re;if(!e.current)return;const{open:y,prefixCls:$,notification:P,classNames:w,styles:I}=e.current,D=(P==null?void 0:P.className)||{},F=(P==null?void 0:P.style)||{},B=`${$}-notice`,ye=m,{title:E,message:d,description:b,icon:g,type:C,btn:Z,actions:L,className:R,style:S,role:ee="alert",closeIcon:ue,closable:ae,classNames:he={},styles:me={}}=ye,ve=We(ye,["title","message","description","icon","type","btn","actions","className","style","role","closeIcon","closable","classNames","styles"]),N=E!=null?E:d,M=L!=null?L:Z,W=Le(B,Yt(ue,t,P)),[z,U,,de]=(0,ce.nB)((0,ce.wz)(h(h({},t||{}),m)),(0,ce.wz)(a),{closable:!0,closeIcon:W}),Q=z?h({onClose:ae&&typeof ae=="object"?ae.onClose:void 0,closeIcon:U},de):!1,x=(0,le.jK)(he,{props:m}),te=(0,le.jK)(me,{props:m}),ne=(0,le.Ez)(void 0,w,x),X=(0,le.y0)(I,te);return y(q(h({placement:(re=t==null?void 0:t.placement)!=null?re:_t},ve),{content:i.createElement(_e,{prefixCls:B,icon:g,type:C,title:N,description:b,actions:M,role:ee,classNames:ne,styles:X}),className:(0,k.W)({[`${B}-${C}`]:C},R,D,ne.root),style:h(h(h({},F),X.root),S),closable:Q}))},f={open:s,destroy:m=>{var y,$;m!==void 0?(y=e.current)==null||y.close(m):($=e.current)==null||$.destroy()}};return["success","info","warning","error"].forEach(m=>{f[m]=y=>s(q(h({},y),{type:m}))}),f},[t,a]),i.createElement(nn,q(h({key:"notification-holder"},t),{ref:e}))]}function on(t){return tt(t)}let H=null,xe=t=>t(),Se=[],pe={};function nt(){const{getContainer:t,rtl:e,maxCount:n,top:a,bottom:l,showProgress:s,pauseOnHover:u}=pe,f=(t==null?void 0:t())||document.body;return{getContainer:()=>f,rtl:e,maxCount:n,top:a,bottom:l,showProgress:s,pauseOnHover:u}}const an=i.forwardRef((t,e)=>{const{notificationConfig:n,sync:a}=t,{getPrefixCls:l}=(0,i.useContext)(se.E_),s=pe.prefixCls||l("notification"),u=(0,i.useContext)(Zt.J),[f,p]=tt(h(q(h({},n),{prefixCls:s}),u.notification));return i.useEffect(a,[]),i.useImperativeHandle(e,()=>{const m=h({},f);return Object.keys(m).forEach(y=>{m[y]=(...$)=>(a(),f[y].apply(f,$))}),{instance:m,sync:a}}),p}),rn=i.forwardRef((t,e)=>{const[n,a]=i.useState(nt),l=()=>{a(nt)};i.useEffect(l,[]);const s=(0,Fe.w6)(),u=s.getRootPrefixCls(),f=s.getIconPrefixCls(),p=s.getTheme(),m=i.createElement(an,{ref:e,sync:l,notificationConfig:n});return i.createElement(Fe.ZP,{prefixCls:u,iconPrefixCls:f,theme:p},s.holderRender?s.holderRender(m):m)}),Re=()=>{if(!H){const t=document.createDocumentFragment(),e={fragment:t};H=e,xe(()=>{(0,Ft.s)(i.createElement(rn,{ref:n=>{const{instance:a,sync:l}=n||{};Promise.resolve().then(()=>{!e.instance&&a&&(e.instance=a,e.sync=l,Re())})}}),t)});return}H.instance&&(Se.forEach(t=>{switch(t.type){case"open":{xe(()=>{H.instance.open(h(h({},pe),t.config))});break}case"destroy":xe(()=>{var e;(e=H==null?void 0:H.instance)==null||e.destroy(t.key)});break}}),Se=[])};function sn(t){pe=h(h({},pe),t),xe(()=>{var e;(e=H==null?void 0:H.sync)==null||e.call(H)})}function ot(t){const e=(0,Fe.w6)();Se.push({type:"open",config:t}),Re()}const ln=t=>{Se.push({type:"destroy",key:t}),Re()},cn=["success","info","warning","error"],at={open:ot,destroy:ln,config:sn,useNotification:on,_InternalPanelDoNotUseOrYouWillBeFired:Ut};cn.forEach(t=>{at[t]=e=>ot(q(h({},e),{type:t}))});const Tn=()=>{};let jn=null;const In=null;let Fn=null;const Zn=null;var un=at,mn=o(60672),Pe=o(55248),dn={trainPlayInfo:"trainPlayInfo___cZ8NU"},fn=He.Z.confirm,Y=null,gn=function(e){var n=(0,i.useState)(!0),a=O()(n,2),l=a[0],s=a[1],u=(0,i.useState)(!1),f=O()(u,2),p=f[0],m=f[1],y=(0,i.useState)("..."),$=O()(y,2),P=$[0],w=$[1],I=(0,i.useState)(!1),D=O()(I,2),F=D[0],B=D[1],E=un.useNotification(),d=O()(E,2),b=d[1],g=(0,Ce.useIntl)(),C=i.useRef(0),Z=i.useRef(0),L=function(M){var W=M,z={Do:"Duo",Re:"Rui",Fa:"Fa",Sol:"Suo",La:"La",Si:"Xi",\u5347:"Sheng ",\u964D:"Jiang "};Object.entries(z).forEach(function(Q){var x=O()(Q,2),te=x[0],ne=x[1],X=new RegExp(te,"g");W=W.replace(X,ne)}),W=W.replace(/#/g," sharp").replace(/m($|7)/g," minor$1").replace(/maj/g," major ").replace(/sus/g," suspended ").replace(/\//g," over ").replace(/([A-G])(\d)/g,"$1 $2").trim();var U=new SpeechSynthesisUtterance(W),de=e.ttsRate||1;U.rate=1/de,window.speechSynthesis.speak(U)},R=i.useRef(e);R.current=e;var S=function(){var N=ze()(be()().mark(function M(W,z){var U;return be()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Y!==null&&(U=[],R.current.toneType==="GuitarChords"&&(U=(0,ge.UV)(W)),U.length>0?Y.triggerAttackRelease(U,z/1e3):Y.triggerAttackRelease(W,z/1e3)),Q.abrupt("return",new Promise(function(x){setTimeout(x,z)}));case 2:case"end":return Q.stop()}},M)}));return function(W,z){return N.apply(this,arguments)}}(),ee=i.useMemo(function(){var N=(e.toneDuration||0)+(e.toneWait||0)+(e.ttsWait||0)+(e.referenceNoteEnabled?(e.toneDuration||0)+(e.toneWait||0):0),M=0;return e.ttsEnable&&(M+=1e3,R.current.toneType!=="GuitarChords"&&(e.ttsSolfege&&(M+=(e.ttsSolfegeWait||0)+1e3),e.ttsNotation&&(M+=(e.ttsNotationWait||0)+1e3))),Math.max(N+M,500)},[e.toneDuration,e.toneWait,e.ttsWait,e.referenceNoteEnabled,e.ttsEnable,e.ttsSolfege,e.ttsSolfegeWait,e.ttsNotation,e.ttsNotationWait]);(0,i.useEffect)(function(){if(l||!e.open){Y!==null&&Y.triggerRelease(Pe.zO());return}var N=!1,M=null,W=null,z=function(){var de=ze()(be()().mark(function Q(){var x,te,ne,X,ye,re,it,Ne;return be()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!N){c.next=2;break}return c.abrupt("return");case 2:if(x=R.current,te=x.toneList.length,te!==0){c.next=6;break}return c.abrupt("return");case 6:if(ne=0,x.random?ne=Math.floor(Math.random()*te):ne=C.current,X=x.toneList[ne],w(X),B(!1),x.random){c.next=21;break}if(C.current++,!(C.current>=te)){c.next=19;break}if(C.current=0,Z.current++,!(Number(x.loopCount)>0&&Z.current>=Number(x.loopCount))){c.next=19;break}return s(!0),c.abrupt("return");case 19:c.next=28;break;case 21:if(C.current++,!(C.current>=te)){c.next=28;break}if(C.current=0,Z.current++,!(Number(x.loopCount)>0&&Z.current>=Number(x.loopCount))){c.next=28;break}return s(!0),c.abrupt("return");case 28:if(!(x.referenceNoteEnabled&&x.referenceNote)){c.next=37;break}if(!N){c.next=31;break}return c.abrupt("return");case 31:return c.next=33,S(x.referenceNote,x.toneDuration);case 33:if(!N){c.next=35;break}return c.abrupt("return");case 35:return c.next=37,new Promise(function(J){W=setTimeout(J,x.toneWait)});case 37:if(!N){c.next=39;break}return c.abrupt("return");case 39:return c.next=41,S(X,x.toneDuration);case 41:if(!N){c.next=43;break}return c.abrupt("return");case 43:if(x.ttsEnable||B(!0),!N){c.next=46;break}return c.abrupt("return");case 46:if(!x.ttsEnable){c.next=69;break}return c.next=49,new Promise(function(J){M=setTimeout(J,x.toneWait||200)});case 49:if(!N){c.next=51;break}return c.abrupt("return");case 51:if(B(!0),L(X),R.current.toneType!=="GuitarChords"){c.next=55;break}return c.abrupt("return");case 55:if(!x.ttsSolfege){c.next=62;break}return c.next=58,new Promise(function(J){M=setTimeout(J,x.ttsSolfegeWait||500)});case 58:if(!N){c.next=60;break}return c.abrupt("return");case 60:ye=(0,ge.jP)(X),re=ye.solfege,re&&(L(re),w(function(J){return"".concat(J," ").concat(re)}));case 62:if(!x.ttsNotation){c.next=69;break}return c.next=65,new Promise(function(J){M=setTimeout(J,x.ttsNotationWait||500)});case 65:if(!N){c.next=67;break}return c.abrupt("return");case 67:it=(0,ge.jP)(X),Ne=it.number,Ne&&(L(Ne),w(function(J){return"".concat(J," ").concat(Ne)}));case 69:case"end":return c.stop()}},Q)}));return function(){return de.apply(this,arguments)}}();z();var U=setInterval(z,ee);return function(){N=!0,clearInterval(U),M&&clearTimeout(M),W&&clearTimeout(W),Y!==null&&Y.triggerRelease(Pe.zO())}},[l,e.open,ee]),(0,i.useEffect)(function(){e.open&&(C.current=0,Z.current=0,w("..."),B(!1),m(!1),Y||(Y=new Pe.v2(Pe.WV).toDestination()),(0,je.pr)(e.instrumentName).then(function(N){Y=N}).catch(function(N){console.error("\u52A0\u8F7D\u97F3\u8272\u9519\u8BEF\uFF0C\u964D\u7EA7\u4F7F\u7528Synth",N)}),s(!1))},[e.open]);var ue=function(){s(!l)},ae=function(){s(!0),fn({title:g.formatMessage({id:"tone-training.stop.confirm-title"}),icon:(0,r.jsx)(Ie.Z,{}),content:g.formatMessage({id:"tone-training.stop.confirm-content"}),okText:g.formatMessage({id:"common.confirm-close"}),cancelText:g.formatMessage({id:"common.cancel-mistake"}),onOk:function(){e.onCancel()},onCancel:function(){s(!1)}})},he=(0,jt.u)(e.instrumentName),me=he.status,ve=function(){return me==="loading"?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:g.formatMessage({id:"tone-training.current-tone"})}),(0,r.jsx)("div",{className:"text-yellow-600 text-sm",children:g.formatMessage({id:"tone-training.instrument-loading-hint"})})]}):me==="error"?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:g.formatMessage({id:"tone-training.current-tone"})}),(0,r.jsx)("div",{className:"text-red-600 text-sm",children:g.formatMessage({id:"tone-training.instrument-error-hint"})})]}):g.formatMessage({id:"tone-training.current-tone"})};return(0,r.jsxs)(r.Fragment,{children:[b,(0,r.jsx)(He.Z,{open:e.open,destroyOnHidden:!0,width:"80%",height:"80%",maskClosable:!1,okText:l?g.formatMessage({id:"tone-training.resume"}):g.formatMessage({id:"tone-training.pause"}),onOk:ue,cancelText:g.formatMessage({id:"tone-training.stop"}),onCancel:ae,loading:p,title:p?g.formatMessage({id:"tone-training.instrument-loading"}):g.formatMessage({id:"tone-training.title"}),children:(0,r.jsx)(mn.ZP,{className:dn.trainPlayInfo,title:ve(),subTitle:(0,r.jsx)("div",{className:"text-2xl sm:text-4xl flex items-center justify-center gap-2",children:F?P:"?"}),icon:F&&ge.YD[P]?(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(Tt.Z,{name:P,fingering:ge.YD[P],width:100,height:140})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-[140px]",children:(0,r.jsx)(It.Z,{className:"text-6xl text-blue-400 animate-pulse"})})})})]})},pn=gn,rt=o(7901),hn=o(5318),vn=o(21004),yn=function(){var e=(0,i.useState)(v.sO),n=O()(e,2),a=n[0],l=n[1],s=(0,i.useState)(!1),u=O()(s,2),f=u[0],p=u[1],m=V.A.useForm(),y=O()(m,1),$=y[0],P=(0,Ce.useIntl)(),w=V.A.useWatch("instrumentName",$)||v.OG;(0,i.useEffect)(function(){(0,je.pr)(w).catch(console.error)},[w]);var I=function(d,b){if(console.log("flattenGroupedTones input:",{groups:d,toneType:b}),b==="GuitarChords"){var g=d.chords||[];return console.log("Returning chords:",g),g}var C=Object.entries(d||{}).filter(function(Z){var L=O()(Z,1),R=L[0];return!isNaN(Number(R))}).map(function(Z){var L=O()(Z,2),R=L[1];return R}).flat().filter(Boolean);return console.log("Returning scales:",C),C},D=function(d){var b={};return b.chords=d.filter(function(g){return v.sw.includes(g)}),v.Dz.forEach(function(g){b[g]=d.filter(function(C){return C.endsWith(String(g))&&!v.sw.includes(C)})}),b};(0,i.useEffect)(function(){var E=(0,rt.Tp)(v.F6,null);if(E)try{var d=E;d.toneList&&!d.toneListGroup&&(d.toneListGroup=D(d.toneList));var b=d.loopCountType||String(d.loopCount||0),g=d.loopCountCustom||d.loopCount||10;$.setFieldsValue(G()(G()({},d),{},{loopCountType:b,loopCountCustom:b==="custom"?g:10})),d.instrumentName&&(0,je.pr)(d.instrumentName).catch(console.error),l(G()(G()(G()({},v.sO),d),{},{loopCount:b==="custom"?g:parseInt(b,10),toneList:I(d.toneListGroup,d.toneType||v.W4)}))}catch(C){console.error("Failed to load settings",C)}},[$]);var F=function(d,b){(0,rt.pd)(v.F6,b,P.formatMessage({id:"tone-training.storage-name"}))},B=function(d){var b=I(d.toneListGroup,d.toneType),g=d.loopCountType==="custom"?d.loopCountCustom:parseInt(d.loopCountType,10),C=G()(G()(G()({},v.sO),d),{},{toneList:b,loopCount:isNaN(g)?0:g});l(C),p(!0)};return(0,r.jsxs)(hn._z,{header:{title:P.formatMessage({id:"menu.instrument.tone-training"})},children:[(0,r.jsxs)(V.A,{form:$,size:"large",initialValues:G()(G()({},v.sO),{},{loopCountType:String(v.sO.loopCount),loopCountCustom:10,toneListGroup:D(v.sO.toneList)}),onValuesChange:F,onFinish:B,layout:"horizontal",submitter:{searchConfig:{resetText:P.formatMessage({id:"common.reset"}),submitText:P.formatMessage({id:"tone-training.start-training"})},render:function(d,b){return(0,r.jsx)(vn.S,{children:b})}},children:[(0,r.jsx)(mt.Z,{}),(0,r.jsx)(Pt,{}),(0,r.jsx)($t,{})]}),(0,r.jsx)(pn,G()({open:f,onCancel:function(){return p(!1)}},a))]})},Cn=yn}}]);
}());