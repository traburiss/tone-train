!(function(){"use strict";var cn=Object.defineProperty,un=Object.defineProperties;var dn=Object.getOwnPropertyDescriptors;var Ge=Object.getOwnPropertySymbols;var pt=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable;var ft=(F,S,n)=>S in F?cn(F,S,{enumerable:!0,configurable:!0,writable:!0,value:n}):F[S]=n,v=(F,S)=>{for(var n in S||(S={}))pt.call(S,n)&&ft(F,n,S[n]);if(Ge)for(var n of Ge(S))gt.call(S,n)&&ft(F,n,S[n]);return F},ce=(F,S)=>un(F,dn(S));var Ve=(F,S)=>{var n={};for(var g in F)pt.call(F,g)&&S.indexOf(g)<0&&(n[g]=F[g]);if(F!=null&&Ge)for(var g of Ge(F))S.indexOf(g)<0&&gt.call(F,g)&&(n[g]=F[g]);return n};(self.webpackChunk=self.webpackChunk||[]).push([[602],{82773:function(F,S,n){var g=n(75271),N=n(93096),_=n(42481);function $(){return $=Object.assign?Object.assign.bind():function(T){for(var H=1;H<arguments.length;H++){var G=arguments[H];for(var K in G)Object.prototype.hasOwnProperty.call(G,K)&&(T[K]=G[K])}return T},$.apply(this,arguments)}const ee=(T,H)=>g.createElement(_.Z,$({},T,{ref:H,icon:N.Z})),u=g.forwardRef(ee);S.Z=u},37459:function(F,S,n){var g=n(59942),N=n(28322),_=n(92418),$=n(97241),ee=n(75271),u=n(52368),T=n(21911),H=n(52676),G=["options","fieldProps","proFieldProps","valueEnum"],K=ee.forwardRef(function(U,a){var D=U.options,re=U.fieldProps,Y=U.proFieldProps,fe=U.valueEnum,k=(0,N.Z)(U,G);return(0,H.jsx)(T.Z,(0,g.Z)({ref:a,valueType:"checkbox",valueEnum:(0,_.h)(fe,void 0),fieldProps:(0,g.Z)({options:D},re),lightProps:(0,g.Z)({labelFormatter:function(){return(0,H.jsx)(T.Z,(0,g.Z)({ref:a,valueType:"checkbox",mode:"read",valueEnum:(0,_.h)(fe,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,g.Z)({options:D},re),proFieldProps:Y},k))}},k.lightProps),proFieldProps:Y},k))}),me=ee.forwardRef(function(U,a){var D=U.fieldProps,re=U.children;return(0,H.jsx)($.Z,(0,g.Z)((0,g.Z)({ref:a},D),{},{children:re}))}),ge=(0,u.G)(me,{valuePropName:"checked"}),r=ge;r.Group=K,S.Z=r},1501:function(F,S,n){var g=n(59942),N=n(28322),_=n(75271),$=n(21911),ee=n(52676),u=["fieldProps","min","proFieldProps","max"],T=function(K,me){var ge=K.fieldProps,r=K.min,U=K.proFieldProps,a=K.max,D=(0,N.Z)(K,u);return(0,ee.jsx)($.Z,(0,g.Z)({valueType:"digit",fieldProps:(0,g.Z)({min:r,max:a},ge),ref:me,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:U},D))},H=_.forwardRef(T);S.Z=H},31770:function(F,S,n){var g=n(59942),N=n(28322),_=n(92418),$=n(75271),ee=n(40356),u=n(21911),T=n(52676),H=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],G=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],K=function(D,re){var Y=D.fieldProps,fe=D.children,k=D.params,he=D.proFieldProps,Ne=D.mode,$e=D.valueEnum,ie=D.request,Te=D.showSearch,Ie=D.options,je=(0,N.Z)(D,H),Ce=(0,$.useContext)(ee.Z);return(0,T.jsx)(u.Z,(0,g.Z)((0,g.Z)({valueEnum:(0,_.h)($e),request:ie,params:k,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,g.Z)({options:Ie,mode:Ne,showSearch:Te,getPopupContainer:Ce.getPopupContainer},Y),ref:re,proFieldProps:he},je),{},{children:fe}))},me=$.forwardRef(function(a,D){var re=a.fieldProps,Y=a.children,fe=a.params,k=a.proFieldProps,he=a.mode,Ne=a.valueEnum,$e=a.request,ie=a.options,Te=(0,N.Z)(a,G),Ie=(0,g.Z)({options:ie,mode:he||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},re),je=(0,$.useContext)(ee.Z);return(0,T.jsx)(u.Z,(0,g.Z)((0,g.Z)({valueEnum:(0,_.h)(Ne),request:$e,params:fe,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,g.Z)({getPopupContainer:je.getPopupContainer},Ie),ref:D,proFieldProps:k},Te),{},{children:Y}))}),ge=$.forwardRef(K),r=me,U=ge;U.SearchSelect=r,U.displayName="ProFormComponent",S.Z=U},95006:function(F,S,n){n.r(S),n.d(S,{default:function(){return ln}});var g=n(26068),N=n.n(g),_=n(48305),$=n.n(_),ee=n(99788),u=n(67849),T=n(40624),H=n(24486),G=n(97375),K=n(1501),me=n(59942),ge=n(28322),r=n(75271),U=n(21911),a=n(52676),D=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],re=r.forwardRef(function(t,e){var o=t.fieldProps,i=t.unCheckedChildren,s=t.checkedChildren,l=t.proFieldProps,m=(0,ge.Z)(t,D);return(0,a.jsx)(U.Z,(0,me.Z)({valueType:"switch",fieldProps:(0,me.Z)({unCheckedChildren:i,checkedChildren:s},o),ref:e,valuePropName:"checked",proFieldProps:l,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},m))}),Y=re,fe=n(31770),k=n(82238),he=n(45803),Ne=function(){var e=(0,k.useIntl)();return(0,a.jsxs)(he.Z,{title:e.formatMessage({id:"common.basic-settings"}),className:"mb-3 sm:mb-6",children:[(0,a.jsx)(T.A.Group,{children:(0,a.jsx)(H.Z.Group,{name:"instrumentName",label:e.formatMessage({id:"common.instrument-choice"}),tooltip:e.formatMessage({id:"common.instrument-choice.tooltip"}),radioType:"button",fieldProps:{buttonStyle:"solid",size:"middle"},options:u.qL.map(function(o){return N()(N()({},o),{},{label:e.formatMessage({id:o.label})})})})}),(0,a.jsxs)(T.A.Group,{children:[(0,a.jsx)(H.Z.Group,{name:"loopCountType",label:e.formatMessage({id:"common.loop-count"}),tooltip:e.formatMessage({id:"common.loop-count.tooltip"}),radioType:"button",fieldProps:{buttonStyle:"solid",size:"middle"},options:u.qx.map(function(o){return N()(N()({},o),{},{label:e.formatMessage({id:o.label},{n:o.value})})})}),(0,a.jsx)(G.Z,{name:["loopCountType"],children:function(i){var s=i.loopCountType;return s==="custom"&&(0,a.jsx)(K.Z,{name:"loopCountCustom",label:" ",width:"xs",placeholder:e.formatMessage({id:"common.count"}),min:1,max:1e3,fieldProps:{precision:0}})}})]}),(0,a.jsx)(T.A.Group,{children:(0,a.jsx)(Y,{name:"random",label:e.formatMessage({id:"common.random-play"}),tooltip:e.formatMessage({id:"common.random-play.tooltip"})})}),(0,a.jsxs)(T.A.Group,{children:[(0,a.jsx)(Y,{name:"referenceNoteEnabled",label:e.formatMessage({id:"common.reference-note"}),tooltip:e.formatMessage({id:"common.reference-note.tooltip"})}),(0,a.jsx)(G.Z,{name:["referenceNoteEnabled"],children:function(i){var s=i.referenceNoteEnabled;return s&&(0,a.jsx)(fe.Z,{name:"referenceNote",label:" ",width:"xs",options:u.cS,placeholder:e.formatMessage({id:"common.reference-note.placeholder"})})}})]})]})},$e=Ne,ie=n(84611),Te=function(){var e=(0,k.useIntl)(),o=(0,u.L3)(e);return(0,a.jsxs)(he.Z,{title:e.formatMessage({id:"common.playback-settings"}),className:"mb-3 sm:mb-6",children:[(0,a.jsxs)(T.A.Group,{title:e.formatMessage({id:"common.time-settings"}),children:[(0,a.jsx)(ie.Z,{name:"toneDuration",label:e.formatMessage({id:"common.tone-duration"}),width:"md",min:u.Qx,max:u.Zf,step:u.LB,fieldProps:{tooltip:{formatter:o}}}),(0,a.jsx)(ie.Z,{name:"toneWait",label:e.formatMessage({id:"common.tone-wait"}),width:"md",min:u.Qx,max:u.Zf,step:u.LB,fieldProps:{tooltip:{formatter:o}}})]}),(0,a.jsxs)(T.A.Group,{title:e.formatMessage({id:"common.tts-settings"}),children:[(0,a.jsx)(Y,{name:"ttsEnable",label:e.formatMessage({id:"common.tts-enable"}),tooltip:e.formatMessage({id:"common.tts-enable.tooltip"})}),(0,a.jsx)(G.Z,{name:["ttsEnable"],children:function(s){var l=s.ttsEnable;return l&&(0,a.jsx)(ie.Z,{name:"ttsRate",label:e.formatMessage({id:"common.tts-rate"}),tooltip:e.formatMessage({id:"common.tts-rate.tooltip"}),width:"md",min:.5,max:4,step:.1,fieldProps:{tooltip:{formatter:function(p){return"".concat(p,"x ").concat(e.formatMessage({id:"common.tone-duration"}))}}}})}}),(0,a.jsx)(G.Z,{name:["ttsEnable"],children:function(s){var l=s.ttsEnable;return l&&(0,a.jsx)(ie.Z,{name:"ttsWait",label:e.formatMessage({id:"common.tts-wait"}),width:"md",min:u.Qx,max:u.Zf,step:u.LB,fieldProps:{tooltip:{formatter:o}}})}})]}),(0,a.jsx)(G.Z,{name:["ttsEnable"],children:function(s){var l=s.ttsEnable;return l&&(0,a.jsxs)(T.A.Group,{children:[(0,a.jsx)(Y,{name:"ttsSolfege",label:e.formatMessage({id:"common.tts-solfege"}),tooltip:e.formatMessage({id:"common.tts-solfege.tooltip"})}),(0,a.jsx)(G.Z,{name:["ttsSolfege"],children:function(p){var P=p.ttsSolfege;return P&&(0,a.jsx)(ie.Z,{name:"ttsSolfegeWait",label:e.formatMessage({id:"common.tts-solfege-wait"}),width:"sm",min:u.Qx,max:u.Zf,step:u.LB,fieldProps:{tooltip:{formatter:o}}})}})]})}}),(0,a.jsx)(G.Z,{name:["ttsEnable"],children:function(s){var l=s.ttsEnable;return l&&(0,a.jsxs)(T.A.Group,{children:[(0,a.jsx)(Y,{name:"ttsNotation",label:e.formatMessage({id:"common.tts-notation"}),tooltip:e.formatMessage({id:"common.tts-notation.tooltip"})}),(0,a.jsx)(G.Z,{name:["ttsNotation"],children:function(p){var P=p.ttsNotation;return P&&(0,a.jsx)(ie.Z,{name:"ttsNotationWait",label:e.formatMessage({id:"common.tts-notation-wait"}),width:"sm",min:u.Qx,max:u.Zf,step:u.LB,fieldProps:{tooltip:{formatter:o}}})}})]})}})]})},Ie=Te,je=n(90228),Ce=n.n(je),ht=n(87999),Qe=n.n(ht),vt=n(7033),Pt=n(32613),Fe=n(85747),we=n(21017),Ct=n(82773),yt=n(87150),xt=n(30371),ye=n(85419),ze=n(44241),Xe=n(95977),Je=n(6640),Ye=n(9281),ke=n(53419),qe=n(49735),bt=n(80743),He=n(64933),te=n(4814),xe=n(62114),be=n(8201),_e=n(95314),se=n(49933),Et=n(15690),et=n(15218),St=n(53925),tt=n(32748),Mt=t=>{const{componentCls:e,notificationMarginEdge:o,animationMaxHeight:i}=t,s=`${e}-notice`,l=new se.E4("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),m=new se.E4("antNotificationTopFadeIn",{"0%":{top:-i,opacity:0},"100%":{top:0,opacity:1}}),p=new se.E4("antNotificationBottomFadeIn",{"0%":{bottom:t.calc(i).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),P=new se.E4("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[e]:{[`&${e}-top, &${e}-bottom`]:{marginInline:0,[s]:{marginInline:"auto auto"}},[`&${e}-top`]:{[`${e}-fade-enter${e}-fade-enter-active, ${e}-fade-appear${e}-fade-appear-active`]:{animationName:m}},[`&${e}-bottom`]:{[`${e}-fade-enter${e}-fade-enter-active, ${e}-fade-appear${e}-fade-appear-active`]:{animationName:p}},[`&${e}-topRight, &${e}-bottomRight`]:{[`${e}-fade-enter${e}-fade-enter-active, ${e}-fade-appear${e}-fade-appear-active`]:{animationName:l}},[`&${e}-topLeft, &${e}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:o,_skip_check_:!0},[s]:{marginInlineEnd:"auto",marginInlineStart:0},[`${e}-fade-enter${e}-fade-enter-active, ${e}-fade-appear${e}-fade-appear-active`]:{animationName:P}}}}};const Nt=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],$t={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},Tt=(t,e)=>{const{componentCls:o}=t;return{[`${o}-${e}`]:{[`&${o}-stack > ${o}-notice-wrapper`]:{[e.startsWith("top")?"top":"bottom"]:0,[$t[e]]:{value:0,_skip_check_:!0}}}}},It=t=>{const e={};for(let o=1;o<t.notificationStackLayer;o++)e[`&:nth-last-child(${o+1})`]={overflow:"hidden",[`& > ${t.componentCls}-notice`]:{opacity:0,transition:`opacity ${t.motionDurationMid}`}};return v({[`&:not(:nth-last-child(-n+${t.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},e)},jt=t=>{const e={};for(let o=1;o<t.notificationStackLayer;o++)e[`&:nth-last-child(${o+1})`]={background:t.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return v({},e)};var Ft=t=>{const{componentCls:e}=t;return v({[`${e}-stack`]:{[`& > ${e}-notice-wrapper`]:v({transition:`transform ${t.motionDurationSlow}, backdrop-filter 0s`,willChange:"transform, opacity",position:"absolute"},It(t))},[`${e}-stack:not(${e}-stack-expanded)`]:{[`& > ${e}-notice-wrapper`]:v({},jt(t))},[`${e}-stack${e}-stack-expanded`]:{[`& > ${e}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${t.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:t.margin,width:"100%",insetInline:0,bottom:t.calc(t.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Nt.map(o=>Tt(t,o)).reduce((o,i)=>v(v({},o),i),{}))};const nt=t=>{const{iconCls:e,componentCls:o,boxShadow:i,fontSizeLG:s,notificationMarginBottom:l,borderRadiusLG:m,colorSuccess:p,colorInfo:P,colorWarning:f,colorError:b,colorTextHeading:Z,notificationBg:j,notificationPadding:V,notificationMarginEdge:L,progressBg:Q,notificationProgressHeight:O,fontSize:w,lineHeight:I,width:d,notificationIconSize:y,colorText:h,colorSuccessBg:C,colorErrorBg:W,colorInfoBg:B,colorWarningBg:A}=t,E=`${o}-notice`;return{position:"relative",marginBottom:l,marginInlineStart:"auto",background:j,borderRadius:m,boxShadow:i,[E]:{padding:V,width:d,maxWidth:`calc(100vw - ${(0,se.bf)(t.calc(L).mul(2).equal())})`,lineHeight:I,wordWrap:"break-word",borderRadius:m,overflow:"hidden","&-success":C?{background:C}:{},"&-error":W?{background:W}:{},"&-info":B?{background:B}:{},"&-warning":A?{background:A}:{}},[`${E}-title`]:{marginBottom:t.marginXS,color:Z,fontSize:s,lineHeight:t.lineHeightLG},[`${E}-description`]:{fontSize:w,color:h,marginTop:t.marginXS},[`${E}-closable ${E}-title`]:{paddingInlineEnd:t.paddingLG},[`${E}-with-icon ${E}-title`]:{marginBottom:t.marginXS,marginInlineStart:t.calc(t.marginSM).add(y).equal(),fontSize:s},[`${E}-with-icon ${E}-description`]:{marginInlineStart:t.calc(t.marginSM).add(y).equal(),fontSize:w},[`${E}-icon`]:{position:"absolute",fontSize:y,lineHeight:1,[`&-success${e}`]:{color:p},[`&-info${e}`]:{color:P},[`&-warning${e}`]:{color:f},[`&-error${e}`]:{color:b}},[`${E}-close`]:v({position:"absolute",top:t.notificationPaddingVertical,insetInlineEnd:t.notificationPaddingHorizontal,color:t.colorIcon,outline:"none",width:t.notificationCloseButtonSize,height:t.notificationCloseButtonSize,borderRadius:t.borderRadiusSM,transition:`background-color ${t.motionDurationMid}, color ${t.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center",background:"none",border:"none","&:hover":{color:t.colorIconHover,backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive}},(0,et.Qy)(t)),[`${E}-progress`]:{position:"absolute",display:"block",appearance:"none",inlineSize:`calc(100% - ${(0,se.bf)(m)} * 2)`,left:{_skip_check_:!0,value:m},right:{_skip_check_:!0,value:m},bottom:0,blockSize:O,border:0,"&, &::-webkit-progress-bar":{borderRadius:m,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:Q},"&::-webkit-progress-value":{borderRadius:m,background:Q}},[`${E}-actions`]:{float:"right",marginTop:t.marginSM}}},Dt=t=>{const{componentCls:e,notificationMarginBottom:o,notificationMarginEdge:i,motionDurationMid:s,motionEaseInOut:l}=t,m=`${e}-notice`,p=new se.E4("antNotificationFadeOut",{"0%":{maxHeight:t.animationMaxHeight,marginBottom:o},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[e]:ce(v({},(0,et.Wf)(t)),{position:"fixed",zIndex:t.zIndexPopup,marginRight:{value:i,_skip_check_:!0},[`${e}-hook-holder`]:{position:"relative"},[`${e}-fade-appear-prepare`]:{opacity:"0 !important"},[`${e}-fade-enter, ${e}-fade-appear`]:{animationDuration:t.motionDurationMid,animationTimingFunction:l,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${e}-fade-leave`]:{animationTimingFunction:l,animationFillMode:"both",animationDuration:s,animationPlayState:"paused"},[`${e}-fade-enter${e}-fade-enter-active, ${e}-fade-appear${e}-fade-appear-active`]:{animationPlayState:"running"},[`${e}-fade-leave${e}-fade-leave-active`]:{animationName:p,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${m}-actions`]:{float:"left"}}})},{[e]:{[`${m}-wrapper`]:nt(t)}}]},ot=t=>({zIndexPopup:t.zIndexPopupBase+Et.u6+50,width:384,progressBg:`linear-gradient(90deg, ${t.colorPrimaryBorderHover}, ${t.colorPrimary})`,colorSuccessBg:void 0,colorErrorBg:void 0,colorInfoBg:void 0,colorWarningBg:void 0}),at=t=>{const e=t.paddingMD,o=t.paddingLG;return(0,St.IX)(t,{notificationBg:t.colorBgElevated,notificationPaddingVertical:e,notificationPaddingHorizontal:o,notificationIconSize:t.calc(t.fontSizeLG).mul(t.lineHeightLG).equal(),notificationCloseButtonSize:t.calc(t.controlHeightLG).mul(.55).equal(),notificationMarginBottom:t.margin,notificationPadding:`${(0,se.bf)(t.paddingMD)} ${(0,se.bf)(t.paddingContentHorizontalLG)}`,notificationMarginEdge:t.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2})};var rt=(0,tt.I$)("Notification",t=>{const e=at(t);return[Dt(e),Mt(e),Ft(e)]},ot),Zt=(0,tt.bk)(["Notification","PurePanel"],t=>{const e=`${t.componentCls}-notice`,o=at(t);return{[`${e}-pure-panel`]:ce(v({},nt(o)),{width:o.width,maxWidth:`calc(100vw - ${(0,se.bf)(t.calc(o.notificationMarginEdge).mul(2).equal())})`,margin:0})}},ot);const pn={info:r.createElement(qe.Z,null),success:r.createElement(Xe.Z,null),error:r.createElement(Je.Z,null),warning:r.createElement(ke.Z,null),loading:r.createElement(bt.Z,null)};function Ue(t,e){return e===null||e===!1?null:e||r.createElement(Ye.Z,{className:`${t}-close-icon`})}const Rt={success:Xe.Z,info:qe.Z,error:Je.Z,warning:ke.Z},it=t=>{const{prefixCls:e,icon:o,type:i,title:s,description:l,actions:m,role:p="alert",styles:P,classNames:f}=t;let b=null;return o?b=r.createElement("span",{className:(0,te.W)(`${e}-icon`,f.icon),style:P.icon},o):i&&(b=r.createElement(Rt[i]||null,{className:(0,te.W)(`${e}-icon`,f.icon,`${e}-icon-${i}`),style:P.icon})),r.createElement("div",{className:(0,te.W)({[`${e}-with-icon`]:b}),role:p},b,r.createElement("div",{className:(0,te.W)(`${e}-title`,f.title),style:P.title},s),l&&r.createElement("div",{className:(0,te.W)(`${e}-description`,f.description),style:P.description},l),m&&r.createElement("div",{className:(0,te.W)(`${e}-actions`,f.actions),style:P.actions},m))};var Lt=t=>{const X=t,{prefixCls:e,icon:o,type:i,message:s,title:l,description:m,btn:p,actions:P,closeIcon:f,className:b,style:Z,styles:j,classNames:V,closable:L}=X,Q=Ve(X,["prefixCls","icon","type","message","title","description","btn","actions","closeIcon","className","style","styles","classNames","closable"]),{getPrefixCls:O,className:w,style:I,classNames:d,styles:y}=(0,ye.dj)("notification"),[h,C]=(0,xe.MW)([d,V],[y,j],{props:t}),{notification:W}=r.useContext(ye.E_),B=P!=null?P:p,A=l!=null?l:s,E=e||O("notification"),ue=`${E}-notice`,Ee=(0,_e.Z)(E),[ve,Se]=rt(E,Ee),[Ze,M,,R]=(0,be.bt)((0,be.wz)(t),(0,be.wz)(W),{closable:!0,closeIcon:r.createElement(Ye.Z,{className:`${E}-close-icon`}),closeIconRender:J=>Ue(E,J)}),z=Ze?v({onClose:L&&typeof L=="object"?L==null?void 0:L.onClose:void 0,closeIcon:M},R):!1;return r.createElement("div",{className:(0,te.W)(`${ue}-pure-panel`,ve,b,Se,Ee,h.root),style:C.root},r.createElement(Zt,{prefixCls:E}),r.createElement(He.qX,ce(v({style:v(v({},I),Z)},Q),{prefixCls:E,eventKey:"pure",duration:null,closable:z,className:(0,te.W)(b,w),content:r.createElement(it,{classNames:h,styles:C,prefixCls:ue,icon:o,type:i,title:A,description:m,actions:B})})))},Ot=n(60218),Wt=n(30486);function Bt(t,e,o){let i;switch(t){case"top":i={left:"50%",transform:"translateX(-50%)",right:"auto",top:e,bottom:"auto"};break;case"topLeft":i={left:0,top:e,bottom:"auto"};break;case"topRight":i={right:0,top:e,bottom:"auto"};break;case"bottom":i={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:o};break;case"bottomLeft":i={left:0,top:"auto",bottom:o};break;default:i={right:0,top:"auto",bottom:o};break}return i}function At(t){return{motionName:`${t}-fade`}}function Gt(t,e,o){return typeof t!="undefined"?t:typeof(e==null?void 0:e.closeIcon)!="undefined"?e.closeIcon:o==null?void 0:o.closeIcon}const st=24,wt=4.5,zt="topRight",Ht=({children:t,prefixCls:e})=>{const o=(0,_e.Z)(e),[i,s]=rt(e,o);return r.createElement(He.JB,{classNames:{list:(0,te.W)(i,s,o)}},t)},Ut=(t,{prefixCls:e,key:o})=>r.createElement(Ht,{prefixCls:e,key:o},t),Kt=r.forwardRef((t,e)=>{const{top:o,bottom:i,prefixCls:s,getContainer:l,maxCount:m,rtl:p,onAllRemoved:P,stack:f,duration:b=wt,pauseOnHover:Z=!0,showProgress:j}=t,{getPrefixCls:V,getPopupContainer:L,direction:Q}=(0,ye.dj)("notification"),{notification:O}=(0,r.useContext)(ye.E_),[,w]=(0,Wt.ZP)(),I=s||V("notification"),d=(0,r.useMemo)(()=>typeof b=="number"&&b>0?b:!1,[b]),y=ue=>Bt(ue,o!=null?o:st,i!=null?i:st),h=()=>(0,te.W)({[`${I}-rtl`]:p!=null?p:Q==="rtl"}),C=()=>At(I),[W,B]=(0,He.lm)({prefixCls:I,style:y,className:h,motion:C,closable:{closeIcon:Ue(I)},duration:d,getContainer:()=>(l==null?void 0:l())||(L==null?void 0:L())||document.body,maxCount:m,pauseOnHover:Z,showProgress:j,onAllRemoved:P,renderNotifications:Ut,stack:f===!1?!1:{threshold:typeof f=="object"?f==null?void 0:f.threshold:void 0,offset:8,gap:w.margin}}),[A,E]=(0,xe.MW)([O==null?void 0:O.classNames,t==null?void 0:t.classNames],[O==null?void 0:O.styles,t==null?void 0:t.styles],{props:t});return r.useImperativeHandle(e,()=>ce(v({},W),{prefixCls:I,notification:O,classNames:A,styles:E})),B});function lt(t){const e=r.useRef(null),o=(0,Ot.ln)("Notification"),{notification:i}=r.useContext(ye.E_);return[r.useMemo(()=>{const l=f=>{var Le;if(!e.current)return;const{open:b,prefixCls:Z,notification:j,classNames:V,styles:L}=e.current,Q=(j==null?void 0:j.className)||{},O=(j==null?void 0:j.style)||{},w=`${Z}-notice`,Pe=f,{title:I,message:d,description:y,icon:h,type:C,btn:W,actions:B,className:A,style:E,role:ue="alert",closeIcon:Ee,closable:ve,classNames:Se={},styles:Ze={}}=Pe,M=Ve(Pe,["title","message","description","icon","type","btn","actions","className","style","role","closeIcon","closable","classNames","styles"]),R=I!=null?I:d,z=B!=null?B:W,X=Ue(w,Gt(Ee,t,j)),[J,Me,,ne]=(0,be.nB)((0,be.wz)(v(v({},t||{}),f)),(0,be.wz)(i),{closable:!0,closeIcon:X}),x=J?v({onClose:ve&&typeof ve=="object"?ve.onClose:void 0,closeIcon:Me},ne):!1,de=(0,xe.jK)(Se,{props:f}),pe=(0,xe.jK)(Ze,{props:f}),oe=(0,xe.Ez)(void 0,V,de),Re=(0,xe.y0)(L,pe);return b(ce(v({placement:(Le=t==null?void 0:t.placement)!=null?Le:zt},M),{content:r.createElement(it,{prefixCls:w,icon:h,type:C,title:R,description:y,actions:z,role:ue,classNames:oe,styles:Re}),className:(0,te.W)({[`${w}-${C}`]:C},A,Q,oe.root),style:v(v(v({},O),Re.root),E),closable:x}))},p={open:l,destroy:f=>{var b,Z;f!==void 0?(b=e.current)==null||b.close(f):(Z=e.current)==null||Z.destroy()}};return["success","info","warning","error"].forEach(f=>{p[f]=b=>l(ce(v({},b),{type:f}))}),p},[t,i]),r.createElement(Kt,ce(v({key:"notification-holder"},t),{ref:e}))]}function Vt(t){return lt(t)}let q=null,Oe=t=>t(),We=[],De={};function ct(){const{getContainer:t,rtl:e,maxCount:o,top:i,bottom:s,showProgress:l,pauseOnHover:m}=De,p=(t==null?void 0:t())||document.body;return{getContainer:()=>p,rtl:e,maxCount:o,top:i,bottom:s,showProgress:l,pauseOnHover:m}}const Qt=r.forwardRef((t,e)=>{const{notificationConfig:o,sync:i}=t,{getPrefixCls:s}=(0,r.useContext)(ye.E_),l=De.prefixCls||s("notification"),m=(0,r.useContext)(xt.J),[p,P]=lt(v(ce(v({},o),{prefixCls:l}),m.notification));return r.useEffect(i,[]),r.useImperativeHandle(e,()=>{const f=v({},p);return Object.keys(f).forEach(b=>{f[b]=(...Z)=>(i(),p[b].apply(p,Z))}),{instance:f,sync:i}}),P}),Xt=r.forwardRef((t,e)=>{const[o,i]=r.useState(ct),s=()=>{i(ct)};r.useEffect(s,[]);const l=(0,ze.w6)(),m=l.getRootPrefixCls(),p=l.getIconPrefixCls(),P=l.getTheme(),f=r.createElement(Qt,{ref:e,sync:s,notificationConfig:o});return r.createElement(ze.ZP,{prefixCls:m,iconPrefixCls:p,theme:P},l.holderRender?l.holderRender(f):f)}),Ke=()=>{if(!q){const t=document.createDocumentFragment(),e={fragment:t};q=e,Oe(()=>{(0,yt.s)(r.createElement(Xt,{ref:o=>{const{instance:i,sync:s}=o||{};Promise.resolve().then(()=>{!e.instance&&i&&(e.instance=i,e.sync=s,Ke())})}}),t)});return}q.instance&&(We.forEach(t=>{switch(t.type){case"open":{Oe(()=>{q.instance.open(v(v({},De),t.config))});break}case"destroy":Oe(()=>{var e;(e=q==null?void 0:q.instance)==null||e.destroy(t.key)});break}}),We=[])};function Jt(t){De=v(v({},De),t),Oe(()=>{var e;(e=q==null?void 0:q.sync)==null||e.call(q)})}function ut(t){const e=(0,ze.w6)();We.push({type:"open",config:t}),Ke()}const Yt=t=>{We.push({type:"destroy",key:t}),Ke()},kt=["success","info","warning","error"],dt={open:ut,destroy:Yt,config:Jt,useNotification:Vt,_InternalPanelDoNotUseOrYouWillBeFired:Lt};kt.forEach(t=>{dt[t]=e=>ut(ce(v({},e),{type:t}))});const vn=()=>{};let Pn=null;const Cn=null;let yn=null;const xn=null;var qt=dt,_t=n(1073),en=n(60672),Be=n(55248),tn={trainPlayInfo:"trainPlayInfo___cZ8NU"},le=null,nn=function(e){var o=(0,r.useState)(!0),i=$()(o,2),s=i[0],l=i[1],m=(0,r.useState)(!1),p=$()(m,2),P=p[0],f=p[1],b=(0,r.useState)("..."),Z=$()(b,2),j=Z[0],V=Z[1],L=(0,r.useState)(!1),Q=$()(L,2),O=Q[0],w=Q[1],I=qt.useNotification(),d=$()(I,2),y=d[1],h=(0,k.useIntl)(),C=r.useRef(0),W=r.useRef(0),B=function(R){var z=R,X={Do:"Duo",Re:"Rui",Fa:"Fa",Sol:"Suo",La:"La",Si:"Xi",\u5347:"Sheng ",\u964D:"Jiang "};Object.entries(X).forEach(function(ne){var x=$()(ne,2),de=x[0],pe=x[1],oe=new RegExp(de,"g");z=z.replace(oe,pe)}),z=z.replace(/#/g," sharp").replace(/m($|7)/g," minor$1").replace(/maj/g," major ").replace(/sus/g," suspended ").replace(/\//g," over ").replace(/([A-G])(\d)/g,"$1 $2").trim();var J=new SpeechSynthesisUtterance(z),Me=e.ttsRate||1;J.rate=1/Me,window.speechSynthesis.speak(J)},A=r.useRef(e);A.current=e;var E=function(){var M=Qe()(Ce()().mark(function R(z,X){var J;return Ce()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return le!==null&&(J=[],A.current.toneType==="GuitarChords"&&(J=(0,Fe.UV)(z)),J.length>0?le.triggerAttackRelease(J,X/1e3):le.triggerAttackRelease(z,X/1e3)),ne.abrupt("return",new Promise(function(x){setTimeout(x,X)}));case 2:case"end":return ne.stop()}},R)}));return function(z,X){return M.apply(this,arguments)}}(),ue=r.useMemo(function(){var M=(e.toneDuration||0)+(e.toneWait||0)+(e.ttsWait||0)+(e.referenceNoteEnabled?(e.toneDuration||0)+(e.toneWait||0):0),R=0;return e.ttsEnable&&(R+=1e3,A.current.toneType!=="GuitarChords"&&(e.ttsSolfege&&(R+=(e.ttsSolfegeWait||0)+1e3),e.ttsNotation&&(R+=(e.ttsNotationWait||0)+1e3))),Math.max(M+R,500)},[e.toneDuration,e.toneWait,e.ttsWait,e.referenceNoteEnabled,e.ttsEnable,e.ttsSolfege,e.ttsSolfegeWait,e.ttsNotation,e.ttsNotationWait]);(0,r.useEffect)(function(){if(s||!e.open){le!==null&&le.triggerRelease(Be.zO());return}var M=!1,R=null,z=null,X=function(){var Me=Qe()(Ce()().mark(function ne(){var x,de,pe,oe,Re,Pe,Le,Ae;return Ce()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!M){c.next=2;break}return c.abrupt("return");case 2:if(x=A.current,de=x.toneList.length,de!==0){c.next=6;break}return c.abrupt("return");case 6:if(pe=0,x.random?pe=Math.floor(Math.random()*de):pe=C.current,oe=x.toneList[pe],V(oe),w(!1),x.random){c.next=21;break}if(C.current++,!(C.current>=de)){c.next=19;break}if(C.current=0,W.current++,!(Number(x.loopCount)>0&&W.current>=Number(x.loopCount))){c.next=19;break}return l(!0),c.abrupt("return");case 19:c.next=28;break;case 21:if(C.current++,!(C.current>=de)){c.next=28;break}if(C.current=0,W.current++,!(Number(x.loopCount)>0&&W.current>=Number(x.loopCount))){c.next=28;break}return l(!0),c.abrupt("return");case 28:if(!(x.referenceNoteEnabled&&x.referenceNote)){c.next=37;break}if(!M){c.next=31;break}return c.abrupt("return");case 31:return c.next=33,E(x.referenceNote,x.toneDuration);case 33:if(!M){c.next=35;break}return c.abrupt("return");case 35:return c.next=37,new Promise(function(ae){z=setTimeout(ae,x.toneWait)});case 37:if(!M){c.next=39;break}return c.abrupt("return");case 39:return c.next=41,E(oe,x.toneDuration);case 41:if(!M){c.next=43;break}return c.abrupt("return");case 43:if(x.ttsEnable||w(!0),!M){c.next=46;break}return c.abrupt("return");case 46:if(!x.ttsEnable){c.next=69;break}return c.next=49,new Promise(function(ae){R=setTimeout(ae,x.toneWait||200)});case 49:if(!M){c.next=51;break}return c.abrupt("return");case 51:if(w(!0),B(oe),A.current.toneType!=="GuitarChords"){c.next=55;break}return c.abrupt("return");case 55:if(!x.ttsSolfege){c.next=62;break}return c.next=58,new Promise(function(ae){R=setTimeout(ae,x.ttsSolfegeWait||500)});case 58:if(!M){c.next=60;break}return c.abrupt("return");case 60:Re=(0,Fe.jP)(oe),Pe=Re.solfege,Pe&&(B(Pe),V(function(ae){return"".concat(ae," ").concat(Pe)}));case 62:if(!x.ttsNotation){c.next=69;break}return c.next=65,new Promise(function(ae){R=setTimeout(ae,x.ttsNotationWait||500)});case 65:if(!M){c.next=67;break}return c.abrupt("return");case 67:Le=(0,Fe.jP)(oe),Ae=Le.number,Ae&&(B(Ae),V(function(ae){return"".concat(ae," ").concat(Ae)}));case 69:case"end":return c.stop()}},ne)}));return function(){return Me.apply(this,arguments)}}();X();var J=setInterval(X,ue);return function(){M=!0,clearInterval(J),R&&clearTimeout(R),z&&clearTimeout(z),le!==null&&le.triggerRelease(Be.zO())}},[s,e.open,ue]),(0,r.useEffect)(function(){e.open&&(C.current=0,W.current=0,V("..."),w(!1),f(!1),le||(le=new Be.v2(Be.WV).toDestination()),(0,we.pr)(e.instrumentName).then(function(M){le=M}).catch(function(M){console.error("\u52A0\u8F7D\u97F3\u8272\u9519\u8BEF\uFF0C\u964D\u7EA7\u4F7F\u7528Synth",M)}),l(!1))},[e.open]);var Ee=function(){l(!s)},ve=(0,Pt.u)(e.instrumentName),Se=ve.status,Ze=function(){return Se==="loading"?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:h.formatMessage({id:"tone-training.current-tone"})}),(0,a.jsx)("div",{className:"text-yellow-600 text-sm",children:h.formatMessage({id:"tone-training.instrument-loading-hint"})})]}):Se==="error"?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:h.formatMessage({id:"tone-training.current-tone"})}),(0,a.jsx)("div",{className:"text-red-600 text-sm",children:h.formatMessage({id:"tone-training.instrument-error-hint"})})]}):h.formatMessage({id:"tone-training.current-tone"})};return(0,a.jsxs)(a.Fragment,{children:[y,(0,a.jsx)(_t.Z,{open:e.open,destroyOnHidden:!0,width:"90%",style:{maxWidth:800},centered:!0,maskClosable:!1,okText:s?h.formatMessage({id:"tone-training.resume"}):h.formatMessage({id:"tone-training.pause"}),onOk:Ee,cancelText:h.formatMessage({id:"tone-training.stop"}),onCancel:function(){e.onCancel()},loading:P,title:P?h.formatMessage({id:"tone-training.instrument-loading"}):h.formatMessage({id:"tone-training.title"}),children:(0,a.jsx)(en.ZP,{className:tn.trainPlayInfo,title:Ze(),subTitle:(0,a.jsx)("div",{className:"text-2xl sm:text-4xl flex items-center justify-center gap-2",children:O?j:"?"}),icon:O&&Fe.YD[j]?(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(vt.Z,{name:j,fingering:Fe.YD[j],width:100,height:140})}):(0,a.jsx)("div",{className:"flex items-center justify-center h-[140px]",children:(0,a.jsx)(Ct.Z,{className:"text-6xl text-blue-400 animate-pulse"})})})})]})},on=nn,mt=n(6946),an=n(5318),rn=n(21004),sn=function(){var e=(0,r.useState)(u.sO),o=$()(e,2),i=o[0],s=o[1],l=(0,r.useState)(!1),m=$()(l,2),p=m[0],P=m[1],f=T.A.useForm(),b=$()(f,1),Z=b[0],j=(0,k.useIntl)(),V=T.A.useWatch("instrumentName",Z)||u.OG;(0,r.useEffect)(function(){(0,we.pr)(V).catch(console.error)},[V]);var L=function(d,y){if(console.log("flattenGroupedTones input:",{groups:d,toneType:y}),y==="GuitarChords"){var h=d.chords||[];return console.log("Returning chords:",h),h}var C=Object.entries(d||{}).filter(function(W){var B=$()(W,1),A=B[0];return!isNaN(Number(A))}).map(function(W){var B=$()(W,2),A=B[1];return A}).flat().filter(Boolean);return console.log("Returning scales:",C),C},Q=function(d){var y={};return y.chords=d.filter(function(h){return u.sw.includes(h)}),u.Dz.forEach(function(h){y[h]=d.filter(function(C){return C.endsWith(String(h))&&!u.sw.includes(C)})}),y};(0,r.useEffect)(function(){var I=(0,mt.Tp)(u.F6,null);if(I)try{var d=I;d.toneList&&!d.toneListGroup&&(d.toneListGroup=Q(d.toneList));var y=d.loopCountType||String(d.loopCount||0),h=d.loopCountCustom||d.loopCount||10;Z.setFieldsValue(N()(N()({},d),{},{loopCountType:y,loopCountCustom:y==="custom"?h:10})),d.instrumentName&&(0,we.pr)(d.instrumentName).catch(console.error),s(N()(N()(N()({},u.sO),d),{},{loopCount:y==="custom"?h:parseInt(y,10),toneList:L(d.toneListGroup,d.toneType||u.W4)}))}catch(C){console.error("Failed to load settings",C)}},[Z]);var O=function(d,y){(0,mt.pd)(u.F6,y,j.formatMessage({id:"tone-training.storage-name"}))},w=function(d){var y=L(d.toneListGroup,d.toneType),h=d.loopCountType==="custom"?d.loopCountCustom:parseInt(d.loopCountType,10),C=N()(N()(N()({},u.sO),d),{},{toneList:y,loopCount:isNaN(h)?0:h});s(C),P(!0)};return(0,a.jsxs)(an._z,{header:{title:j.formatMessage({id:"menu.instrument.tone-training"})},children:[(0,a.jsxs)(T.A,{form:Z,size:"large",initialValues:N()(N()({},u.sO),{},{loopCountType:String(u.sO.loopCount),loopCountCustom:10,toneListGroup:Q(u.sO.toneList)}),onValuesChange:O,onFinish:w,layout:"horizontal",submitter:{searchConfig:{resetText:j.formatMessage({id:"common.reset"}),submitText:j.formatMessage({id:"tone-training.start-training"})},render:function(d,y){return(0,a.jsx)(rn.S,{children:y})}},children:[(0,a.jsx)(ee.Z,{}),(0,a.jsx)($e,{}),(0,a.jsx)(Ie,{})]}),(0,a.jsx)(on,N()({open:p,onCancel:function(){return P(!1)}},i))]})},ln=sn}}]);
}());