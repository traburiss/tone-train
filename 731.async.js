"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[731],{79497:function(ct,F,n){n.d(F,{An:function(){return g},CV:function(){return ft},Dz:function(){return p},F6:function(){return tt},Gg:function(){return l},L3:function(){return v},LB:function(){return t},N7:function(){return P},OG:function(){return u},Qx:function(){return e},Ry:function(){return et},W4:function(){return f},Yi:function(){return vt},Z:function(){return at},Zf:function(){return a},aj:function(){return c},cS:function(){return R},f1:function(){return mt},kk:function(){return rt},n2:function(){return nt},qL:function(){return s},qx:function(){return b},sO:function(){return ut},sw:function(){return x}});var i="Umi Max",f="GuitarChords",P=[{label:"option.tone-type.guitar-chords",value:"GuitarChords"},{label:"option.tone-type.12-tone",value:"12-Tone"},{label:"option.tone-type.8-tone",value:"8-Tone"}],u="guitar-acoustic",s=[{label:"option.instrument.guitar-acoustic",value:"guitar-acoustic"},{label:"option.instrument.guitar-electric",value:"guitar-electric"},{label:"option.instrument.piano",value:"piano"}],c=["C","D","E","F","G","A","B"],g=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],p=[2,3,4,5,6],C=p.flatMap(function(B){return c.map(function(N){return"".concat(N).concat(B)})}),z=p.flatMap(function(B){return g.map(function(N){return"".concat(N).concat(B)})}),x=["C","D","E","F","G","A","B","Em","Am","Dm","Bm","F#m","C#m","Gm","C5","D5","E5","F5","G5","A5","B5","G7","C7","D7","E7","A7","B7","Cmaj7","Gmaj7","Fmaj7","Amaj7","Am7","Em7","Dm7","Bm7","F#m7","Dsus4","Asus4","Esus4","D/F#","C/G","G/B"],l=["C","D","G","A","Em","Am","Dm"],Z=["C","D","G","A","Em","Am","Dm"],b=[{label:"option.loop-count.infinite",value:"0"},{label:"option.loop-count.n-times",value:"20"},{label:"option.loop-count.n-times",value:"50"},{label:"option.loop-count.n-times",value:"200"},{label:"option.loop-count.custom",value:"custom"}],D=!0,$=!1,m=1500,r=!1,o=1500,e=100,a=10*1e3,t=100,v=function(N){return function(U){var A=Number(U);if(isNaN(A))return"".concat(U);var _=N.formatMessage({id:"formatter.millisecond"});if(A<1e3)return"".concat(A).concat(_);var L=Math.floor(A/1e3),I=A%1e3,Q=N.formatMessage({id:"formatter.second"});if(L<60)return I===0?"".concat(L).concat(Q):"".concat(L).concat(Q).concat(I).concat(_);var ot=Math.floor(L/60),E=L%60,dt=N.formatMessage({id:"formatter.minute"});return E===0&&I===0?"".concat(ot).concat(dt).concat(I).concat(_):"".concat(ot).concat(dt).concat(E).concat(Q).concat(I).concat(_)}},T=function(N){var U=Number(N);if(isNaN(U))return"".concat(N);var A=Math.floor(U/1e3),_="";if(A<60)_="".concat(A,"s");else{var L=Math.floor(A/60),I=A%60;_="".concat(L,"m"),I>0&&(_+="".concat(I,"s"))}return"".concat(U," ms (").concat(_,")")},K=1e3,d=1500,y=2e3,j=1,G=!0,R=[{label:"C2",value:"C2"},{label:"C3",value:"C3"},{label:"C4",value:"C4"},{label:"C5",value:"C5"},{label:"C6",value:"C6"}],ut={toneType:f,instrumentName:u,toneList:Z,toneDuration:K,toneWait:d,ttsEnable:D,ttsWait:y,ttsRate:j,ttsSolfege:$,ttsSolfegeWait:m,ttsNotation:r,ttsNotationWait:o,random:G,loopCount:0,referenceNoteEnabled:!1,referenceNote:"C4"},mt="mta:cfg:",ft="mta:sta:",tt="tones:training",et="tones:identification",at="vocal:ma-exercise",nt="vocal:resonance",rt="vocal:range-extension",vt=[{name:"menu.instrument.tone-training",key:tt},{name:"menu.instrument.tone-identification",key:et},{name:"vocal.ma-exercise.title",key:at},{name:"vocal.resonance.title",key:nt},{name:"vocal.range-extension.title",key:rt}]},83513:function(ct,F,n){n.d(F,{u:function(){return s}});var i=n(48305),f=n.n(i),P=n(75271),u=n(44354),s=function(g){var p=(0,P.useState)(function(){return{status:(0,u.tt)(g),progress:(0,u.O$)(g)}}),C=f()(p,2),z=C[0],x=C[1];return(0,P.useEffect)(function(){x({status:(0,u.tt)(g),progress:(0,u.O$)(g)});var l=(0,u.dn)(function(Z,b,D){Z===g&&x({status:b,progress:D})});return function(){l()}},[g]),z}},89673:function(ct,F,n){n.d(F,{Z:function(){return T}});var i=n(90228),f=n.n(i),P=n(87999),u=n.n(P),s=n(48305),c=n.n(s),g=n(83513),p=n(44354),C=n(4373),z=n(47751),x=n(40692),l=n(51735),Z=n(91028),b=n(52722),D=n(4292),$=n(86899),m=n(83757),r=n(18475),o=n(67929),e=n(75271),a=n(55248),t=n(52676),v=function(d){var y=d.visible,j=d.onClose,G=d.patternOffsets,R=d.localizationPrefix,ut=d.startNote,mt=d.endNote,ft=d.rootNoteWait,tt=ft===void 0?1500:ft,et=d.firstNoteDuration,at=et===void 0?1500:et,nt=d.intervalDuration,rt=nt===void 0?500:nt,vt=d.lastNoteDuration,B=vt===void 0?1500:vt,N=d.postMelodyWait,U=N===void 0?1e3:N,A=d.loopCount,_=A===void 0?2:A,L=d.countdown,I=L===void 0?3e3:L,Q=d.bpm,ot=Q===void 0?60:Q,E=(0,x.useIntl)(),dt=l.Z.useToken(),At=dt.token,ve=(0,e.useState)(!1),jt=c()(ve,2),Lt=jt[0],Ft=jt[1],de=(0,e.useState)(!1),Zt=c()(de,2),gt=Zt[0],St=Zt[1],ge=(0,e.useState)(null),Gt=c()(ge,2),Ut=Gt[0],pt=Gt[1],Se=(0,e.useState)(!1),Wt=c()(Se,2),_t=Wt[0],Ot=Wt[1],pe=(0,e.useState)(1),Bt=c()(pe,2),Ee=Bt[0],Jt=Bt[1],he=(0,e.useState)(0),wt=c()(he,2),Te=wt[0],Ne=wt[1],Ae=(0,e.useState)(1),Vt=c()(Ae,2),_e=Vt[0],zt=Vt[1],Oe=(0,e.useState)(null),$t=c()(Oe,2),Ce=$t[0],Ct=$t[1],xe=(0,e.useState)(""),Kt=c()(xe,2),De=Kt[0],xt=Kt[1],Ie=(0,e.useState)(""),Yt=c()(Ie,2),Me=Yt[0],Qt=Yt[1],Re=(0,e.useState)([]),Xt=c()(Re,2),Ht=Xt[0],kt=Xt[1],X=(0,e.useRef)(null),Y=(0,e.useRef)(null),Et=(0,e.useRef)([]);(0,e.useEffect)(function(){for(var S=[],h=1;;){var W="".concat(R,".tip.").concat(h),M=E.formatMessage({id:W,defaultMessage:"END"});if(M==="END"||M===W)break;S.push(M),h++}Et.current=S},[R,E]);var st=(0,e.useCallback)(function(){a.J7.stop(),a.J7.cancel(),Ft(!1),St(!1),pt(null),xt(""),kt([]),Ct(null),Y.current&&(clearInterval(Y.current),Y.current=null)},[]),qt=(0,e.useCallback)(function(){if(Et.current.length===0)return"";var S=Math.floor(Math.random()*Et.current.length);return Et.current[S]},[]),Pe=(0,e.useCallback)(function(){if(gt)a.J7.start(),St(!1);else{var S;a.J7.pause(),(S=X.current)===null||S===void 0||S.releaseAll(),St(!0)}},[gt]),Dt=(0,e.useCallback)(u()(f()().mark(function S(){var h,W,M,H,O,It,ae,ne,re,oe,it,se,k;return f()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:Ft(!0),St(!1),Jt(1),zt(1),a.J7.cancel(),a.J7.bpm.value=ot,h=a.Di(ut).toMidi(),W=a.Di(mt).toMidi(),M=W>=h?1:-1,H=Math.abs(W-h),Ne(H+1),O=0,It=tt/1e3,ae=at/1e3,ne=rt/1e3,re=B/1e3,oe=U/1e3,it=0;case 18:if(!(it<_)){J.next=29;break}se=f()().mark(function ye(){var Tt,Mt,ie,le,ce,Rt,ue,Nt;return f()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:Tt=h+k*M,Mt=a.Di(Tt,"midi").toNote(),ie=G.map(function(w){return a.Di(Tt+w,"midi").toNote()}),le=it+1,ce=k+1,Rt=it===0&&k===0,a.J7.schedule(function(w){var V;a.hG.schedule(function(){Jt(le),zt(ce),kt(ie),xt(Mt),Ct(-1),Rt&&Qt(E.formatMessage({id:"".concat(R,".tip.0")}))},w),(V=X.current)===null||V===void 0||V.triggerAttackRelease(Mt,It,w)},O),O+=It,a.J7.schedule(function(w){a.hG.schedule(function(){Rt||Qt(qt())},w)},O),ue=f()().mark(function w(V){var me,Pt,lt;return f()().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:me=Tt+G[V],Pt=a.Di(me,"midi").toNote(),lt=ne,V===0?lt=ae:V===G.length-1&&(lt=re),a.J7.schedule(function(fe){var yt;a.hG.schedule(function(){xt(Pt),Ct(V)},fe),(yt=X.current)===null||yt===void 0||yt.triggerAttackRelease(Pt,lt,fe)},O),O+=lt;case 6:case"end":return bt.stop()}},w)}),Nt=0;case 11:if(!(Nt<G.length)){q.next=16;break}return q.delegateYield(ue(Nt),"t0",13);case 13:Nt++,q.next=11;break;case 16:O+=oe;case 17:case"end":return q.stop()}},ye)}),k=0;case 21:if(!(k<=H)){J.next=26;break}return J.delegateYield(se(),"t0",23);case 23:k++,J.next=21;break;case 26:it++,J.next=18;break;case 29:a.J7.schedule(function(){a.hG.schedule(function(){st()},a.J7.seconds+.1)},O),a.J7.start();case 31:case"end":return J.stop()}},S)})),[ut,mt,tt,at,rt,B,U,_,ot,E,qt,st,G,R]),be=(0,g.u)("piano"),ht=be.status,te=(0,e.useRef)(ht);te.current=ht;var ee=(0,e.useCallback)(u()(f()().mark(function S(){var h;return f()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,a.Do.resume();case 2:return M.next=4,a.BL();case 4:h=function(){if(I>0){var O=Math.ceil(I/1e3);pt(O),Y.current=setInterval(function(){O--,O>0?pt(O):(pt(null),Y.current&&(clearInterval(Y.current),Y.current=null),Dt())},1e3)}else Dt()},te.current==="loaded"?(0,p.pr)("piano").then(function(H){X.current=H,Ot(!1),h()}):(console.log("Instrument not loaded, falling back to synth"),X.current=new a.v2(a.WV).toDestination(),Ot(!0),h());case 6:case"end":return M.stop()}},S)})),[I,Dt]);return(0,e.useEffect)(function(){y&&_t&&ht==="loaded"&&(0,p.pr)("piano").then(function(S){X.current=S,Ot(!1),Z.ZP.success(E.formatMessage({id:"vocal.ma-exercise.piano-loaded"}))})},[y,_t,ht,E]),(0,e.useEffect)(function(){if(!y){st();return}return ee(),function(){return st()}},[y,ee,st]),(0,t.jsx)(b.Z,{open:y,onCancel:j,footer:null,destroyOnHidden:!0,width:"90%",style:{maxWidth:800},centered:!0,maskClosable:!1,title:Lt?"".concat(Ee,"/").concat(_," - ").concat(_e,"/").concat(Te):E.formatMessage({id:"".concat(R,".title")}),children:(0,t.jsxs)("div",{className:"vocal-player-container",children:[Ut!==null&&(0,t.jsxs)("div",{className:"countdown-overlay",children:[(0,t.jsx)(D.Z.Title,{className:"countdown-number",style:{color:At.colorPrimary},children:Ut}),(0,t.jsx)(D.Z.Text,{strong:!0,className:"countdown-text",children:E.formatMessage({id:"vocal.ready"})})]}),_t&&(0,t.jsx)($.Z,{type:"warning",showIcon:!0,title:E.formatMessage({id:"vocal.ma-exercise.midi-warning"}),style:{marginBottom:16},closable:!0}),(0,t.jsxs)(m.Z,{orientation:"vertical",size:32,className:"player-content",children:[(0,t.jsx)("div",{className:"display-area",children:(0,t.jsx)(r.Z,{className:"display-card",variant:"borderless",children:(0,t.jsx)(D.Z.Text,{strong:!0,className:"display-tip",style:{color:At.colorTextSecondary},children:Lt?Me:E.formatMessage({id:"".concat(R,".tip.0")})})})}),(0,t.jsx)("div",{className:"visualization-area",children:Ht.length>0?Ht.map(function(S,h){var W=Ce===h;return(0,t.jsx)("div",{className:"note-circle ".concat(W?"note-circle-active":""),children:S},h)}):(0,t.jsx)(D.Z.Title,{level:4,type:"secondary",className:"visualization-ready",children:"READY TO TRAIN"})}),(0,t.jsxs)(m.Z,{orientation:"vertical",size:16,className:"controls-area",children:[(0,t.jsx)("div",{className:"current-note-name",style:{color:At.colorText},children:De||"-"}),(0,t.jsx)(o.ZP,{type:"primary",size:"large",shape:"round",icon:gt?(0,t.jsx)(C.Z,{}):(0,t.jsx)(z.Z,{}),onClick:Pe,style:{width:160},children:E.formatMessage({id:gt?"vocal.ma-exercise.resume":"vocal.ma-exercise.pause"})})]})]})]})})},T=v},47137:function(ct,F,n){n.d(F,{Z:function(){return $}});var i=n(79497),f=n(42874),P=n(38523),u=n(38945),s=n(52231),c=n(98108),g=n(40692),p=n(18475),C=n(83757),z=n(75271),x=n(55248),l=n(52676),Z=function(){for(var r=[],o=x.Di("A2").toMidi(),e=x.Di("C6").toMidi(),a=o;a<=e;a++)r.push(x.Di(a,"midi").toNote());return r},b=Z().map(function(m){return{label:m,value:m}}),D=function(r){var o=r.presets,e=r.localizationPrefix,a=r.customPresetPrefix,t=(0,g.useIntl)(),v=f.A.useFormInstance(),T=(0,i.L3)(t),K=a||e,d=function(j){o[j]&&(v==null||v.setFieldsValue(o[j]))};return(0,l.jsxs)("div",{className:"vocal-settings-container",children:[(0,l.jsxs)(p.Z,{title:t.formatMessage({id:"vocal.ma-exercise.settings.group.range"}),size:"small",className:"settings-card",children:[(0,l.jsx)(P.Z.Group,{name:"preset",radioType:"button",label:t.formatMessage({id:"vocal.ma-exercise.settings.preset"}),options:[{label:t.formatMessage({id:"".concat(K,".settings.preset.male")}),value:"male"},{label:t.formatMessage({id:"".concat(K,".settings.preset.female")}),value:"female"},{label:t.formatMessage({id:"vocal.ma-exercise.settings.preset.custom"}),value:"custom"}],fieldProps:{buttonStyle:"solid",size:"middle",onChange:function(j){return d(j.target.value)}}}),(0,l.jsx)(u.Z,{name:["preset"],children:function(j){var G=j.preset,R=G==="custom";return(0,l.jsxs)(C.Z,{direction:"horizontal",size:window.innerWidth<640?0:16,wrap:!0,style:{width:"100%",marginTop:16},children:[(0,l.jsx)(s.Z,{name:"startNote",label:t.formatMessage({id:"vocal.ma-exercise.settings.start-note"}),options:b,width:"sm",disabled:!R,rules:[{required:!0}]}),(0,l.jsx)(s.Z,{name:"endNote",label:t.formatMessage({id:"vocal.ma-exercise.settings.end-note"}),options:b,width:"sm",disabled:!R,rules:[{required:!0}]})]})}}),(0,l.jsx)(c.Z,{name:"loopCount",label:t.formatMessage({id:"vocal.ma-exercise.settings.loop-count"}),min:1,max:10,width:"md"})]}),(0,l.jsx)(p.Z,{title:t.formatMessage({id:"vocal.ma-exercise.settings.group.root"}),size:"small",className:"settings-card",children:(0,l.jsxs)(C.Z,{direction:"horizontal",size:16,wrap:!0,className:"settings-row",children:[(0,l.jsx)(c.Z,{name:"countdown",label:t.formatMessage({id:"vocal.ma-exercise.settings.countdown"}),width:"md",min:i.Qx,max:i.Zf,step:i.LB,fieldProps:{tooltip:{formatter:T}}}),(0,l.jsx)(c.Z,{name:"rootNoteWait",label:t.formatMessage({id:"vocal.ma-exercise.settings.root-wait"}),width:"md",min:i.Qx,max:i.Zf,step:i.LB,fieldProps:{tooltip:{formatter:T}}})]})}),(0,l.jsx)(p.Z,{title:t.formatMessage({id:"vocal.ma-exercise.settings.group.melody"}),size:"small",className:"settings-card",children:(0,l.jsxs)(C.Z,{direction:"horizontal",size:16,wrap:!0,className:"settings-row",children:[(0,l.jsx)(c.Z,{name:"firstNoteDuration",label:t.formatMessage({id:"vocal.ma-exercise.settings.first-note-duration"}),width:"md",min:i.Qx,max:i.Zf,step:i.LB,fieldProps:{tooltip:{formatter:T}}}),(0,l.jsx)(c.Z,{name:"intervalDuration",label:t.formatMessage({id:"vocal.ma-exercise.settings.interval-duration"}),width:"md",min:i.Qx,max:i.Zf,step:i.LB,fieldProps:{tooltip:{formatter:T}}}),(0,l.jsx)(c.Z,{name:"lastNoteDuration",label:t.formatMessage({id:"vocal.ma-exercise.settings.last-note-duration"}),width:"md",min:i.Qx,max:i.Zf,step:i.LB,fieldProps:{tooltip:{formatter:T}}}),(0,l.jsx)(c.Z,{name:"postMelodyWait",label:t.formatMessage({id:"vocal.ma-exercise.settings.post-melody-wait"}),width:"md",min:i.Qx,max:i.Zf,step:i.LB,fieldProps:{tooltip:{formatter:T}}})]})})]})},$=D},43525:function(ct,F,n){n.d(F,{GR:function(){return z},Jm:function(){return x},QM:function(){return l},Tp:function(){return c},_Y:function(){return C},bA:function(){return b},fy:function(){return p},lv:function(){return $},oB:function(){return D},pd:function(){return g},qt:function(){return Z}});var i=n(48305),f=n.n(i),P=n(31759),u=n.n(P),s=n(79497),c=function(r,o){var e=localStorage.getItem("".concat(s.f1).concat(r));if(!e&&r==="tones:training"){var a=localStorage.getItem("music-teaching-assistant-settings");if(a)return localStorage.setItem("".concat(s.f1).concat(r),a),JSON.parse(a)}if(!e)return o;try{var t=JSON.parse(e);return t&&u()(t)==="object"&&"name"in t&&"value"in t?t.value:t}catch(v){return console.error("Failed to parse settings for ".concat(r),v),o}},g=function(r,o,e){var a=localStorage.getItem("".concat(s.f1).concat(r)),t=e;if(!t&&a)try{var v=JSON.parse(a);v!=null&&v.name&&(t=v.name)}catch(K){}var T={name:t||r,value:o,updatedAt:Date.now()};localStorage.setItem("".concat(s.f1).concat(r),JSON.stringify(T))},p=function(r,o){var e=localStorage.getItem("".concat(s.CV).concat(r));if(!e)return o;try{var a=JSON.parse(e);return a&&u()(a)==="object"&&"name"in a&&"value"in a?a.value:a}catch(t){return console.error("Failed to parse stats for ".concat(r),t),o}},C=function(r,o,e){var a=localStorage.getItem("".concat(s.CV).concat(r)),t=e;if(!t&&a)try{var v=JSON.parse(a);v!=null&&v.name&&(t=v.name)}catch(K){}var T={name:t||r,value:o,updatedAt:Date.now()};localStorage.setItem("".concat(s.CV).concat(r),JSON.stringify(T))},z=function(){for(var r={},o=0;o<localStorage.length;o++){var e=localStorage.key(o);if(e!=null&&e.startsWith(s.f1)){var a=localStorage.getItem(e);if(a)try{r[e.replace(s.f1,"")]=JSON.parse(a)}catch(t){console.error("Failed to parse all settings for key ".concat(e),t)}}}return r},x=function(){for(var r={},o=0;o<localStorage.length;o++){var e=localStorage.key(o);if(e!=null&&e.startsWith(s.CV)){var a=localStorage.getItem(e);if(a)try{r[e.replace(s.CV,"")]=JSON.parse(a)}catch(t){console.error("Failed to parse all stats for key ".concat(e),t)}}}return r},l=function(r){if(r&&u()(r)==="object"){if(r.settings||r.stats){r.settings&&Object.entries(r.settings).forEach(function(o){var e=f()(o,2),a=e[0],t=e[1];t&&u()(t)==="object"&&"name"in t&&"value"in t?localStorage.setItem("".concat(s.f1).concat(a),JSON.stringify(t)):g(a,t,a)}),r.stats&&Object.entries(r.stats).forEach(function(o){var e=f()(o,2),a=e[0],t=e[1];t&&u()(t)==="object"&&"name"in t&&"value"in t?localStorage.setItem("".concat(s.CV).concat(a),JSON.stringify(t)):C(a,t,a)});return}Object.entries(r).forEach(function(o){var e=f()(o,2),a=e[0],t=e[1];t&&u()(t)==="object"&&"name"in t&&"value"in t?localStorage.setItem("".concat(s.f1).concat(a),JSON.stringify(t)):g(a,t,a)})}},Z=function(){for(var r=[],o=0;o<localStorage.length;o++){var e=localStorage.key(o);e!=null&&e.startsWith(s.f1)&&r.push(e)}r.forEach(function(a){return localStorage.removeItem(a)})},b=function(r){localStorage.removeItem("".concat(s.f1).concat(r))},D=function(){for(var r=[],o=0;o<localStorage.length;o++){var e=localStorage.key(o);e!=null&&e.startsWith(s.CV)&&r.push(e)}r.forEach(function(a){return localStorage.removeItem(a)})},$=function(r){localStorage.removeItem("".concat(s.CV).concat(r))}}}]);
