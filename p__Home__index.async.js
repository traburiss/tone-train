"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[371],{92557:function(Hg,_,n){n.r(_),n.d(_,{default:function(){return Qg}});var ig=n(26068),p=n.n(ig),cg=n(48305),T=n.n(cg),e=n(89504),B=n(40334),K=n(76582),N=n(99063),fg=n(4827),I=n(81485),Fg=n(39493),Y=n(29219),h=n(75271),g=n(52676),Cg=function(){return(0,g.jsxs)(Y.Z,{title:"\u57FA\u7840\u914D\u7F6E",className:"mb-3 sm:mb-6",children:[(0,g.jsx)(B.A.Group,{children:(0,g.jsx)(K.Z.Group,{name:"instrumentName",label:"\u97F3\u8272\u9009\u62E9",tooltip:"\u7528\u6237\u53EF\u4EE5\u9009\u62E9\u81EA\u5DF1\u4E60\u60EF\u7684\u97F3\u8272\u6765\u542C\u97F3\u540D\u64AD\u653E",radioType:"button",fieldProps:{buttonStyle:"solid"},options:e.qL})}),(0,g.jsxs)(B.A.Group,{children:[(0,g.jsx)(K.Z.Group,{name:"loopCountType",label:"\u5FAA\u73AF\u6B21\u6570",tooltip:"\u7528\u6237\u53EF\u4EE5\u9009\u62E9\u5FAA\u73AF\u6B21\u6570\uFF0C\u6216\u8005\u81EA\u5B9A\u4E49\u5FAA\u73AF\u6B21\u6570",radioType:"button",fieldProps:{buttonStyle:"solid"},options:e.qx}),(0,g.jsx)(N.Z,{name:["loopCountType"],children:function(r){var s=r.loopCountType;return s==="custom"&&(0,g.jsx)(fg.Z,{name:"loopCountCustom",label:" ",width:"xs",placeholder:"\u6B21\u6570",min:1,max:1e3,fieldProps:{precision:0}})}})]}),(0,g.jsx)(B.A.Group,{children:(0,g.jsx)(I.Z,{name:"random",label:"\u968F\u673A\u64AD\u653E",tooltip:"\u4E0D\u8981\u6309\u7167\u97F3\u9636\u987A\u5E8F\u64AD\u653E\u97F3\u9636"})}),(0,g.jsxs)(B.A.Group,{children:[(0,g.jsx)(I.Z,{name:"referenceNoteEnabled",label:"\u64AD\u653E\u57FA\u51C6",tooltip:"\u64AD\u653E\u97F3\u9636\u65F6\uFF0C\u4F1A\u5148\u64AD\u653E\u57FA\u51C6\u97F3\uFF0C\u518D\u64AD\u653E\u97F3\u9636\uFF0C\u4EE5\u964D\u4F4E\u96BE\u5EA6"}),(0,g.jsx)(N.Z,{name:["referenceNoteEnabled"],children:function(r){var s=r.referenceNoteEnabled;return s&&(0,g.jsx)(Fg.Z,{name:"referenceNote",label:" ",width:"xs",options:e.cS,placeholder:"\u9009\u62E9\u57FA\u51C6\u97F3"})}})]})]})},Ag=Cg,L=n(24871),mg=function(){return(0,g.jsxs)(Y.Z,{title:"\u64AD\u653E\u914D\u7F6E",className:"mb-3 sm:mb-6",children:[(0,g.jsxs)(B.A.Group,{title:"\u65F6\u95F4\u8BBE\u7F6E",children:[(0,g.jsx)(L.Z,{name:"toneDuration",label:"\u97F3\u9636\u65F6\u957F",width:"md",min:e.Qx,max:e.Zf,step:e.LB,fieldProps:{tooltip:{formatter:e.QZ}}}),(0,g.jsx)(L.Z,{name:"toneWait",label:"\u97F3\u9636\u64AD\u540E\u7B49\u5F85",width:"md",min:e.Qx,max:e.Zf,step:e.LB,fieldProps:{tooltip:{formatter:e.QZ}}})]}),(0,g.jsxs)(B.A.Group,{title:"\u97F3\u540D\u64AD\u62A5\u8BBE\u7F6E",children:[(0,g.jsx)(I.Z,{name:"ttsEnable",label:"\u8BED\u97F3\u62A5\u97F3\u540D",tooltip:"\u6BCF\u6B21\u7ED3\u675F\u540E\u64AD\u62A5\u97F3\u540D"}),(0,g.jsx)(N.Z,{name:["ttsEnable"],children:function(r){var s=r.ttsEnable;return s&&(0,g.jsx)(L.Z,{name:"ttsRate",label:"\u62A5\u97F3\u9636\u8BED\u901F",tooltip:"\u500D\u6570\u8D8A\u5927\u8D8A\u6162",width:"md",min:.5,max:4,step:.1,fieldProps:{tooltip:{formatter:function(C){return"".concat(C,"x \u65F6\u957F")}}}})}}),(0,g.jsx)(N.Z,{name:["ttsEnable"],children:function(r){var s=r.ttsEnable;return s&&(0,g.jsx)(L.Z,{name:"ttsWait",label:"\u62A5\u97F3\u540D\u540E\u7B49\u5F85",width:"md",min:e.Qx,max:e.Zf,step:e.LB,fieldProps:{tooltip:{formatter:e.QZ}}})}})]}),(0,g.jsx)(N.Z,{name:["ttsEnable"],children:function(r){var s=r.ttsEnable;return s&&(0,g.jsxs)(B.A.Group,{children:[(0,g.jsx)(I.Z,{name:"ttsSolfege",label:"\u989D\u5916\u62A5\u5531\u540D",tooltip:"\u62A5\u5B8C\u97F3\u540D\u540E\uFF0C\u8FFD\u52A0\u5531\u540D\uFF08\u5982\uFF1ADo\uFF09"}),(0,g.jsx)(N.Z,{name:["ttsSolfege"],children:function(C){var b=C.ttsSolfege;return b&&(0,g.jsx)(L.Z,{name:"ttsSolfegeWait",label:"\u5531\u540D\u95F4\u9694",width:"sm",min:e.Qx,max:e.Zf,step:e.LB,fieldProps:{tooltip:{formatter:e.QZ}}})}})]})}}),(0,g.jsx)(N.Z,{name:["ttsEnable"],children:function(r){var s=r.ttsEnable;return s&&(0,g.jsxs)(B.A.Group,{children:[(0,g.jsx)(I.Z,{name:"ttsNotation",label:"\u989D\u5916\u62A5\u7B80\u8C31",tooltip:"\u62A5\u5B8C\u97F3\u540D\u540E\uFF0C\u8FFD\u52A0\u7B80\u8C31\u8BB0\u53F7\uFF08\u5982\uFF1A1\uFF09"}),(0,g.jsx)(N.Z,{name:["ttsNotation"],children:function(C){var b=C.ttsNotation;return b&&(0,g.jsx)(L.Z,{name:"ttsNotationWait",label:"\u7B80\u8C31\u95F4\u9694",width:"sm",min:e.Qx,max:e.Zf,step:e.LB,fieldProps:{tooltip:{formatter:e.QZ}}})}})]})}})]})},Dg=mg,dg=n(15558),Gg=n.n(dg),Eg=n(93817),vg=n(1059),hg=n(72783),xg=n(36065),X=n(79662),M=n(95216),pg=function(){var o=xg.Z.useFormInstance(),r=(0,h.useState)([]),s=T()(r,2),m=s[0],C=s[1],b=function(c){C(function(l){return l.includes(c)?l.filter(function(D){return D!==c}):[].concat(Gg()(l),[c])})},v=function(c,l,D){var u=D.map(function(A){return"".concat(A).concat(c)});o.setFieldValue(["toneListGroup",c],l?u:[])},O=function(c,l){var D=e.aj.map(function(u){return"".concat(u).concat(c)});o.setFieldValue(["toneListGroup",c],l?D:[])},R=function(c,l){var D=l==="8Tone"?e.aj:e.An,u={};e.Dz.forEach(function(A){u[A]=c?D.map(function(a){return"".concat(a).concat(A)}):[]}),o.setFieldValue("toneListGroup",u)},Q=function(c){var l={};e.Dz.forEach(function(D){l[D]=c?e.aj.map(function(u){return"".concat(u).concat(D)}):[]}),o.setFieldValue("toneListGroup",l)};return(0,g.jsx)(N.Z,{name:["toneType","toneListGroup"],children:function(c){var l=c.toneType,D=c.toneListGroup;return(0,g.jsx)(Y.Z,{title:"\u97F3\u9636\u8BBE\u7F6E",className:"scale-card mb-6",extra:(0,g.jsxs)(X.Z,{size:12,wrap:!0,children:[(0,g.jsxs)(X.Z,{size:4,children:[(0,g.jsx)(M.ZP,{size:"small",onClick:function(){return R(!0,l)},children:"\u5168\u9009"}),l!=="8Tone"&&(0,g.jsx)(M.ZP,{size:"small",onClick:function(){return Q(!0)},children:"\u5168\u97F3"})]}),(0,g.jsx)("div",{className:"w-[1px] h-[14px] bg-[#e8e8e8]"}),(0,g.jsx)(K.Z.Group,{name:"toneType",noStyle:!0,radioType:"button",options:e.N7})]}),children:(0,g.jsx)("div",{className:"flex flex-col gap-2",children:e.Dz.map(function(u){var A=l==="8Tone"?e.aj:e.An,a=(D==null?void 0:D[u])||[],i=a.length===A.length,d=a.length===e.aj.length&&e.aj.every(function(G){return a.includes("".concat(G).concat(u))});return(0,g.jsxs)("div",{className:"octave-row p-2 sm:p-2.5 border border-[#f0f0f0] rounded-lg bg-[#fafafa] flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:[(0,g.jsxs)("div",{className:"flex items-center gap-2 shrink-0 w-full sm:w-auto",children:[(0,g.jsxs)("span",{className:"font-bold text-[14px] sm:text-[15px] text-[#1a1a1a] mr-1",children:["Oct ",u]}),(0,g.jsxs)(X.Z,{size:4,children:[(0,g.jsx)(M.ZP,{size:"small",type:i?"primary":"default",onClick:function(){return v(u,!i,A)},className:"text-[12px]",children:"\u5168\u9009"}),l!=="8Tone"&&(0,g.jsx)(M.ZP,{size:"small",type:d?"primary":"default",onClick:function(){return O(u,!d)},className:"text-[12px]",children:"\u5168\u97F3"})]}),(0,g.jsxs)("span",{className:"text-[11px] sm:text-[12px] color-[#888] ml-1 min-w-[20px]",children:["(",a.length,")"]}),(0,g.jsx)(M.ZP,{type:"text",size:"small",className:"sm:hidden ml-auto flex items-center gap-1 text-[#1890ff]",onClick:function(){return b(u)},children:m.includes(u)?(0,g.jsxs)(g.Fragment,{children:["\u6536\u8D77 ",(0,g.jsx)(vg.Z,{className:"text-[10px]"})]}):(0,g.jsxs)(g.Fragment,{children:["\u5C55\u5F00 ",(0,g.jsx)(hg.Z,{className:"text-[10px]"})]})})]}),(0,g.jsx)("div",{className:"hidden sm:block w-[1px] h-6 bg-[#e8e8e8]"}),(0,g.jsx)("div",{className:"".concat(m.includes(u)?"flex":"hidden sm:flex"," flex-wrap gap-1.5 flex-1 w-full"),children:(0,g.jsx)(Eg.Z.Group,{name:["toneListGroup",u],className:"touch-button-group",options:A.map(function(G){return{label:G,value:"".concat(G).concat(u)}})})})]},u)})})})}})},bg=pg,jg=n(90228),W=n.n(jg),Bg=n(87999),q=n.n(Bg),Sg={C:"Do","C#":"\u5347Do",D:"Re","D#":"\u5347Re",E:"Mi",F:"Fa","F#":"\u5347Fa",G:"Sol","G#":"\u5347Sol",A:"La","A#":"\u5347La",B:"Si"},Ng={C:"1","C#":"\u53471",D:"2","D#":"\u53472",E:"3",F:"4","F#":"\u53474",G:"5","G#":"\u53475",A:"6","A#":"\u53476",B:"7"},gg=function(o){var r=o.match(/^([A-G]#?)/);if(!r)return{solfege:"",number:""};var s=r[1];return{solfege:Sg[s]||"",number:Ng[s]||""}},w=n(55248),og={},yg={"bass-electric":{"A#1":"As1.ogg","A#2":"As2.ogg","A#3":"As3.ogg","A#4":"As4.ogg","C#1":"Cs1.ogg","C#2":"Cs2.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg",E1:"E1.ogg",E2:"E2.ogg",E3:"E3.ogg",E4:"E4.ogg",G1:"G1.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg"},bassoon:{A4:"A4.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg",E4:"E4.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg",A2:"A2.ogg",A3:"A3.ogg"},cello:{E3:"E3.ogg",E4:"E4.ogg",F2:"F2.ogg",F3:"F3.ogg",F4:"F4.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg","G#4":"Gs4.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg","A#2":"As2.ogg","A#3":"As3.ogg",B2:"B2.ogg",B3:"B3.ogg",B4:"B4.ogg",C2:"C2.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg",D2:"D2.ogg",D3:"D3.ogg",D4:"D4.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg",E2:"E2.ogg"},clarinet:{D4:"D4.ogg",D5:"D5.ogg",D6:"D6.ogg",F3:"F3.ogg",F4:"F4.ogg",F5:"F5.ogg","F#6":"Fs6.ogg","A#3":"As3.ogg","A#4":"As4.ogg","A#5":"As5.ogg",D3:"D3.ogg"},contrabass:{C2:"C2.ogg","C#3":"Cs3.ogg",D2:"D2.ogg",E2:"E2.ogg",E3:"E3.ogg","F#1":"Fs1.ogg","F#2":"Fs2.ogg",G1:"G1.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg",A2:"A2.ogg","A#1":"As1.ogg",B3:"B3.ogg"},flute:{A6:"A6.ogg",C4:"C4.ogg",C5:"C5.ogg",C6:"C6.ogg",C7:"C7.ogg",E4:"E4.ogg",E5:"E5.ogg",E6:"E6.ogg",A4:"A4.ogg",A5:"A5.ogg"},"french-horn":{D3:"D3.ogg",D5:"D5.ogg","D#2":"Ds2.ogg",F3:"F3.ogg",F5:"F5.ogg",G2:"G2.ogg",A1:"A1.ogg",A3:"A3.ogg",C2:"C2.ogg",C4:"C4.ogg"},"guitar-acoustic":{F4:"F4.ogg","F#2":"Fs2.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg","G#4":"Gs4.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg","A#2":"As2.ogg","A#3":"As3.ogg","A#4":"As4.ogg",B2:"B2.ogg",B3:"B3.ogg",B4:"B4.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg","C#5":"Cs5.ogg",D2:"D2.ogg",D3:"D3.ogg",D4:"D4.ogg",D5:"D5.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds3.ogg",E2:"E2.ogg",E3:"E3.ogg",E4:"E4.ogg",F2:"F2.ogg",F3:"F3.ogg"},"guitar-electric":{"D#3":"Ds3.ogg","D#4":"Ds4.ogg","D#5":"Ds5.ogg",E2:"E2.ogg","F#2":"Fs2.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg","F#5":"Fs5.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg",A5:"A5.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg",C6:"C6.ogg","C#2":"Cs2.ogg"},"guitar-nylon":{"F#2":"Fs2.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg","F#5":"Fs5.ogg",G3:"G3.ogg",G5:"G3.ogg","G#2":"Gs2.ogg","G#4":"Gs4.ogg","G#5":"Gs5.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg",A5:"A5.ogg","A#5":"As5.ogg",B1:"B1.ogg",B2:"B2.ogg",B3:"B3.ogg",B4:"B4.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg","C#5":"Cs5.ogg",D2:"D2.ogg",D3:"D3.ogg",D5:"D5.ogg","D#4":"Ds4.ogg",E2:"E2.ogg",E3:"E3.ogg",E4:"E4.ogg",E5:"E5.ogg"},harmonium:{C2:"C2.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg","C#2":"Cs2.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg","C#5":"Cs5.ogg",D2:"D2.ogg",D3:"D3.ogg",D4:"D4.ogg",D5:"D5.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg",E2:"E2.ogg",E3:"E3.ogg",E4:"E4.ogg",F2:"F2.ogg",F3:"F3.ogg",F4:"F4.ogg","F#2":"Fs2.ogg","F#3":"Fs3.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg","G#4":"Gs4.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg","A#2":"As2.ogg","A#3":"As3.ogg","A#4":"As4.ogg"},harp:{C5:"C5.ogg",D2:"D2.ogg",D4:"D4.ogg",D6:"D6.ogg",D7:"D7.ogg",E1:"E1.ogg",E3:"E3.ogg",E5:"E5.ogg",F2:"F2.ogg",F4:"F4.ogg",F6:"F6.ogg",F7:"F7.ogg",G1:"G1.ogg",G3:"G3.ogg",G5:"G5.ogg",A2:"A2.ogg",A4:"A4.ogg",A6:"A6.ogg",B1:"B1.ogg",B3:"B3.ogg",B5:"B5.ogg",B6:"B6.ogg",C3:"C3.ogg"},organ:{C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg",C6:"C6.ogg","D#1":"Ds1.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg","D#5":"Ds5.ogg","F#1":"Fs1.ogg","F#2":"Fs2.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg","F#5":"Fs5.ogg",A1:"A1.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg",A5:"A5.ogg",C1:"C1.ogg",C2:"C2.ogg"},piano:{A7:"A7.ogg",A1:"A1.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg",A5:"A5.ogg",A6:"A6.ogg","A#7":"As7.ogg","A#1":"As1.ogg","A#2":"As2.ogg","A#3":"As3.ogg","A#4":"As4.ogg","A#5":"As5.ogg","A#6":"As6.ogg",B7:"B7.ogg",B1:"B1.ogg",B2:"B2.ogg",B3:"B3.ogg",B4:"B4.ogg",B5:"B5.ogg",B6:"B6.ogg",C1:"C1.ogg",C2:"C2.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg",C6:"C6.ogg",C7:"C7.ogg","C#7":"Cs7.ogg","C#1":"Cs1.ogg","C#2":"Cs2.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg","C#5":"Cs5.ogg","C#6":"Cs6.ogg",D7:"D7.ogg",D1:"D1.ogg",D2:"D2.ogg",D3:"D3.ogg",D4:"D4.ogg",D5:"D5.ogg",D6:"D6.ogg","D#7":"Ds7.ogg","D#1":"Ds1.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg","D#5":"Ds5.ogg","D#6":"Ds6.ogg",E7:"E7.ogg",E1:"E1.ogg",E2:"E2.ogg",E3:"E3.ogg",E4:"E4.ogg",E5:"E5.ogg",E6:"E6.ogg",F7:"F7.ogg",F1:"F1.ogg",F2:"F2.ogg",F3:"F3.ogg",F4:"F4.ogg",F5:"F5.ogg",F6:"F6.ogg","F#7":"Fs7.ogg","F#1":"Fs1.ogg","F#2":"Fs2.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg","F#5":"Fs5.ogg","F#6":"Fs6.ogg",G7:"G7.ogg",G1:"G1.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg",G5:"G5.ogg",G6:"G6.ogg","G#7":"Gs7.ogg","G#1":"Gs1.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg","G#4":"Gs4.ogg","G#5":"Gs5.ogg","G#6":"Gs6.ogg"},saxophone:{"D#5":"Ds5.ogg",E3:"E3.ogg",E4:"E4.ogg",E5:"E5.ogg",F3:"F3.ogg",F4:"F4.ogg",F5:"F5.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg","F#5":"Fs5.ogg",G3:"G3.ogg",G4:"G4.ogg",G5:"G5.ogg","G#3":"Gs3.ogg","G#4":"Gs4.ogg","G#5":"Gs5.ogg",A4:"A4.ogg",A5:"A5.ogg","A#3":"As3.ogg","A#4":"As4.ogg",B3:"B3.ogg",B4:"B4.ogg",C4:"C4.ogg",C5:"C5.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg","C#5":"Cs5.ogg",D3:"D3.ogg",D4:"D4.ogg",D5:"D5.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg"},trombone:{"A#3":"As3.ogg",C3:"C3.ogg",C4:"C4.ogg","C#2":"Cs2.ogg","C#4":"Cs4.ogg",D3:"D3.ogg",D4:"D4.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg",F2:"F2.ogg",F3:"F3.ogg",F4:"F4.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg","A#1":"As1.ogg","A#2":"As2.ogg"},trumpet:{C6:"C6.ogg",D5:"D5.ogg","D#4":"Ds4.ogg",F3:"F3.ogg",F4:"F4.ogg",F5:"F5.ogg",G4:"G4.ogg",A3:"A3.ogg",A5:"A5.ogg","A#4":"As4.ogg",C4:"C4.ogg"},tuba:{"A#2":"As2.ogg","A#3":"As3.ogg",D3:"D3.ogg",D4:"D4.ogg","D#2":"Ds2.ogg",F1:"F1.ogg",F2:"F2.ogg",F3:"F3.ogg","A#1":"As1.ogg"},violin:{A3:"A3.ogg",A4:"A4.ogg",A5:"A5.ogg",A6:"A6.ogg",C4:"C4.ogg",C5:"C5.ogg",C6:"C6.ogg",C7:"C7.ogg",E4:"E4.ogg",E5:"E5.ogg",E6:"E6.ogg",G4:"G4.ogg",G5:"G5.ogg",G6:"G6.ogg"},xylophone:{C8:"C8.ogg",G4:"G4.ogg",G5:"G5.ogg",G6:"G6.ogg",G7:"G7.ogg",C5:"C5.ogg",C6:"C6.ogg",C7:"C7.ogg"}},Tg=function(){var P=q()(W()().mark(function o(r){var s,m,C;return W()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(s=yg[r],s!=null){v.next=3;break}throw new Error("no such instruments: ".concat(r));case 3:if(m=og[r],m==null){v.next=6;break}return v.abrupt("return",m);case 6:return C=new w.Z4({urls:s,release:1,baseUrl:"samples/".concat(r,"/")}).toDestination(),v.next=9,w.CL();case 9:return og[r]=C,v.abrupt("return",C);case 11:case"end":return v.stop()}},o)}));return function(r){return P.apply(this,arguments)}}(),Zg=n(53419),Pg=n(99430),eg=n(66931),Og=n(65257),Lg=n(98649),Wg={trainPlayInfo:"trainPlayInfo___N471F"},Rg=eg.Z.confirm,Z=null,kg=function(o){var r=(0,h.useState)(!0),s=T()(r,2),m=s[0],C=s[1],b=(0,h.useState)(!1),v=T()(b,2),O=v[0],R=v[1],Q=(0,h.useState)("..."),x=T()(Q,2),c=x[0],l=x[1],D=Og.ZP.useNotification(),u=T()(D,2),A=u[0],a=u[1],i=h.useRef(0),d=h.useRef(0),G=function(E){var S=new SpeechSynthesisUtterance(E),y=o.ttsRate||1;S.rate=1/y,window.speechSynthesis.speak(S)},ng=function(){var f=q()(W()().mark(function E(S,y){return W()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return console.info("playTone",S,y),Z!==null&&Z.triggerAttackRelease(S,y/1e3),k.abrupt("return",new Promise(function($){setTimeout($,y)}));case 3:case"end":return k.stop()}},E)}));return function(S,y){return f.apply(this,arguments)}}(),ag=h.useRef(o);ag.current=o;var rg=h.useMemo(function(){var f=(o.toneDuration||0)+(o.toneWait||0)+(o.ttsWait||0)+(o.referenceNoteEnabled?(o.toneDuration||0)+(o.toneWait||0):0),E=0;return o.ttsEnable&&(E+=1e3,o.ttsSolfege&&(E+=(o.ttsSolfegeWait||0)+1e3),o.ttsNotation&&(E+=(o.ttsNotationWait||0)+1e3)),Math.max(f+E,500)},[o.toneDuration,o.toneWait,o.ttsWait,o.referenceNoteEnabled,o.ttsEnable,o.ttsSolfege,o.ttsSolfegeWait,o.ttsNotation,o.ttsNotationWait]);(0,h.useEffect)(function(){if(m||!o.open){Z!==null&&Z.triggerRelease(w.zO());return}var f=!1,E=null,S=null,y=function(){var k=q()(W()().mark(function $(){var F,V,H,z,ug,U,lg,J;return W()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!f){t.next=2;break}return t.abrupt("return");case 2:if(F=ag.current,V=F.toneList.length,V!==0){t.next=6;break}return t.abrupt("return");case 6:if(H=0,F.random?H=Math.floor(Math.random()*V):H=i.current,z=F.toneList[H],l(z),F.random){t.next=20;break}if(i.current++,!(i.current>=V)){t.next=18;break}if(i.current=0,d.current++,!(Number(F.loopCount)>0&&d.current>=Number(F.loopCount))){t.next=18;break}return C(!0),t.abrupt("return");case 18:t.next=27;break;case 20:if(i.current++,!(i.current>=V)){t.next=27;break}if(i.current=0,d.current++,!(Number(F.loopCount)>0&&d.current>=Number(F.loopCount))){t.next=27;break}return C(!0),t.abrupt("return");case 27:if(!(F.referenceNoteEnabled&&F.referenceNote)){t.next=36;break}if(!f){t.next=30;break}return t.abrupt("return");case 30:return t.next=32,ng(F.referenceNote,F.toneDuration);case 32:if(!f){t.next=34;break}return t.abrupt("return");case 34:return t.next=36,new Promise(function(j){S=setTimeout(j,F.toneWait)});case 36:if(!f){t.next=38;break}return t.abrupt("return");case 38:return t.next=40,ng(z,F.toneDuration);case 40:if(!f){t.next=42;break}return t.abrupt("return");case 42:if(!f){t.next=44;break}return t.abrupt("return");case 44:if(!F.ttsEnable){t.next=64;break}return t.next=47,new Promise(function(j){E=setTimeout(j,F.toneWait||200)});case 47:if(!f){t.next=49;break}return t.abrupt("return");case 49:if(G(z),!F.ttsSolfege){t.next=57;break}return t.next=53,new Promise(function(j){E=setTimeout(j,F.ttsSolfegeWait||500)});case 53:if(!f){t.next=55;break}return t.abrupt("return");case 55:ug=gg(z),U=ug.solfege,U&&(G(U),l(function(j){return"".concat(j," ").concat(U)}));case 57:if(!F.ttsNotation){t.next=64;break}return t.next=60,new Promise(function(j){E=setTimeout(j,F.ttsNotationWait||500)});case 60:if(!f){t.next=62;break}return t.abrupt("return");case 62:lg=gg(z),J=lg.number,J&&(G(J),l(function(j){return"".concat(j," ").concat(J)}));case 64:case"end":return t.stop()}},$)}));return function(){return k.apply(this,arguments)}}();y();var sg=setInterval(y,rg);return function(){f=!0,clearInterval(sg),E&&clearTimeout(E),S&&clearTimeout(S),Z!==null&&Z.triggerRelease(w.zO())}},[m,o.open,rg]),(0,h.useEffect)(function(){console.info("open 1 ",o),o.open&&(console.info("open 2 "),i.current=0,d.current=0,l("..."),R(!0),console.info("open 3 load instrumentName ".concat(o.instrumentName)),Tg(o.instrumentName).then(function(f){console.info("load instrumentName ".concat(o.instrumentName," success")),Z=f}).catch(function(f){console.info("load instrumentName ".concat(o.instrumentName," error"),f),A.error({message:"\u5F02\u5E38",description:"\u65E0\u6CD5\u52A0\u8F7D\u97F3\u8272\uFF0C\u53EA\u80FD\u64AD\u653EMIDI\u97F3"}),Z=new w.WV().toDestination()}).finally(function(){R(!1),C(!1)}))},[o.open]);var Vg=function(){C(!m)},$g=function(){C(!0),Rg({title:"\u786E\u8BA4\u505C\u6B62",icon:(0,g.jsx)(Zg.Z,{}),content:"\u786E\u8BA4\u505C\u6B62\u8BAD\u7EC3\u5417\uFF1F",okText:"\u786E\u8BA4\u5173\u95ED",cancelText:"\u6211\u70B9\u9519\u4E86",onOk:function(){o.onCancel()},onCancel:function(){C(!1)}})};return(0,g.jsxs)(g.Fragment,{children:[a,(0,g.jsx)(eg.Z,{open:o.open,destroyOnClose:!0,width:"80%",height:"80%",maskClosable:!1,okText:m?"\u6062\u590D\u8BAD\u7EC3":"\u6682\u505C\u8BAD\u7EC3",onOk:Vg,cancelText:"\u505C\u6B62\u8BAD\u7EC3",onCancel:$g,loading:O,title:O?"\u52A0\u8F7D\u97F3\u8272\u4E2D":"\u8BAD\u7EC3",children:(0,g.jsx)(Lg.ZP,{className:Wg.trainPlayInfo,title:(0,g.jsx)("div",{className:"text-2xl sm:text-4xl",children:c}),subTitle:"\u5F53\u524D\u7684\u97F3\u662F",icon:(0,g.jsx)(Pg.Z,{})})})]})},zg=kg,Ig=n(82796),Mg=n(90834),tg="tone-train-settings",wg=function(){var o=(0,h.useState)(e.sO),r=T()(o,2),s=r[0],m=r[1],C=(0,h.useState)(!1),b=T()(C,2),v=b[0],O=b[1],R=B.A.useForm(),Q=T()(R,1),x=Q[0],c=function(a){return Object.values(a||{}).flat().filter(Boolean)},l=function(a){var i={};return e.Dz.forEach(function(d){i[d]=a.filter(function(G){return G.endsWith(String(d))})}),i};(0,h.useEffect)(function(){var A=localStorage.getItem(tg);if(A)try{var a=JSON.parse(A);a.toneList&&!a.toneListGroup&&(a.toneListGroup=l(a.toneList));var i=a.loopCountType||String(a.loopCount||0),d=a.loopCountCustom||a.loopCount||10;x.setFieldsValue(p()(p()({},a),{},{loopCountType:i,loopCountCustom:i==="custom"?d:10})),m(p()(p()(p()({},e.sO),a),{},{loopCount:i==="custom"?d:parseInt(i,10),toneList:c(a.toneListGroup)}))}catch(G){console.error("Failed to load settings",G)}},[x]);var D=function(a,i){localStorage.setItem(tg,JSON.stringify(i))},u=function(a){var i=c(a.toneListGroup),d=a.loopCountType==="custom"?a.loopCountCustom:parseInt(a.loopCountType,10),G=p()(p()(p()({},e.sO),a),{},{toneList:i,loopCount:isNaN(d)?0:d});m(G),O(!0)};return(0,g.jsxs)(Ig._z,{ghost:!0,className:"px-1 sm:px-4",children:[(0,g.jsxs)(B.A,{form:x,size:"large",initialValues:p()(p()({},e.sO),{},{loopCountType:String(e.sO.loopCount),loopCountCustom:10,toneListGroup:l(e.sO.toneList)}),onValuesChange:D,onFinish:u,layout:"horizontal",submitter:{searchConfig:{resetText:"\u91CD\u7F6E",submitText:"\u5F00\u59CB\u8BAD\u7EC3"},render:function(a,i){return(0,g.jsx)(Mg.S,{children:i})}},children:[(0,g.jsx)(bg,{}),(0,g.jsx)(Ag,{}),(0,g.jsx)(Dg,{})]}),(0,g.jsx)(zg,p()({open:v,onCancel:function(){return O(!1)}},s))]})},Qg=wg}}]);
