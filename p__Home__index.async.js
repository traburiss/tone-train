"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[371],{3017:function(Lg,Y,e){e.r(Y),e.d(Y,{default:function(){return Ng}});var tg=e(26068),x=e.n(tg),sg=e(48305),B=e.n(sg),n=e(8644),ag=e(15558),rg=e.n(ag),W=e(39494),Q=e(19048),ug=e(95768),lg=e(5019),ig=e(62538),cg=e(15892),H=e(3862),J=e(83884),O=e(13),d=e(75271),g=e(52676),Cg=function(){var t=cg.Z.useFormInstance(),v=(0,d.useState)([]),h=B()(v,2),m=h[0],G=h[1],y=function(i){G(function(u){return u.includes(i)?u.filter(function(c){return c!==i}):[].concat(rg()(u),[i])})},F=function(i,u,c){var a=c.map(function(l){return"".concat(l).concat(i)});t.setFieldValue(["toneListGroup",i],u?a:[])},b=function(i,u){var c=n.aj.map(function(a){return"".concat(a).concat(i)});t.setFieldValue(["toneListGroup",i],u?c:[])},Z=function(i,u){var c=u==="8Tone"?n.aj:n.An,a={};n.Dz.forEach(function(l){a[l]=i?c.map(function(o){return"".concat(o).concat(l)}):[]}),t.setFieldValue("toneListGroup",a)},I=function(i){var u={};n.Dz.forEach(function(c){u[c]=i?n.aj.map(function(a){return"".concat(a).concat(c)}):[]}),t.setFieldValue("toneListGroup",u)};return(0,g.jsx)(W.Z,{name:["toneType","toneListGroup"],children:function(i){var u=i.toneType,c=i.toneListGroup;return(0,g.jsx)(H.Z,{title:"\u97F3\u9636\u8BBE\u7F6E",className:"scale-card mb-6",extra:(0,g.jsxs)(J.Z,{size:12,wrap:!0,children:[(0,g.jsxs)(J.Z,{size:4,children:[(0,g.jsx)(O.ZP,{size:"small",onClick:function(){return Z(!0,u)},children:"\u5168\u9009"}),u!=="8Tone"&&(0,g.jsx)(O.ZP,{size:"small",onClick:function(){return I(!0)},children:"\u5168\u97F3"})]}),(0,g.jsx)("div",{className:"w-[1px] h-[14px] bg-[#e8e8e8]"}),(0,g.jsx)(Q.Z.Group,{name:"toneType",noStyle:!0,radioType:"button",options:n.N7})]}),children:(0,g.jsx)("div",{className:"flex flex-col gap-2",children:n.Dz.map(function(a){var l=u==="8Tone"?n.aj:n.An,o=(c==null?void 0:c[a])||[],s=o.length===l.length,f=o.length===n.aj.length&&n.aj.every(function(D){return o.includes("".concat(D).concat(a))});return(0,g.jsxs)("div",{className:"octave-row p-2 sm:p-2.5 border border-[#f0f0f0] rounded-lg bg-[#fafafa] flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:[(0,g.jsxs)("div",{className:"flex items-center gap-2 shrink-0 w-full sm:w-auto",children:[(0,g.jsxs)("span",{className:"font-bold text-[14px] sm:text-[15px] text-[#1a1a1a] mr-1",children:["Oct ",a]}),(0,g.jsxs)(J.Z,{size:4,children:[(0,g.jsx)(O.ZP,{size:"small",type:s?"primary":"default",onClick:function(){return F(a,!s,l)},className:"text-[12px]",children:"\u5168\u9009"}),u!=="8Tone"&&(0,g.jsx)(O.ZP,{size:"small",type:f?"primary":"default",onClick:function(){return b(a,!f)},className:"text-[12px]",children:"\u5168\u97F3"})]}),(0,g.jsxs)("span",{className:"text-[11px] sm:text-[12px] color-[#888] ml-1 min-w-[20px]",children:["(",o.length,")"]}),(0,g.jsx)(O.ZP,{type:"text",size:"small",className:"sm:hidden ml-auto flex items-center gap-1 text-[#1890ff]",onClick:function(){return y(a)},children:m.includes(a)?(0,g.jsxs)(g.Fragment,{children:["\u6536\u8D77 ",(0,g.jsx)(lg.Z,{className:"text-[10px]"})]}):(0,g.jsxs)(g.Fragment,{children:["\u5C55\u5F00 ",(0,g.jsx)(ig.Z,{className:"text-[10px]"})]})})]}),(0,g.jsx)("div",{className:"hidden sm:block w-[1px] h-6 bg-[#e8e8e8]"}),(0,g.jsx)("div",{className:"".concat(m.includes(a)?"flex":"hidden sm:flex"," flex-wrap gap-1.5 flex-1 w-full"),children:(0,g.jsx)(ug.Z.Group,{name:["toneListGroup",a],className:"touch-button-group",options:l.map(function(D){return{label:D,value:"".concat(D).concat(a)}})})})]},a)})})})}})},fg=Cg,Ag=e(90228),N=e.n(Ag),mg=e(87999),U=e.n(mg),L=e(55248),X={},Fg={"bass-electric":{"A#1":"As1.ogg","A#2":"As2.ogg","A#3":"As3.ogg","A#4":"As4.ogg","C#1":"Cs1.ogg","C#2":"Cs2.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg",E1:"E1.ogg",E2:"E2.ogg",E3:"E3.ogg",E4:"E4.ogg",G1:"G1.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg"},bassoon:{A4:"A4.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg",E4:"E4.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg",A2:"A2.ogg",A3:"A3.ogg"},cello:{E3:"E3.ogg",E4:"E4.ogg",F2:"F2.ogg",F3:"F3.ogg",F4:"F4.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg","G#4":"Gs4.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg","A#2":"As2.ogg","A#3":"As3.ogg",B2:"B2.ogg",B3:"B3.ogg",B4:"B4.ogg",C2:"C2.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg",D2:"D2.ogg",D3:"D3.ogg",D4:"D4.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg",E2:"E2.ogg"},clarinet:{D4:"D4.ogg",D5:"D5.ogg",D6:"D6.ogg",F3:"F3.ogg",F4:"F4.ogg",F5:"F5.ogg","F#6":"Fs6.ogg","A#3":"As3.ogg","A#4":"As4.ogg","A#5":"As5.ogg",D3:"D3.ogg"},contrabass:{C2:"C2.ogg","C#3":"Cs3.ogg",D2:"D2.ogg",E2:"E2.ogg",E3:"E3.ogg","F#1":"Fs1.ogg","F#2":"Fs2.ogg",G1:"G1.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg",A2:"A2.ogg","A#1":"As1.ogg",B3:"B3.ogg"},flute:{A6:"A6.ogg",C4:"C4.ogg",C5:"C5.ogg",C6:"C6.ogg",C7:"C7.ogg",E4:"E4.ogg",E5:"E5.ogg",E6:"E6.ogg",A4:"A4.ogg",A5:"A5.ogg"},"french-horn":{D3:"D3.ogg",D5:"D5.ogg","D#2":"Ds2.ogg",F3:"F3.ogg",F5:"F5.ogg",G2:"G2.ogg",A1:"A1.ogg",A3:"A3.ogg",C2:"C2.ogg",C4:"C4.ogg"},"guitar-acoustic":{F4:"F4.ogg","F#2":"Fs2.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg","G#4":"Gs4.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg","A#2":"As2.ogg","A#3":"As3.ogg","A#4":"As4.ogg",B2:"B2.ogg",B3:"B3.ogg",B4:"B4.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg","C#5":"Cs5.ogg",D2:"D2.ogg",D3:"D3.ogg",D4:"D4.ogg",D5:"D5.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds3.ogg",E2:"E2.ogg",E3:"E3.ogg",E4:"E4.ogg",F2:"F2.ogg",F3:"F3.ogg"},"guitar-electric":{"D#3":"Ds3.ogg","D#4":"Ds4.ogg","D#5":"Ds5.ogg",E2:"E2.ogg","F#2":"Fs2.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg","F#5":"Fs5.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg",A5:"A5.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg",C6:"C6.ogg","C#2":"Cs2.ogg"},"guitar-nylon":{"F#2":"Fs2.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg","F#5":"Fs5.ogg",G3:"G3.ogg",G5:"G3.ogg","G#2":"Gs2.ogg","G#4":"Gs4.ogg","G#5":"Gs5.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg",A5:"A5.ogg","A#5":"As5.ogg",B1:"B1.ogg",B2:"B2.ogg",B3:"B3.ogg",B4:"B4.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg","C#5":"Cs5.ogg",D2:"D2.ogg",D3:"D3.ogg",D5:"D5.ogg","D#4":"Ds4.ogg",E2:"E2.ogg",E3:"E3.ogg",E4:"E4.ogg",E5:"E5.ogg"},harmonium:{C2:"C2.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg","C#2":"Cs2.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg","C#5":"Cs5.ogg",D2:"D2.ogg",D3:"D3.ogg",D4:"D4.ogg",D5:"D5.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg",E2:"E2.ogg",E3:"E3.ogg",E4:"E4.ogg",F2:"F2.ogg",F3:"F3.ogg",F4:"F4.ogg","F#2":"Fs2.ogg","F#3":"Fs3.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg","G#4":"Gs4.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg","A#2":"As2.ogg","A#3":"As3.ogg","A#4":"As4.ogg"},harp:{C5:"C5.ogg",D2:"D2.ogg",D4:"D4.ogg",D6:"D6.ogg",D7:"D7.ogg",E1:"E1.ogg",E3:"E3.ogg",E5:"E5.ogg",F2:"F2.ogg",F4:"F4.ogg",F6:"F6.ogg",F7:"F7.ogg",G1:"G1.ogg",G3:"G3.ogg",G5:"G5.ogg",A2:"A2.ogg",A4:"A4.ogg",A6:"A6.ogg",B1:"B1.ogg",B3:"B3.ogg",B5:"B5.ogg",B6:"B6.ogg",C3:"C3.ogg"},organ:{C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg",C6:"C6.ogg","D#1":"Ds1.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg","D#5":"Ds5.ogg","F#1":"Fs1.ogg","F#2":"Fs2.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg","F#5":"Fs5.ogg",A1:"A1.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg",A5:"A5.ogg",C1:"C1.ogg",C2:"C2.ogg"},piano:{A7:"A7.ogg",A1:"A1.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg",A5:"A5.ogg",A6:"A6.ogg","A#7":"As7.ogg","A#1":"As1.ogg","A#2":"As2.ogg","A#3":"As3.ogg","A#4":"As4.ogg","A#5":"As5.ogg","A#6":"As6.ogg",B7:"B7.ogg",B1:"B1.ogg",B2:"B2.ogg",B3:"B3.ogg",B4:"B4.ogg",B5:"B5.ogg",B6:"B6.ogg",C1:"C1.ogg",C2:"C2.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg",C6:"C6.ogg",C7:"C7.ogg","C#7":"Cs7.ogg","C#1":"Cs1.ogg","C#2":"Cs2.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg","C#5":"Cs5.ogg","C#6":"Cs6.ogg",D7:"D7.ogg",D1:"D1.ogg",D2:"D2.ogg",D3:"D3.ogg",D4:"D4.ogg",D5:"D5.ogg",D6:"D6.ogg","D#7":"Ds7.ogg","D#1":"Ds1.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg","D#5":"Ds5.ogg","D#6":"Ds6.ogg",E7:"E7.ogg",E1:"E1.ogg",E2:"E2.ogg",E3:"E3.ogg",E4:"E4.ogg",E5:"E5.ogg",E6:"E6.ogg",F7:"F7.ogg",F1:"F1.ogg",F2:"F2.ogg",F3:"F3.ogg",F4:"F4.ogg",F5:"F5.ogg",F6:"F6.ogg","F#7":"Fs7.ogg","F#1":"Fs1.ogg","F#2":"Fs2.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg","F#5":"Fs5.ogg","F#6":"Fs6.ogg",G7:"G7.ogg",G1:"G1.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg",G5:"G5.ogg",G6:"G6.ogg","G#7":"Gs7.ogg","G#1":"Gs1.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg","G#4":"Gs4.ogg","G#5":"Gs5.ogg","G#6":"Gs6.ogg"},saxophone:{"D#5":"Ds5.ogg",E3:"E3.ogg",E4:"E4.ogg",E5:"E5.ogg",F3:"F3.ogg",F4:"F4.ogg",F5:"F5.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg","F#5":"Fs5.ogg",G3:"G3.ogg",G4:"G4.ogg",G5:"G5.ogg","G#3":"Gs3.ogg","G#4":"Gs4.ogg","G#5":"Gs5.ogg",A4:"A4.ogg",A5:"A5.ogg","A#3":"As3.ogg","A#4":"As4.ogg",B3:"B3.ogg",B4:"B4.ogg",C4:"C4.ogg",C5:"C5.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg","C#5":"Cs5.ogg",D3:"D3.ogg",D4:"D4.ogg",D5:"D5.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg"},trombone:{"A#3":"As3.ogg",C3:"C3.ogg",C4:"C4.ogg","C#2":"Cs2.ogg","C#4":"Cs4.ogg",D3:"D3.ogg",D4:"D4.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg",F2:"F2.ogg",F3:"F3.ogg",F4:"F4.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg","A#1":"As1.ogg","A#2":"As2.ogg"},trumpet:{C6:"C6.ogg",D5:"D5.ogg","D#4":"Ds4.ogg",F3:"F3.ogg",F4:"F4.ogg",F5:"F5.ogg",G4:"G4.ogg",A3:"A3.ogg",A5:"A5.ogg","A#4":"As4.ogg",C4:"C4.ogg"},tuba:{"A#2":"As2.ogg","A#3":"As3.ogg",D3:"D3.ogg",D4:"D4.ogg","D#2":"Ds2.ogg",F1:"F1.ogg",F2:"F2.ogg",F3:"F3.ogg","A#1":"As1.ogg"},violin:{A3:"A3.ogg",A4:"A4.ogg",A5:"A5.ogg",A6:"A6.ogg",C4:"C4.ogg",C5:"C5.ogg",C6:"C6.ogg",C7:"C7.ogg",E4:"E4.ogg",E5:"E5.ogg",E6:"E6.ogg",G4:"G4.ogg",G5:"G5.ogg",G6:"G6.ogg"},xylophone:{C8:"C8.ogg",G4:"G4.ogg",G5:"G5.ogg",G6:"G6.ogg",G7:"G7.ogg",C5:"C5.ogg",C6:"C6.ogg",C7:"C7.ogg"}},Dg=function(){var V=U()(N()().mark(function t(v){var h,m,G;return N()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(h=Fg[v],h!=null){F.next=3;break}throw new Error("no such instruments: ".concat(v));case 3:if(m=X[v],m==null){F.next=6;break}return F.abrupt("return",m);case 6:return G=new L.Z4({urls:h,release:1,baseUrl:"/samples/".concat(v,"/")}).toDestination(),F.next=9,L.CL();case 9:return X[v]=G,F.abrupt("return",G);case 11:case"end":return F.stop()}},t)}));return function(v){return V.apply(this,arguments)}}(),Gg=e(47866),dg=e(84983),q=e(84215),vg=e(83722),hg=e(76143),Eg={trainPlayInfo:"trainPlayInfo___N471F"},xg=q.Z.confirm,S=null,pg=function(t){var v=(0,d.useState)(!0),h=B()(v,2),m=h[0],G=h[1],y=(0,d.useState)(!1),F=B()(y,2),b=F[0],Z=F[1],I=(0,d.useState)("..."),E=B()(I,2),i=E[0],u=E[1],c=vg.ZP.useNotification(),a=B()(c,2),l=a[0],o=a[1],s=d.useRef(0),f=d.useRef(0),D=function(p){var j=new SpeechSynthesisUtterance(p);window.speechSynthesis.speak(j)},gg=function(){var C=U()(N()().mark(function p(j,T){return N()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return console.info("playTone",j,T),S!==null&&S.triggerAttackRelease(j,T/1e3),P.abrupt("return",new Promise(function(w){setTimeout(w,T)}));case 3:case"end":return P.stop()}},p)}));return function(j,T){return C.apply(this,arguments)}}(),og=d.useRef(t);og.current=t;var eg=d.useMemo(function(){var C=(t.toneDuration||0)+(t.toneWait||0)+(t.ttsWait||0)+(t.referenceNoteEnabled?(t.toneDuration||0)+(t.toneWait||0):0);return Math.max(C,500)},[t.toneDuration,t.toneWait,t.ttsWait,t.referenceNoteEnabled]);(0,d.useEffect)(function(){if(m||!t.open){S!==null&&S.triggerRelease(L.zO());return}var C=!1,p=null,j=null,T=function(){var P=U()(N()().mark(function w(){var A,R,k,$;return N()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!C){r.next=2;break}return r.abrupt("return");case 2:if(A=og.current,R=A.toneList.length,R!==0){r.next=6;break}return r.abrupt("return");case 6:if(k=0,A.random?k=Math.floor(Math.random()*R):k=s.current,$=A.toneList[k],u($),A.random){r.next=20;break}if(s.current++,!(s.current>=R)){r.next=18;break}if(s.current=0,f.current++,!(Number(A.loopCount)>0&&f.current>=Number(A.loopCount))){r.next=18;break}return G(!0),r.abrupt("return");case 18:r.next=27;break;case 20:if(s.current++,!(s.current>=R)){r.next=27;break}if(s.current=0,f.current++,!(Number(A.loopCount)>0&&f.current>=Number(A.loopCount))){r.next=27;break}return G(!0),r.abrupt("return");case 27:if(!(A.referenceNoteEnabled&&A.referenceNote)){r.next=36;break}if(!C){r.next=30;break}return r.abrupt("return");case 30:return r.next=32,gg(A.referenceNote,A.toneDuration);case 32:if(!C){r.next=34;break}return r.abrupt("return");case 34:return r.next=36,new Promise(function(Og){j=setTimeout(Og,A.toneWait)});case 36:if(!C){r.next=38;break}return r.abrupt("return");case 38:return r.next=40,gg($,A.toneDuration);case 40:if(!C){r.next=42;break}return r.abrupt("return");case 42:A.ttsEnable&&(p=setTimeout(function(){C||D($)},A.toneWait||200));case 43:case"end":return r.stop()}},w)}));return function(){return P.apply(this,arguments)}}();T();var ng=setInterval(T,eg);return function(){C=!0,clearInterval(ng),p&&clearTimeout(p),j&&clearTimeout(j),S!==null&&S.triggerRelease(L.zO())}},[m,t.open,eg]),(0,d.useEffect)(function(){console.info("open 1 ",t),t.open&&(console.info("open 2 "),s.current=0,f.current=0,u("..."),Z(!0),console.info("open 3 load instrumentName ".concat(t.instrumentName)),Dg(t.instrumentName).then(function(C){console.info("load instrumentName ".concat(t.instrumentName," success")),S=C}).catch(function(C){console.info("load instrumentName ".concat(t.instrumentName," error"),C),l.error({message:"\u5F02\u5E38",description:"\u65E0\u6CD5\u52A0\u8F7D\u97F3\u8272\uFF0C\u53EA\u80FD\u64AD\u653EMIDI\u97F3"}),S=new L.WV().toDestination()}).finally(function(){Z(!1),G(!1)}))},[t.open]);var Zg=function(){G(!m)},Pg=function(){G(!0),xg({title:"\u786E\u8BA4\u505C\u6B62",icon:(0,g.jsx)(Gg.Z,{}),content:"\u786E\u8BA4\u505C\u6B62\u8BAD\u7EC3\u5417\uFF1F",okText:"\u786E\u8BA4\u5173\u95ED",cancelText:"\u6211\u70B9\u9519\u4E86",onOk:function(){t.onCancel()},onCancel:function(){G(!1)}})};return(0,g.jsxs)(g.Fragment,{children:[o,(0,g.jsx)(q.Z,{open:t.open,destroyOnClose:!0,width:"80%",height:"80%",maskClosable:!1,okText:m?"\u6062\u590D\u8BAD\u7EC3":"\u6682\u505C\u8BAD\u7EC3",onOk:Zg,cancelText:"\u505C\u6B62\u8BAD\u7EC3",onCancel:Pg,loading:b,title:b?"\u52A0\u8F7D\u97F3\u8272\u4E2D":"\u8BAD\u7EC3",children:(0,g.jsx)(hg.ZP,{className:Eg.trainPlayInfo,title:(0,g.jsx)("div",{className:"text-2xl sm:text-4xl",children:i}),subTitle:"\u5F53\u524D\u7684\u97F3\u662F",icon:(0,g.jsx)(dg.Z,{})})})]})},jg=pg,z=e(33541),Bg=e(96035),Sg=e(45018),yg=e(7870),M=e(62922),bg=e(31385),K=e(9249),_="tone-train-settings",Tg=function(){var t=(0,d.useState)(n.sO),v=B()(t,2),h=v[0],m=v[1],G=(0,d.useState)(!1),y=B()(G,2),F=y[0],b=y[1],Z=z.A.useForm(),I=B()(Z,1),E=I[0],i=function(o){return Object.values(o||{}).flat().filter(Boolean)},u=function(o){var s={};return n.Dz.forEach(function(f){s[f]=o.filter(function(D){return D.endsWith(String(f))})}),s};(0,d.useEffect)(function(){var l=localStorage.getItem(_);if(l)try{var o=JSON.parse(l);o.toneList&&!o.toneListGroup&&(o.toneListGroup=u(o.toneList));var s=o.loopCountType||String(o.loopCount||0),f=o.loopCountCustom||o.loopCount||10;E.setFieldsValue(x()(x()({},o),{},{loopCountType:s,loopCountCustom:s==="custom"?f:10})),m(x()(x()(x()({},n.sO),o),{},{loopCount:s==="custom"?f:parseInt(s,10),toneList:i(o.toneListGroup)}))}catch(D){console.error("Failed to load settings",D)}},[E]);var c=function(o,s){localStorage.setItem(_,JSON.stringify(s))},a=function(o){var s=i(o.toneListGroup),f=o.loopCountType==="custom"?o.loopCountCustom:parseInt(o.loopCountType,10),D=x()(x()(x()({},n.sO),o),{},{toneList:s,loopCount:isNaN(f)?0:f});m(D),b(!0)};return(0,g.jsxs)(Bg._z,{ghost:!0,className:"px-1 sm:px-4",children:[(0,g.jsxs)(z.A,{form:E,size:"large",initialValues:x()(x()({},n.sO),{},{loopCountType:String(n.sO.loopCount),loopCountCustom:10,toneListGroup:u(n.sO.toneList)}),onValuesChange:c,onFinish:a,layout:"horizontal",submitter:{searchConfig:{resetText:"\u91CD\u7F6E",submitText:"\u5F00\u59CB\u8BAD\u7EC3"},render:function(o,s){return(0,g.jsx)(Sg.S,{children:s})}},children:[(0,g.jsx)(fg,{}),(0,g.jsxs)(H.Z,{title:"\u57FA\u7840\u914D\u7F6E",className:"mb-3 sm:mb-6",children:[(0,g.jsxs)(z.A.Group,{size:8,children:[(0,g.jsx)(Q.Z.Group,{name:"instrumentName",label:"\u97F3\u8272",radioType:"button",options:n.qL}),(0,g.jsx)(Q.Z.Group,{name:"loopCountType",label:"\u5FAA\u73AF\u6B21\u6570",radioType:"button",options:n.qx}),(0,g.jsx)(W.Z,{name:["loopCountType"],children:function(o){var s=o.loopCountType;return s==="custom"&&(0,g.jsx)(yg.Z,{name:"loopCountCustom",label:"\u81EA\u5B9A\u4E49\u6B21\u6570",width:"xs",min:1,max:1e3,fieldProps:{precision:0}})}})]}),(0,g.jsxs)(z.A.Group,{size:8,children:[(0,g.jsx)(M.Z,{name:"ttsEnable",label:"\u8BED\u97F3\u62A5\u53F7"}),(0,g.jsx)(M.Z,{name:"random",label:"\u968F\u673A\u64AD\u653E"}),(0,g.jsx)(M.Z,{name:"referenceNoteEnabled",label:"\u64AD\u653E\u5BF9\u6BD4\u57FA\u51C6\u97F3"}),(0,g.jsx)(W.Z,{name:["referenceNoteEnabled"],children:function(o){var s=o.referenceNoteEnabled;return s&&(0,g.jsx)(bg.Z,{name:"referenceNote",label:"\u57FA\u51C6\u97F3",width:"xs",options:n.cS})}}),(0,g.jsx)(M.Z,{name:"showAdvanced",label:"\u663E\u793A\u9AD8\u7EA7\u8BBE\u7F6E"})]})]}),(0,g.jsx)(W.Z,{name:["showAdvanced"],children:function(o){var s=o.showAdvanced;return s&&(0,g.jsx)(H.Z,{title:"\u64AD\u653E\u53C2\u6570",className:"mb-3 sm:mb-6",children:(0,g.jsxs)(z.A.Group,{children:[(0,g.jsx)(K.Z,{name:"toneDuration",label:"\u97F3\u9636\u65F6\u957F",width:"md",fieldProps:{tooltip:{formatter:n.QZ}},min:n.Qx,max:n.Zf,step:n.LB}),(0,g.jsx)(K.Z,{name:"toneWait",label:"\u97F3\u9636\u64AD\u540E\u7B49\u5F85",width:"md",fieldProps:{tooltip:{formatter:n.QZ}},min:n.Qx,max:n.Zf,step:n.LB}),(0,g.jsx)(K.Z,{name:"ttsWait",label:"\u62A5\u53F7\u540E\u7B49\u5F85",width:"md",fieldProps:{tooltip:{formatter:n.QZ}},min:n.Qx,max:n.Zf,step:n.LB})]})})}})]}),(0,g.jsx)(jg,x()({open:F,onCancel:function(){return b(!1)}},h))]})},Ng=Tg}}]);
