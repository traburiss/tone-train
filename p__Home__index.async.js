"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[371],{30558:function(Kt,Ae,m){m.r(Ae),m.d(Ae,{default:function(){return $t}});var Ze=m(26068),j=m.n(Ze),Me=m(48305),B=m.n(Me),Qt="Umi Max",we="12Tone",Ue=[{label:"\u5341\u4E8C\u97F3\u9636",value:"12Tone"},{label:"\u516B\u5EA6\u97F3\u9636",value:"8Tone"},{label:"\u5409\u4ED6\u548C\u5F26",value:"GuitarChords"}],Ce="guitar-acoustic",We=[{label:"\u539F\u58F0\u5409\u4ED6",value:"guitar-acoustic"},{label:"\u7535\u5409\u4ED6",value:"guitar-electric"},{label:"\u94A2\u7434",value:"piano"}],R=["C","D","E","F","G","A","B"],ge=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],U=[2,3,4,5,6],qt=U.flatMap(function(v){return R.map(function(t){return"".concat(t).concat(v)})}),_t=U.flatMap(function(v){return ge.map(function(t){return"".concat(t).concat(v)})}),_=["C","D","E","F","G","A","B","Em","Am","Dm","Bm","F#m","C#m","Gm","C5","D5","E5","F5","G5","A5","B5","G7","C7","D7","E7","A7","B7","Cmaj7","Gmaj7","Fmaj7","Amaj7","Am7","Em7","Dm7","Bm7","F#m7","Dsus4","Asus4","Esus4","D/F#","C/G","G/B"],ve=["C","D","G","A","Em","Am","Dm"],ke=[3,4,5].flatMap(function(v){return R.map(function(t){return"".concat(t).concat(v)})}),He=[{label:"\u65E0\u9650",value:"0"},{label:"20\u6B21",value:"20"},{label:"50\u6B21",value:"50"},{label:"200\u6B21",value:"200"},{label:"\u624B\u52A8\u8F93\u5165",value:"custom"}],Ve=!0,ze=!1,$e=1500,Je=!1,Ye=1500,z=100,$=10*1e3,J=100,Y=function(t){var i=Number(t);if(isNaN(i))return"".concat(t);var o=Math.floor(i/1e3),c="";if(o<60)c="".concat(o,"\u79D2");else{var F=Math.floor(o/60),d=o%60;c="".concat(F,"\u5206"),d>0&&(c+="".concat(d,"\u79D2"))}return"".concat(i," \u6BEB\u79D2 (").concat(c,")")},Xe=1e3,Ke=1500,Qe=2e3,qe=1,_e=!0,et=[{label:"C2",value:"C2"},{label:"C3",value:"C3"},{label:"C4",value:"C4"},{label:"C5",value:"C5"},{label:"C6",value:"C6"}],W={toneType:we,instrumentName:Ce,toneList:ke,toneDuration:Xe,toneWait:Ke,ttsEnable:Ve,ttsWait:Qe,ttsRate:qe,ttsSolfege:ze,ttsSolfegeWait:$e,ttsNotation:Je,ttsNotationWait:Ye,random:_e,loopCount:0,referenceNoteEnabled:!1,referenceNote:"C4"},N=m(40334),re=m(76582),L=m(99063),tt=m(4827),X=m(81485),ot=m(39493),se=m(29219),x=m(75271),e=m(52676),nt=function(){return(0,e.jsxs)(se.Z,{title:"\u57FA\u7840\u914D\u7F6E",className:"mb-3 sm:mb-6",children:[(0,e.jsx)(N.A.Group,{children:(0,e.jsx)(re.Z.Group,{name:"instrumentName",label:"\u97F3\u8272\u9009\u62E9",tooltip:"\u7528\u6237\u53EF\u4EE5\u9009\u62E9\u81EA\u5DF1\u4E60\u60EF\u7684\u97F3\u8272\u6765\u542C\u97F3\u540D\u64AD\u653E",radioType:"button",fieldProps:{buttonStyle:"solid"},options:We})}),(0,e.jsxs)(N.A.Group,{children:[(0,e.jsx)(re.Z.Group,{name:"loopCountType",label:"\u5FAA\u73AF\u6B21\u6570",tooltip:"\u7528\u6237\u53EF\u4EE5\u9009\u62E9\u5FAA\u73AF\u6B21\u6570\uFF0C\u6216\u8005\u81EA\u5B9A\u4E49\u5FAA\u73AF\u6B21\u6570",radioType:"button",fieldProps:{buttonStyle:"solid"},options:He}),(0,e.jsx)(L.Z,{name:["loopCountType"],children:function(i){var o=i.loopCountType;return o==="custom"&&(0,e.jsx)(tt.Z,{name:"loopCountCustom",label:" ",width:"xs",placeholder:"\u6B21\u6570",min:1,max:1e3,fieldProps:{precision:0}})}})]}),(0,e.jsx)(N.A.Group,{children:(0,e.jsx)(X.Z,{name:"random",label:"\u968F\u673A\u64AD\u653E",tooltip:"\u4E0D\u8981\u6309\u7167\u97F3\u9636\u987A\u5E8F\u64AD\u653E\u97F3\u9636"})}),(0,e.jsxs)(N.A.Group,{children:[(0,e.jsx)(X.Z,{name:"referenceNoteEnabled",label:"\u64AD\u653E\u57FA\u51C6",tooltip:"\u64AD\u653E\u97F3\u9636\u65F6\uFF0C\u4F1A\u5148\u64AD\u653E\u57FA\u51C6\u97F3\uFF0C\u518D\u64AD\u653E\u97F3\u9636\uFF0C\u4EE5\u964D\u4F4E\u96BE\u5EA6"}),(0,e.jsx)(L.Z,{name:["referenceNoteEnabled"],children:function(i){var o=i.referenceNoteEnabled;return o&&(0,e.jsx)(ot.Z,{name:"referenceNote",label:" ",width:"xs",options:et,placeholder:"\u9009\u62E9\u57FA\u51C6\u97F3"})}})]})]})},at=nt,k=m(24871),gt=function(){return(0,e.jsxs)(se.Z,{title:"\u64AD\u653E\u914D\u7F6E",className:"mb-3 sm:mb-6",children:[(0,e.jsxs)(N.A.Group,{title:"\u65F6\u95F4\u8BBE\u7F6E",children:[(0,e.jsx)(k.Z,{name:"toneDuration",label:"\u97F3\u9636\u65F6\u957F",width:"md",min:z,max:$,step:J,fieldProps:{tooltip:{formatter:Y}}}),(0,e.jsx)(k.Z,{name:"toneWait",label:"\u97F3\u9636\u64AD\u540E\u7B49\u5F85",width:"md",min:z,max:$,step:J,fieldProps:{tooltip:{formatter:Y}}})]}),(0,e.jsxs)(N.A.Group,{title:"\u97F3\u540D\u64AD\u62A5\u8BBE\u7F6E",children:[(0,e.jsx)(X.Z,{name:"ttsEnable",label:"\u8BED\u97F3\u62A5\u97F3\u540D",tooltip:"\u6BCF\u6B21\u7ED3\u675F\u540E\u64AD\u62A5\u97F3\u540D"}),(0,e.jsx)(L.Z,{name:["ttsEnable"],children:function(i){var o=i.ttsEnable;return o&&(0,e.jsx)(k.Z,{name:"ttsRate",label:"\u62A5\u97F3\u9636\u8BED\u901F",tooltip:"\u500D\u6570\u8D8A\u5927\u8D8A\u6162",width:"md",min:.5,max:4,step:.1,fieldProps:{tooltip:{formatter:function(F){return"".concat(F,"x \u65F6\u957F")}}}})}}),(0,e.jsx)(L.Z,{name:["ttsEnable"],children:function(i){var o=i.ttsEnable;return o&&(0,e.jsx)(k.Z,{name:"ttsWait",label:"\u62A5\u97F3\u540D\u540E\u7B49\u5F85",width:"md",min:z,max:$,step:J,fieldProps:{tooltip:{formatter:Y}}})}})]}),(0,e.jsx)(L.Z,{name:["ttsEnable"],children:function(i){var o=i.ttsEnable;return o&&(0,e.jsxs)(N.A.Group,{children:[(0,e.jsx)(X.Z,{name:"ttsSolfege",label:"\u989D\u5916\u62A5\u5531\u540D",tooltip:"\u62A5\u5B8C\u97F3\u540D\u540E\uFF0C\u8FFD\u52A0\u5531\u540D\uFF08\u5982\uFF1ADo\uFF09"}),(0,e.jsx)(L.Z,{name:["ttsSolfege"],children:function(F){var d=F.ttsSolfege;return d&&(0,e.jsx)(k.Z,{name:"ttsSolfegeWait",label:"\u5531\u540D\u95F4\u9694",width:"sm",min:z,max:$,step:J,fieldProps:{tooltip:{formatter:Y}}})}})]})}}),(0,e.jsx)(L.Z,{name:["ttsEnable"],children:function(i){var o=i.ttsEnable;return o&&(0,e.jsxs)(N.A.Group,{children:[(0,e.jsx)(X.Z,{name:"ttsNotation",label:"\u989D\u5916\u62A5\u7B80\u8C31",tooltip:"\u62A5\u5B8C\u97F3\u540D\u540E\uFF0C\u8FFD\u52A0\u7B80\u8C31\u8BB0\u53F7\uFF08\u5982\uFF1A1\uFF09"}),(0,e.jsx)(L.Z,{name:["ttsNotation"],children:function(F){var d=F.ttsNotation;return d&&(0,e.jsx)(k.Z,{name:"ttsNotationWait",label:"\u7B80\u8C31\u95F4\u9694",width:"sm",min:z,max:$,step:J,fieldProps:{tooltip:{formatter:Y}}})}})]})}})]})},rt=gt,st=m(15558),ue=m.n(st),ut=m(1059),lt=m(72783),it=m(93817),De=m(36065),ee=m(79662),M=m(95216),ct={C:"Do","C#":"\u5347Do",D:"Re","D#":"\u5347Re",E:"Mi",F:"Fa","F#":"\u5347Fa",G:"Sol","G#":"\u5347Sol",A:"La","A#":"\u5347La",B:"Si"},ft={C:"1","C#":"\u53471",D:"2","D#":"\u53472",E:"3",F:"4","F#":"\u53474",G:"5","G#":"\u53475",A:"6","A#":"\u53476",B:"7"},Ee={C:["C3","E3","G3","C4","E4"],D:["D3","A3","D4","F#4"],E:["E2","B2","E3","G#3","B3","E4"],F:["F2","C3","F3","A3","C4","F4"],G:["G2","B2","D3","G3","B3","G4"],A:["A2","E3","A3","C#4","E4"],B:["B2","F#3","B3","D#4","F#4"],Em:["E2","B2","E3","G3","B3","E4"],Am:["A2","E3","A3","C4","E4"],Dm:["D3","A3","D4","F4"],Bm:["B2","F#3","B3","D4","F#4"],"F#m":["F#2","C#3","F#3","A3","C#4","F#4"],"C#m":["C#3","G#3","C#4","E4","G#4"],Gm:["G2","D3","G3","A#3","D4","G4"],C5:["C3","G3","C4"],D5:["D3","A3","D4"],E5:["E2","B2","E3"],F5:["F2","C3","F3"],G5:["G2","D3","G3"],A5:["A2","E3","A3"],B5:["B2","F#3","B3"],G7:["G2","B2","D3","F3","G3","B3"],C7:["C3","E3","G3","A#3","C4"],D7:["D3","A3","C4","F#4"],E7:["E2","B2","D3","G#3","B3","E4"],A7:["A2","E3","G3","C#4","E4"],B7:["B2","D#3","A3","B3","F#4"],Cmaj7:["C3","E3","G3","B3","E4"],Gmaj7:["G2","D3","F#3","B3","D4"],Fmaj7:["F3","C4","E4","A4"],Amaj7:["A2","E3","G#3","C#4","E4"],Am7:["A2","E3","G3","C4","E4"],Em7:["E2","B2","D3","G3","B3","E4"],Dm7:["D3","A3","C4","F4"],Bm7:["B2","F#3","A3","D4","F#4"],"F#m7":["F#2","C#3","E3","A3","C#4","F#4"],Dsus4:["D3","A3","D4","G4"],Asus4:["A2","E3","A3","D4","E4"],Esus4:["E2","B2","E3","A3","B3","E4"],"D/F#":["F#2","A2","D3","A3","D4","F#4"],"C/G":["G2","C3","E3","G3","C4","E4"],"G/B":["B2","D3","G3","B3","G4"]},mt=function(t){return Ee[t]||[]},le={C:[-1,3,2,0,1,0],D:[-1,-1,0,2,3,2],E:[0,2,2,1,0,0],F:[1,3,3,2,1,1],G:[3,2,0,0,0,3],A:[-1,0,2,2,2,0],B:[-1,2,4,4,4,2],Em:[0,2,2,0,0,0],Am:[-1,0,2,2,1,0],Dm:[-1,-1,0,2,3,1],Bm:[-1,2,4,4,3,2],"F#m":[2,4,4,2,2,2],"C#m":[-1,4,6,6,5,4],Gm:[3,5,5,3,3,3],C5:[-1,3,5,5,-1,-1],D5:[-1,5,7,7,-1,-1],E5:[0,2,2,-1,-1,-1],F5:[1,3,3,-1,-1,-1],G5:[3,5,5,-1,-1,-1],A5:[-1,0,2,2,-1,-1],B5:[-1,2,4,4,-1,-1],G7:[3,2,0,0,0,1],C7:[-1,3,2,3,1,0],D7:[-1,-1,0,2,1,2],E7:[0,2,0,1,0,0],A7:[-1,0,2,0,2,0],B7:[-1,2,1,2,0,2],Cmaj7:[-1,3,2,0,0,0],Gmaj7:[3,2,0,0,0,2],Fmaj7:[-1,-1,3,2,1,0],Amaj7:[-1,0,2,1,2,0],Am7:[-1,0,2,0,1,0],Em7:[0,2,2,0,3,0],Dm7:[-1,-1,0,2,1,1],Bm7:[-1,2,4,2,3,2],"F#m7":[2,4,2,2,2,2],Dsus4:[-1,-1,0,2,3,3],Asus4:[-1,0,2,2,3,0],Esus4:[0,2,2,2,0,0],"D/F#":[2,0,0,2,3,2],"C/G":[3,3,2,0,1,0],"G/B":[-1,2,0,0,0,3]},Ge=function(t){if(Ee[t])return{solfege:t,number:t};var i=t.match(/^([A-G]#?)/);if(!i)return{solfege:"",number:""};var o=i[1];return{solfege:ct[o]||"",number:ft[o]||""}},Ft=m(22889),dt=function(t){var i=t.name,o=t.fingering,c=t.width,F=c===void 0?60:c,d=t.height,h=d===void 0?80:d,S=6,b=5,T=10,G=20,a=F-T*2,s=h-G*2,u=a/(S-1),g=s/b;return(0,e.jsxs)("div",{className:"flex flex-col items-center",children:[(0,e.jsx)("span",{className:"text-sm font-bold mb-1",children:i}),(0,e.jsx)("svg",{width:F,height:h,viewBox:"0 0 ".concat(F," ").concat(h),children:(0,e.jsxs)("g",{transform:"translate(".concat(T,", ").concat(G,")"),children:[Array.from({length:b+1}).map(function(l,r){return(0,e.jsx)("line",{x1:0,y1:r*g,x2:a,y2:r*g,stroke:"#000",strokeWidth:r===0?2:1},"fret-".concat(r))}),Array.from({length:S}).map(function(l,r){return(0,e.jsx)("line",{x1:r*u,y1:0,x2:r*u,y2:s,stroke:"#000",strokeWidth:1},"string-".concat(r))}),o.map(function(l,r){var n=r*u;if(l===-1)return(0,e.jsx)("text",{x:n,y:-5,fontSize:10,textAnchor:"middle",fill:"#000",children:"X"},"mute-".concat(r));if(l===0)return(0,e.jsx)("text",{x:n,y:-5,fontSize:10,textAnchor:"middle",fill:"#000",children:"O"},"open-".concat(r));var A=(l-1)*g+g/2;return(0,e.jsx)("circle",{cx:n,cy:A,r:Math.min(u,g)*.35,fill:"#000"},"finger-".concat(r))})]})})]})},he=dt,At=["C","D","E","F","G","A","B"],Ct=["Em","Am","Dm","Bm","F#m","C#m","Gm"],vt=["C5","D5","E5","F5","G5","A5","B5"],Dt=["G7","C7","D7","E7","A7","B7"],Et=["Cmaj7","Gmaj7","Fmaj7","Amaj7"],Gt=["Am7","Em7","Dm7","Bm7","F#m7"],ht=["Dsus4","Asus4","Esus4"],xt=["D/F#","C/G","G/B"],ie=[{label:"\u5927\u4E09\u548C\u5F26 (Major)",value:"Major",chords:At},{label:"\u5C0F\u4E09\u548C\u5F26 (Minor)",value:"Minor",chords:Ct},{label:"\u5C5E\u4E03\u548C\u5F26 (7)",value:"Dom7",chords:Dt},{label:"\u5C0F\u4E03\u548C\u5F26 (m7)",value:"m7",chords:Gt},{label:"\u5927\u4E03\u548C\u5F26 (maj7)",value:"maj7",chords:Et},{label:"\u6302\u7559\u548C\u5F26 (sus)",value:"sus",chords:ht},{label:"\u659C\u6760\u548C\u5F26 (Slash)",value:"slash",chords:xt},{label:"\u5F3A\u529B\u548C\u5F26 (Power)",value:"power",chords:vt}],pt=["Major","Minor","Dom7","m7"],St=function(t){var i=t.value,o=t.onChange,c=i||[],F=(0,x.useState)(pt),d=B()(F,2),h=d[0],S=d[1],b=function(s){var u=c.includes(s)?c.filter(function(g){return g!==s}):[].concat(ue()(c),[s]);o==null||o(u)},T=function(s){var u=s.every(function(l){return c.includes(l)}),g=ue()(c);u?g=g.filter(function(l){return!s.includes(l)}):s.forEach(function(l){g.includes(l)||g.push(l)}),o==null||o(g)},G=function(s,u){var g=u.every(function(l){return c.includes(l)});return(0,e.jsxs)("div",{className:"mb-6 rounded-md border border-gray-100 p-3 bg-gray-50",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,e.jsx)("span",{className:"font-bold text-base text-gray-700",children:s}),(0,e.jsx)(M.ZP,{size:"small",onClick:function(){return T(u)},children:g?"\u53D6\u6D88\u5168\u9009":"\u5168\u9009"})]}),(0,e.jsx)("div",{className:"flex flex-wrap gap-2 sm:gap-4 justify-start",children:u.map(function(l){var r=c.includes(l);return(0,e.jsx)("div",{className:`
                  cursor-pointer rounded-lg border-2 p-1 sm:p-2 bg-white transition-all
                  flex flex-col items-center
                  `.concat(r?"border-blue-500 shadow-md":"border-transparent hover:border-gray-200",`
                `),onClick:function(){return b(l)},children:(0,e.jsx)(he,{width:50,height:70,name:l,fingering:le[l]})},l)})})]})};return(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("div",{className:"mb-4 p-3 bg-white border border-gray-200 rounded-lg",children:(0,e.jsx)(Ft.Z.Group,{options:ie.map(function(a){return{label:a.label,value:a.value}}),value:h,onChange:function(s){var u=s,g=h.filter(function(n){return!u.includes(n)});if(g.length>0){var l=g.flatMap(function(n){var A=ie.find(function(E){return E.value===n});return A?A.chords:[]}),r=c.filter(function(n){return!l.includes(n)});o==null||o(r)}S(u)},className:"flex flex-wrap gap-y-2"})}),ie.filter(function(a){return h.includes(a.value)}).map(function(a){return(0,e.jsx)("div",{children:G(a.label,a.chords)},a.value)})]})},bt=St,Tt=function(){var t=De.Z.useFormInstance(),i=(0,x.useState)([]),o=B()(i,2),c=o[0],F=o[1],d=function(a){F(function(s){return s.includes(a)?s.filter(function(u){return u!==a}):[].concat(ue()(s),[a])})},h=function(a,s,u){var g=u.map(function(l){return"".concat(l).concat(a)});t.setFieldValue(["toneListGroup",a],s?g:[])},S=function(a,s){var u=R.map(function(g){return"".concat(g).concat(a)});t.setFieldValue(["toneListGroup",a],s?u:[])},b=function(a,s){if(s==="GuitarChords"){var u=t.getFieldValue(["toneListGroup","chords"]);!u||u.length===0?t.setFieldValue(["toneListGroup","chords"],ve):t.setFieldValue("toneListGroup",{chords:a?_:[]});return}var g=s==="8Tone"?R:ge,l={};U.forEach(function(r){l[r]=a?g.map(function(n){return"".concat(n).concat(r)}):[]}),t.setFieldValue("toneListGroup",l)},T=function(a){var s={};U.forEach(function(u){s[u]=a?R.map(function(g){return"".concat(g).concat(u)}):[]}),t.setFieldValue("toneListGroup",s)};return(0,e.jsx)(L.Z,{name:["toneType","toneListGroup"],children:function(a){var s=a.toneType,u=a.toneListGroup;return(0,e.jsx)(se.Z,{title:"\u97F3\u9636\u8BBE\u7F6E",className:"scale-card mb-6",extra:(0,e.jsxs)(ee.Z,{size:12,wrap:!0,children:[(0,e.jsxs)(ee.Z,{size:4,children:[(0,e.jsx)(M.ZP,{size:"small",onClick:function(){return b(!0,s)},children:"\u5168\u9009"}),s!=="8Tone"&&s!=="GuitarChords"&&(0,e.jsx)(M.ZP,{size:"small",onClick:function(){return T(!0)},children:"\u5168\u97F3"})]}),(0,e.jsx)("div",{className:"w-[1px] h-[14px] bg-[#e8e8e8]"}),(0,e.jsx)(re.Z.Group,{name:"toneType",noStyle:!0,radioType:"button",fieldProps:{onChange:function(l){var r=l.target.value;if(r==="GuitarChords"){var n=t.getFieldValue(["toneListGroup","chords"]);(!n||n.length===0)&&t.setFieldValue(["toneListGroup","chords"],ve)}}},options:Ue})]}),children:(0,e.jsx)("div",{className:"flex flex-col gap-2",children:s==="GuitarChords"?(0,e.jsxs)("div",{className:"octave-row p-2 sm:p-2.5 border border-[#f0f0f0] rounded-lg bg-[#fafafa] flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2 shrink-0 w-full sm:w-auto",children:[(0,e.jsx)("span",{className:"font-bold text-[14px] sm:text-[15px] text-[#1a1a1a] mr-1",children:"\u548C\u5F26"}),(0,e.jsx)(ee.Z,{size:4,children:(0,e.jsx)(M.ZP,{size:"small",type:((u==null?void 0:u.chords)||[]).length===_.length?"primary":"default",onClick:function(){var l=((u==null?void 0:u.chords)||[]).length===_.length;t.setFieldValue(["toneListGroup","chords"],l?[]:_)},className:"text-[12px]",children:"\u5168\u9009"})}),(0,e.jsxs)("span",{className:"text-[11px] sm:text-[12px] color-[#888] ml-1 min-w-[20px]",children:["(",((u==null?void 0:u.chords)||[]).length,")"]})]}),(0,e.jsx)("div",{className:"hidden sm:block w-[1px] h-6 bg-[#e8e8e8]"}),(0,e.jsx)("div",{className:"flex flex-wrap gap-4 flex-1 w-full justify-center sm:justify-start",children:(0,e.jsx)(De.Z.Item,{name:["toneListGroup","chords"],style:{marginBottom:0,width:"100%"},children:(0,e.jsx)(bt,{})})})]}):U.map(function(g){var l=s==="8Tone"?R:ge,r=(u==null?void 0:u[g])||[],n=r.length===l.length,A=r.length===R.length&&R.every(function(E){return r.includes("".concat(E).concat(g))});return(0,e.jsxs)("div",{className:"octave-row p-2 sm:p-2.5 border border-[#f0f0f0] rounded-lg bg-[#fafafa] flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2 shrink-0 w-full sm:w-auto",children:[(0,e.jsxs)("span",{className:"font-bold text-[14px] sm:text-[15px] text-[#1a1a1a] mr-1",children:["Oct ",g]}),(0,e.jsxs)(ee.Z,{size:4,children:[(0,e.jsx)(M.ZP,{size:"small",type:n?"primary":"default",onClick:function(){return h(g,!n,l)},className:"text-[12px]",children:"\u5168\u9009"}),s!=="8Tone"&&(0,e.jsx)(M.ZP,{size:"small",type:A?"primary":"default",onClick:function(){return S(g,!A)},className:"text-[12px]",children:"\u5168\u97F3"})]}),(0,e.jsxs)("span",{className:"text-[11px] sm:text-[12px] color-[#888] ml-1 min-w-[20px]",children:["(",r.length,")"]}),(0,e.jsx)(M.ZP,{type:"text",size:"small",className:"sm:hidden ml-auto flex items-center gap-1 text-[#1890ff]",onClick:function(){return d(g)},children:c.includes(g)?(0,e.jsxs)(e.Fragment,{children:["\u6536\u8D77 ",(0,e.jsx)(ut.Z,{className:"text-[10px]"})]}):(0,e.jsxs)(e.Fragment,{children:["\u5C55\u5F00 ",(0,e.jsx)(lt.Z,{className:"text-[10px]"})]})})]}),(0,e.jsx)("div",{className:"hidden sm:block w-[1px] h-6 bg-[#e8e8e8]"}),(0,e.jsx)("div",{className:"".concat(c.includes(g)?"flex":"hidden sm:flex"," flex-wrap gap-1.5 flex-1 w-full"),children:(0,e.jsx)(it.Z.Group,{name:["toneListGroup",g],className:"touch-button-group",options:l.map(function(E){return{label:E,value:"".concat(E).concat(g)}})})})]},g)})})})}})},jt=Tt,Bt=m(90228),te=m.n(Bt),Nt=m(87999),xe=m.n(Nt),H=m(55248),Ot={"bass-electric":{"A#1":"As1.ogg","A#2":"As2.ogg","A#3":"As3.ogg","A#4":"As4.ogg","C#1":"Cs1.ogg","C#2":"Cs2.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg",E1:"E1.ogg",E2:"E2.ogg",E3:"E3.ogg",E4:"E4.ogg",G1:"G1.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg"},bassoon:{A4:"A4.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg",E4:"E4.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg",A2:"A2.ogg",A3:"A3.ogg"},cello:{E3:"E3.ogg",E4:"E4.ogg",F2:"F2.ogg",F3:"F3.ogg",F4:"F4.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg","G#4":"Gs4.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg","A#2":"As2.ogg","A#3":"As3.ogg",B2:"B2.ogg",B3:"B3.ogg",B4:"B4.ogg",C2:"C2.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg",D2:"D2.ogg",D3:"D3.ogg",D4:"D4.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg",E2:"E2.ogg"},clarinet:{D4:"D4.ogg",D5:"D5.ogg",D6:"D6.ogg",F3:"F3.ogg",F4:"F4.ogg",F5:"F5.ogg","F#6":"Fs6.ogg","A#3":"As3.ogg","A#4":"As4.ogg","A#5":"As5.ogg",D3:"D3.ogg"},contrabass:{C2:"C2.ogg","C#3":"Cs3.ogg",D2:"D2.ogg",E2:"E2.ogg",E3:"E3.ogg","F#1":"Fs1.ogg","F#2":"Fs2.ogg",G1:"G1.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg",A2:"A2.ogg","A#1":"As1.ogg",B3:"B3.ogg"},flute:{A6:"A6.ogg",C4:"C4.ogg",C5:"C5.ogg",C6:"C6.ogg",C7:"C7.ogg",E4:"E4.ogg",E5:"E5.ogg",E6:"E6.ogg",A4:"A4.ogg",A5:"A5.ogg"},"french-horn":{D3:"D3.ogg",D5:"D5.ogg","D#2":"Ds2.ogg",F3:"F3.ogg",F5:"F5.ogg",G2:"G2.ogg",A1:"A1.ogg",A3:"A3.ogg",C2:"C2.ogg",C4:"C4.ogg"},"guitar-acoustic":{F4:"F4.ogg","F#2":"Fs2.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg","G#4":"Gs4.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg","A#2":"As2.ogg","A#3":"As3.ogg","A#4":"As4.ogg",B2:"B2.ogg",B3:"B3.ogg",B4:"B4.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg","C#5":"Cs5.ogg",D2:"D2.ogg",D3:"D3.ogg",D4:"D4.ogg",D5:"D5.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds3.ogg",E2:"E2.ogg",E3:"E3.ogg",E4:"E4.ogg",F2:"F2.ogg",F3:"F3.ogg"},"guitar-electric":{"D#3":"Ds3.ogg","D#4":"Ds4.ogg","D#5":"Ds5.ogg",E2:"E2.ogg","F#2":"Fs2.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg","F#5":"Fs5.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg",A5:"A5.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg",C6:"C6.ogg","C#2":"Cs2.ogg"},"guitar-nylon":{"F#2":"Fs2.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg","F#5":"Fs5.ogg",G3:"G3.ogg",G5:"G3.ogg","G#2":"Gs2.ogg","G#4":"Gs4.ogg","G#5":"Gs5.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg",A5:"A5.ogg","A#5":"As5.ogg",B1:"B1.ogg",B2:"B2.ogg",B3:"B3.ogg",B4:"B4.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg","C#5":"Cs5.ogg",D2:"D2.ogg",D3:"D3.ogg",D5:"D5.ogg","D#4":"Ds4.ogg",E2:"E2.ogg",E3:"E3.ogg",E4:"E4.ogg",E5:"E5.ogg"},harmonium:{C2:"C2.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg","C#2":"Cs2.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg","C#5":"Cs5.ogg",D2:"D2.ogg",D3:"D3.ogg",D4:"D4.ogg",D5:"D5.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg",E2:"E2.ogg",E3:"E3.ogg",E4:"E4.ogg",F2:"F2.ogg",F3:"F3.ogg",F4:"F4.ogg","F#2":"Fs2.ogg","F#3":"Fs3.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg","G#4":"Gs4.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg","A#2":"As2.ogg","A#3":"As3.ogg","A#4":"As4.ogg"},harp:{C5:"C5.ogg",D2:"D2.ogg",D4:"D4.ogg",D6:"D6.ogg",D7:"D7.ogg",E1:"E1.ogg",E3:"E3.ogg",E5:"E5.ogg",F2:"F2.ogg",F4:"F4.ogg",F6:"F6.ogg",F7:"F7.ogg",G1:"G1.ogg",G3:"G3.ogg",G5:"G5.ogg",A2:"A2.ogg",A4:"A4.ogg",A6:"A6.ogg",B1:"B1.ogg",B3:"B3.ogg",B5:"B5.ogg",B6:"B6.ogg",C3:"C3.ogg"},organ:{C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg",C6:"C6.ogg","D#1":"Ds1.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg","D#5":"Ds5.ogg","F#1":"Fs1.ogg","F#2":"Fs2.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg","F#5":"Fs5.ogg",A1:"A1.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg",A5:"A5.ogg",C1:"C1.ogg",C2:"C2.ogg"},piano:{A7:"A7.ogg",A1:"A1.ogg",A2:"A2.ogg",A3:"A3.ogg",A4:"A4.ogg",A5:"A5.ogg",A6:"A6.ogg","A#7":"As7.ogg","A#1":"As1.ogg","A#2":"As2.ogg","A#3":"As3.ogg","A#4":"As4.ogg","A#5":"As5.ogg","A#6":"As6.ogg",B7:"B7.ogg",B1:"B1.ogg",B2:"B2.ogg",B3:"B3.ogg",B4:"B4.ogg",B5:"B5.ogg",B6:"B6.ogg",C1:"C1.ogg",C2:"C2.ogg",C3:"C3.ogg",C4:"C4.ogg",C5:"C5.ogg",C6:"C6.ogg",C7:"C7.ogg","C#7":"Cs7.ogg","C#1":"Cs1.ogg","C#2":"Cs2.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg","C#5":"Cs5.ogg","C#6":"Cs6.ogg",D7:"D7.ogg",D1:"D1.ogg",D2:"D2.ogg",D3:"D3.ogg",D4:"D4.ogg",D5:"D5.ogg",D6:"D6.ogg","D#7":"Ds7.ogg","D#1":"Ds1.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg","D#5":"Ds5.ogg","D#6":"Ds6.ogg",E7:"E7.ogg",E1:"E1.ogg",E2:"E2.ogg",E3:"E3.ogg",E4:"E4.ogg",E5:"E5.ogg",E6:"E6.ogg",F7:"F7.ogg",F1:"F1.ogg",F2:"F2.ogg",F3:"F3.ogg",F4:"F4.ogg",F5:"F5.ogg",F6:"F6.ogg","F#7":"Fs7.ogg","F#1":"Fs1.ogg","F#2":"Fs2.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg","F#5":"Fs5.ogg","F#6":"Fs6.ogg",G7:"G7.ogg",G1:"G1.ogg",G2:"G2.ogg",G3:"G3.ogg",G4:"G4.ogg",G5:"G5.ogg",G6:"G6.ogg","G#7":"Gs7.ogg","G#1":"Gs1.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg","G#4":"Gs4.ogg","G#5":"Gs5.ogg","G#6":"Gs6.ogg"},saxophone:{"D#5":"Ds5.ogg",E3:"E3.ogg",E4:"E4.ogg",E5:"E5.ogg",F3:"F3.ogg",F4:"F4.ogg",F5:"F5.ogg","F#3":"Fs3.ogg","F#4":"Fs4.ogg","F#5":"Fs5.ogg",G3:"G3.ogg",G4:"G4.ogg",G5:"G5.ogg","G#3":"Gs3.ogg","G#4":"Gs4.ogg","G#5":"Gs5.ogg",A4:"A4.ogg",A5:"A5.ogg","A#3":"As3.ogg","A#4":"As4.ogg",B3:"B3.ogg",B4:"B4.ogg",C4:"C4.ogg",C5:"C5.ogg","C#3":"Cs3.ogg","C#4":"Cs4.ogg","C#5":"Cs5.ogg",D3:"D3.ogg",D4:"D4.ogg",D5:"D5.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg"},trombone:{"A#3":"As3.ogg",C3:"C3.ogg",C4:"C4.ogg","C#2":"Cs2.ogg","C#4":"Cs4.ogg",D3:"D3.ogg",D4:"D4.ogg","D#2":"Ds2.ogg","D#3":"Ds3.ogg","D#4":"Ds4.ogg",F2:"F2.ogg",F3:"F3.ogg",F4:"F4.ogg","G#2":"Gs2.ogg","G#3":"Gs3.ogg","A#1":"As1.ogg","A#2":"As2.ogg"},trumpet:{C6:"C6.ogg",D5:"D5.ogg","D#4":"Ds4.ogg",F3:"F3.ogg",F4:"F4.ogg",F5:"F5.ogg",G4:"G4.ogg",A3:"A3.ogg",A5:"A5.ogg","A#4":"As4.ogg",C4:"C4.ogg"},tuba:{"A#2":"As2.ogg","A#3":"As3.ogg",D3:"D3.ogg",D4:"D4.ogg","D#2":"Ds2.ogg",F1:"F1.ogg",F2:"F2.ogg",F3:"F3.ogg","A#1":"As1.ogg"},violin:{A3:"A3.ogg",A4:"A4.ogg",A5:"A5.ogg",A6:"A6.ogg",C4:"C4.ogg",C5:"C5.ogg",C6:"C6.ogg",C7:"C7.ogg",E4:"E4.ogg",E5:"E5.ogg",E6:"E6.ogg",G4:"G4.ogg",G5:"G5.ogg",G6:"G6.ogg"},xylophone:{C8:"C8.ogg",G4:"G4.ogg",G5:"G5.ogg",G6:"G6.ogg",G7:"G7.ogg",C5:"C5.ogg",C6:"C6.ogg",C7:"C7.ogg"}},ce={},pe={},Se={},fe=new Set,K=function(t,i,o){pe[t]=i,o&&(Se[t]=o),fe.forEach(function(c){return c(t,i,o)})},be=function(t){return pe[t]||"idle"},Te=function(t){return Se[t]},yt=function(t){return fe.add(t),function(){fe.delete(t)}},me=function(t){var i=Ot[t];if(i==null)throw K(t,"error"),new Error("no such instruments: ".concat(t));var o=ce[t];if(o!=null)return o;var c=Object.keys(i).length,F=0;K(t,"loading",{loaded:0,total:c});var d=new Promise(function(h,S){var b={},T="samples/".concat(t,"/"),G=Object.entries(i).map(function(a){var s=B()(a,2),u=s[0],g=s[1],l=T+g,r=new H.lW;return r.load(l).then(function(){F++,K(t,"loading",{loaded:F,total:c}),b[u]=r}).catch(function(n){throw console.error("Failed to load sample: ".concat(l),n),n})});Promise.all(G).then(function(){var a=new H.Z4({urls:b,release:1,onload:function(){K(t,"loaded",{loaded:c,total:c}),h(a)}}).toDestination()}).catch(function(a){K(t,"error"),S(a)})});return ce[t]=d,d.catch(function(){delete ce[t]}),d},je=function(t){var i=(0,x.useState)(function(){return{status:be(t),progress:Te(t)}}),o=B()(i,2),c=o[0],F=o[1];return(0,x.useEffect)(function(){F({status:be(t),progress:Te(t)});var d=yt(function(h,S,b){h===t&&F({status:S,progress:b})});return function(){d()}},[t]),c},Pt=m(53419),Lt=m(99430),Be=m(66931),It=m(65257),Rt=m(98649),Zt={trainPlayInfo:"trainPlayInfo___N471F"},Mt=Be.Z.confirm,y=null,wt=function(t){var i=(0,x.useState)(!0),o=B()(i,2),c=o[0],F=o[1],d=(0,x.useState)(!1),h=B()(d,2),S=h[0],b=h[1],T=(0,x.useState)("..."),G=B()(T,2),a=G[0],s=G[1],u=It.ZP.useNotification(),g=B()(u,2),l=g[1],r=x.useRef(0),n=x.useRef(0),A=function(p){var P=new SpeechSynthesisUtterance(p),I=t.ttsRate||1;P.rate=1/I,window.speechSynthesis.speak(P)},E=function(){var D=xe()(te()().mark(function p(P,I){var Q;return te()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return y!==null&&(Q=mt(P),Q.length>0?y.triggerAttackRelease(Q,I/1e3):y.triggerAttackRelease(P,I/1e3)),w.abrupt("return",new Promise(function(C){setTimeout(C,I)}));case 2:case"end":return w.stop()}},p)}));return function(P,I){return D.apply(this,arguments)}}(),Z=x.useRef(t);Z.current=t;var ye=x.useMemo(function(){var D=(t.toneDuration||0)+(t.toneWait||0)+(t.ttsWait||0)+(t.referenceNoteEnabled?(t.toneDuration||0)+(t.toneWait||0):0),p=0;return t.ttsEnable&&(p+=1e3,t.ttsSolfege&&(p+=(t.ttsSolfegeWait||0)+1e3),t.ttsNotation&&(p+=(t.ttsNotationWait||0)+1e3)),Math.max(D+p,500)},[t.toneDuration,t.toneWait,t.ttsWait,t.referenceNoteEnabled,t.ttsEnable,t.ttsSolfege,t.ttsSolfegeWait,t.ttsNotation,t.ttsNotationWait]);(0,x.useEffect)(function(){if(c||!t.open){y!==null&&y.triggerRelease(H.zO());return}var D=!1,p=null,P=null,I=function(){var Le=xe()(te()().mark(function w(){var C,q,oe,V,Ie,ne,Re,ae;return te()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!D){f.next=2;break}return f.abrupt("return");case 2:if(C=Z.current,q=C.toneList.length,q!==0){f.next=6;break}return f.abrupt("return");case 6:if(oe=0,C.random?oe=Math.floor(Math.random()*q):oe=r.current,V=C.toneList[oe],s(V),C.random){f.next=20;break}if(r.current++,!(r.current>=q)){f.next=18;break}if(r.current=0,n.current++,!(Number(C.loopCount)>0&&n.current>=Number(C.loopCount))){f.next=18;break}return F(!0),f.abrupt("return");case 18:f.next=27;break;case 20:if(r.current++,!(r.current>=q)){f.next=27;break}if(r.current=0,n.current++,!(Number(C.loopCount)>0&&n.current>=Number(C.loopCount))){f.next=27;break}return F(!0),f.abrupt("return");case 27:if(!(C.referenceNoteEnabled&&C.referenceNote)){f.next=36;break}if(!D){f.next=30;break}return f.abrupt("return");case 30:return f.next=32,E(C.referenceNote,C.toneDuration);case 32:if(!D){f.next=34;break}return f.abrupt("return");case 34:return f.next=36,new Promise(function(O){P=setTimeout(O,C.toneWait)});case 36:if(!D){f.next=38;break}return f.abrupt("return");case 38:return f.next=40,E(V,C.toneDuration);case 40:if(!D){f.next=42;break}return f.abrupt("return");case 42:if(!D){f.next=44;break}return f.abrupt("return");case 44:if(!C.ttsEnable){f.next=64;break}return f.next=47,new Promise(function(O){p=setTimeout(O,C.toneWait||200)});case 47:if(!D){f.next=49;break}return f.abrupt("return");case 49:if(A(V),!C.ttsSolfege){f.next=57;break}return f.next=53,new Promise(function(O){p=setTimeout(O,C.ttsSolfegeWait||500)});case 53:if(!D){f.next=55;break}return f.abrupt("return");case 55:Ie=Ge(V),ne=Ie.solfege,ne&&(A(ne),s(function(O){return"".concat(O," ").concat(ne)}));case 57:if(!C.ttsNotation){f.next=64;break}return f.next=60,new Promise(function(O){p=setTimeout(O,C.ttsNotationWait||500)});case 60:if(!D){f.next=62;break}return f.abrupt("return");case 62:Re=Ge(V),ae=Re.number,ae&&(A(ae),s(function(O){return"".concat(O," ").concat(ae)}));case 64:case"end":return f.stop()}},w)}));return function(){return Le.apply(this,arguments)}}();I();var Q=setInterval(I,ye);return function(){D=!0,clearInterval(Q),p&&clearTimeout(p),P&&clearTimeout(P),y!==null&&y.triggerRelease(H.zO())}},[c,t.open,ye]),(0,x.useEffect)(function(){t.open&&(r.current=0,n.current=0,s("..."),b(!1),y||(y=new H.v2(H.WV).toDestination()),me(t.instrumentName).then(function(D){y=D}).catch(function(D){console.error("\u52A0\u8F7D\u97F3\u8272\u9519\u8BEF\uFF0C\u964D\u7EA7\u4F7F\u7528Synth",D)}),F(!1))},[t.open]);var Jt=function(){F(!c)},Yt=function(){F(!0),Mt({title:"\u786E\u8BA4\u505C\u6B62",icon:(0,e.jsx)(Pt.Z,{}),content:"\u786E\u8BA4\u505C\u6B62\u8BAD\u7EC3\u5417\uFF1F",okText:"\u786E\u8BA4\u5173\u95ED",cancelText:"\u6211\u70B9\u9519\u4E86",onOk:function(){t.onCancel()},onCancel:function(){F(!1)}})},Pe=je(t.instrumentName),Fe=Pe.status,de=Pe.progress,Xt=function(){return Fe==="loading"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{children:"\u5F53\u524D\u7684\u97F3\u662F"}),(0,e.jsxs)("div",{className:"text-yellow-600 text-sm",children:["\u540E\u53F0\u6B63\u5728\u52A0\u8F7D\u97F3\u8272"," ",de?"(".concat(de.loaded,"/").concat(de.total,")"):"",", \u6682\u65F6\u4F7F\u7528MIDI\u97F3..."]})]}):Fe==="error"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{children:"\u5F53\u524D\u7684\u97F3\u662F"}),(0,e.jsx)("div",{className:"text-red-600 text-sm",children:"\u97F3\u8272\u6587\u4EF6\u7F3A\u5931\u6216\u52A0\u8F7D\u5931\u8D25, \u4F7F\u7528MIDI\u97F3"})]}):"\u5F53\u524D\u7684\u97F3\u662F"};return(0,e.jsxs)(e.Fragment,{children:[l,(0,e.jsx)(Be.Z,{open:t.open,destroyOnHidden:!0,width:"80%",height:"80%",maskClosable:!1,okText:c?"\u6062\u590D\u8BAD\u7EC3":"\u6682\u505C\u8BAD\u7EC3",onOk:Jt,cancelText:"\u505C\u6B62\u8BAD\u7EC3",onCancel:Yt,loading:S,title:S?"\u52A0\u8F7D\u97F3\u8272\u4E2D":"\u8BAD\u7EC3",children:(0,e.jsx)(Rt.ZP,{className:Zt.trainPlayInfo,title:Xt(),subTitle:(0,e.jsx)("div",{className:"text-2xl sm:text-4xl flex items-center justify-center gap-2",children:a}),icon:le[a]?(0,e.jsx)("div",{className:"flex justify-center",children:(0,e.jsx)(he,{name:a,fingering:le[a],width:100,height:140})}):(0,e.jsx)(Lt.Z,{})})})]})},Ut=wt,Wt=m(82796),kt=m(90834),Ht=m(80743),Ne=m(76622),Vt=function(t){var i=t.name,o=je(i),c=o.status,F=o.progress;return c==="loading"?(0,e.jsxs)(Ne.Z,{icon:(0,e.jsx)(Ht.Z,{}),color:"processing",children:["\u52A0\u8F7D\u97F3\u8272\u4E2D ",F?"(".concat(F.loaded,"/").concat(F.total,")"):"","..."]}):c==="error"?(0,e.jsxs)(Ne.Z,{color:"error",children:[i," \u52A0\u8F7D\u5931\u8D25"]}):null},Oe="tone-train-settings",zt=function(){var t=(0,x.useState)(W),i=B()(t,2),o=i[0],c=i[1],F=(0,x.useState)(!1),d=B()(F,2),h=d[0],S=d[1],b=N.A.useForm(),T=B()(b,1),G=T[0],a=N.A.useWatch("instrumentName",G)||Ce;(0,x.useEffect)(function(){me(a).catch(console.error)},[a]);var s=function(n){return Object.values(n||{}).flat().filter(Boolean)},u=function(n){var A={};return U.forEach(function(E){A[E]=n.filter(function(Z){return Z.endsWith(String(E))})}),A};(0,x.useEffect)(function(){var r=localStorage.getItem(Oe);if(r)try{var n=JSON.parse(r);n.toneList&&!n.toneListGroup&&(n.toneListGroup=u(n.toneList));var A=n.loopCountType||String(n.loopCount||0),E=n.loopCountCustom||n.loopCount||10;G.setFieldsValue(j()(j()({},n),{},{loopCountType:A,loopCountCustom:A==="custom"?E:10})),n.instrumentName&&me(n.instrumentName).catch(console.error),c(j()(j()(j()({},W),n),{},{loopCount:A==="custom"?E:parseInt(A,10),toneList:s(n.toneListGroup)}))}catch(Z){console.error("Failed to load settings",Z)}},[G]);var g=function(n,A){localStorage.setItem(Oe,JSON.stringify(A))},l=function(n){var A=s(n.toneListGroup),E=n.loopCountType==="custom"?n.loopCountCustom:parseInt(n.loopCountType,10),Z=j()(j()(j()({},W),n),{},{toneList:A,loopCount:isNaN(E)?0:E});c(Z),S(!0)};return(0,e.jsxs)(Wt._z,{ghost:!0,className:"px-1 sm:px-4",children:[(0,e.jsxs)(N.A,{form:G,size:"large",initialValues:j()(j()({},W),{},{loopCountType:String(W.loopCount),loopCountCustom:10,toneListGroup:u(W.toneList)}),onValuesChange:g,onFinish:l,layout:"horizontal",submitter:{searchConfig:{resetText:"\u91CD\u7F6E",submitText:"\u5F00\u59CB\u8BAD\u7EC3"},render:function(n,A){return(0,e.jsx)(kt.S,{extra:(0,e.jsx)(Vt,{name:a}),children:A})}},children:[(0,e.jsx)(jt,{}),(0,e.jsx)(at,{}),(0,e.jsx)(rt,{})]}),(0,e.jsx)(Ut,j()({open:h,onCancel:function(){return S(!1)}},o))]})},$t=zt}}]);
