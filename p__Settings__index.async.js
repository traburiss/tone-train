"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[471],{67849:function(st,L,i){i.d(L,{An:function(){return I},CV:function(){return at},Dz:function(){return y},F6:function(){return X},Gg:function(){return W},L3:function(){return p},LB:function(){return s},N7:function(){return J},OG:function(){return c},Qx:function(){return r},Ry:function(){return $},W4:function(){return D},Yi:function(){return Q},Z:function(){return H},Zf:function(){return o},aj:function(){return Z},cS:function(){return et},f1:function(){return Y},qL:function(){return u},qx:function(){return V},sO:function(){return nt},sw:function(){return k}});var z="Umi Max",D="GuitarChords",J=[{label:"option.tone-type.guitar-chords",value:"GuitarChords"},{label:"option.tone-type.12-tone",value:"12-Tone"},{label:"option.tone-type.8-tone",value:"8-Tone"}],c="guitar-acoustic",u=[{label:"option.instrument.guitar-acoustic",value:"guitar-acoustic"},{label:"option.instrument.guitar-electric",value:"guitar-electric"},{label:"option.instrument.piano",value:"piano"}],Z=["C","D","E","F","G","A","B"],I=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],y=[2,3,4,5,6],U=y.flatMap(function(v){return Z.map(function(m){return"".concat(m).concat(v)})}),G=y.flatMap(function(v){return I.map(function(m){return"".concat(m).concat(v)})}),k=["C","D","E","F","G","A","B","Em","Am","Dm","Bm","F#m","C#m","Gm","C5","D5","E5","F5","G5","A5","B5","G7","C7","D7","E7","A7","B7","Cmaj7","Gmaj7","Fmaj7","Amaj7","Am7","Em7","Dm7","Bm7","F#m7","Dsus4","Asus4","Esus4","D/F#","C/G","G/B"],W=["C","D","G","A","Em","Am","Dm"],N=["C","D","G","A","Em","Am","Dm"],V=[{label:"option.loop-count.infinite",value:"0"},{label:"option.loop-count.n-times",value:"20"},{label:"option.loop-count.n-times",value:"50"},{label:"option.loop-count.n-times",value:"200"},{label:"option.loop-count.custom",value:"custom"}],C=!0,_=!1,E=1500,n=!1,l=1500,r=100,o=10*1e3,s=100,p=function(m){return function(T){var h=Number(T);if(isNaN(h))return"".concat(T);var e=m.formatMessage({id:"formatter.millisecond"});if(h<1e3)return"".concat(h).concat(e);var g=Math.floor(h/1e3),A=h%1e3,x=m.formatMessage({id:"formatter.second"});if(g<60)return A===0?"".concat(g).concat(x):"".concat(g).concat(x).concat(A).concat(e);var F=Math.floor(g/60),R=g%60,j=m.formatMessage({id:"formatter.minute"});return R===0&&A===0?"".concat(F).concat(j).concat(A).concat(e):"".concat(F).concat(j).concat(R).concat(x).concat(A).concat(e)}},b=function(m){var T=Number(m);if(isNaN(T))return"".concat(m);var h=Math.floor(T/1e3),e="";if(h<60)e="".concat(h,"s");else{var g=Math.floor(h/60),A=h%60;e="".concat(g,"m"),A>0&&(e+="".concat(A,"s"))}return"".concat(T," ms (").concat(e,")")},K=1e3,w=1500,q=2e3,t=1,tt=!0,et=[{label:"C2",value:"C2"},{label:"C3",value:"C3"},{label:"C4",value:"C4"},{label:"C5",value:"C5"},{label:"C6",value:"C6"}],nt={toneType:D,instrumentName:c,toneList:N,toneDuration:K,toneWait:w,ttsEnable:C,ttsWait:q,ttsRate:t,ttsSolfege:_,ttsSolfegeWait:E,ttsNotation:n,ttsNotationWait:l,random:tt,loopCount:0,referenceNoteEnabled:!1,referenceNote:"C4"},Y="mta:cfg:",at="mta:sta:",X="tones:training",$="tones:identification",H="vocal:ma-exercise",Q=[{name:"menu.instrument.tone-training",key:X},{name:"menu.instrument.tone-identification",key:$},{name:"vocal.ma-exercise.title",key:H}]},90521:function(st,L,i){i.r(L),i.d(L,{default:function(){return H}});var z=i(48305),D=i.n(z),J=i(67849),c=i(6946),u=i(18022),Z=i(80788),I=i(9015),y=i(76350),U=i(30244),G=i(78732),k=i(2866),W=i(5318),N=i(440),V=i(82238),C=i(30933),_=i(1073),E=i(52402),n=i(70439),l=i(17121),r=i(33717),o=i(91521),s=i(75271),p=i(90228),b=i.n(p),K=i(87999),w=i.n(K),q=i(8481),t=i(52676),tt=function(v){var m=v.value,T=v.onChange,h=v.height,e=h===void 0?"300px":h,g=v.language,A=g===void 0?"json":g,x=v.readonly,F=x===void 0?!1:x,R=function(P){T&&T(P)};return(0,t.jsx)("div",{style:{border:"1px solid #d9d9d9",borderRadius:"4px",overflow:"auto",resize:"vertical",height:e},children:(0,t.jsx)(q.ZP,{height:"100%",language:A,value:m,onChange:R,options:{minimap:{enabled:!1},fontSize:13,scrollBeyondLastLine:!1,automaticLayout:!0,readOnly:F,tabSize:2,formatOnPaste:!0,formatOnType:!0}})})},et=tt,nt=i(69334),Y=i(40624),at=function(v){var m=v.storageKey,T=v.name,h=v.initialValue,e=v.onSaved,g=Y.A.useForm(),A=D()(g,1),x=A[0];(0,s.useEffect)(function(){x.setFieldsValue({json:JSON.stringify(h,null,2)})},[h]);var F=function(){var R=w()(b()().mark(function j(P){return b()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:_.Z.confirm({title:"\u786E\u8BA4\u4FDD\u5B58\u914D\u7F6E\u5417\uFF1F",content:"\u786E\u8BA4\u4FDD\u5B58 ".concat(T," (key: ").concat(m,") \u7684\u914D\u7F6E\u5417\uFF1F"),okText:"\u786E\u8BA4",okType:"primary",onOk:function(){try{var a=JSON.parse(P.json);(0,c.pd)(m,a,T),C.ZP.success("".concat(T," \u4FDD\u5B58\u6210\u529F")),e()}catch(f){C.ZP.error("\u4FDD\u5B58\u5931\u8D25\uFF1AJSON \u8BED\u6CD5\u9519\u8BEF")}}});case 1:case"end":return B.stop()}},j)}));return function(P){return R.apply(this,arguments)}}();return(0,t.jsx)(N.Z,{title:(0,t.jsx)("span",{className:"font-bold text-primary",children:T}),subTitle:(0,t.jsxs)("code",{className:"text-xs text-secondary opacity-60 ml-2",children:["Key: ",m]}),className:"mb-4 shadow-sm",collapsible:!0,defaultCollapsed:!0,children:(0,t.jsx)(Y.A,{form:x,onFinish:F,submitter:{render:function(j){return(0,t.jsx)(n.ZP,{type:"primary",icon:(0,t.jsx)(nt.Z,{}),onClick:function(){return j.submit()},children:"\u4FDD\u5B58\u672C\u9879\u4FEE\u6539"})}},children:(0,t.jsx)(Y.A.Item,{name:"json",label:"\u914D\u7F6E\u503C",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u914D\u7F6E\u5185\u5BB9"}],children:(0,t.jsx)(et,{height:"300px"})})})})},X=at,$=function(){var v=(0,s.useState)({}),m=D()(v,2),T=m[0],h=m[1],e=(0,V.useIntl)(),g=function(){h((0,c.GR)())};(0,s.useEffect)(function(){g()},[]);var A=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,f=a===null?{settings:(0,c.GR)(),stats:(0,c.Jm)()}:{settings:(0,c.Tp)(a,{}),stats:(0,c.fy)(a,{})},M=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),O=URL.createObjectURL(M),d=document.createElement("a");d.href=O,d.download="mta-all-data-".concat(new Date().toISOString().split("T")[0],".json"),d.click(),URL.revokeObjectURL(O),C.ZP.success(a===null?e.formatMessage({id:"settings.export.all.success"}):e.formatMessage({id:"settings.export.config.success"},{key:a}))},x=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,f=a===null?(0,c.GR)():(0,c.Tp)(a,{}),M=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),O=URL.createObjectURL(M),d=document.createElement("a");d.href=O,d.download="mta-config-only-".concat(new Date().toISOString().split("T")[0],".json"),d.click(),URL.revokeObjectURL(O),C.ZP.success(a===null?e.formatMessage({id:"settings.export.config.success"},{key:"all"}):e.formatMessage({id:"settings.export.config.success"},{key:a}))},F=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,f=a===null?(0,c.Jm)():(0,c.fy)(a,{}),M=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),O=URL.createObjectURL(M),d=document.createElement("a");d.href=O,d.download="mta-stats-only-".concat(new Date().toISOString().split("T")[0],".json"),d.click(),URL.revokeObjectURL(O),C.ZP.success(a===null?e.formatMessage({id:"settings.export.stats.success"}):e.formatMessage({id:"settings.export.stats-item.success"},{key:a}))},R=function(a){var f=new FileReader;return f.onload=function(M){try{var O,d=JSON.parse((O=M.target)===null||O===void 0?void 0:O.result);(0,c.QM)(d),C.ZP.success(e.formatMessage({id:"settings.import.success"})),g()}catch(ot){C.ZP.error(e.formatMessage({id:"settings.import.error"}))}},f.readAsText(a),!1},j=function(a,f,M){_.Z.confirm({title:a,content:f,okText:e.formatMessage({id:"settings.clear.confirm-ok"}),okType:"danger",onOk:M})},P=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;j(a===null?e.formatMessage({id:"settings.clear.all-confirm-title"}):e.formatMessage({id:"settings.clear.item-confirm-title"},{key:a}),a===null?e.formatMessage({id:"settings.clear.all-confirm-content"}):e.formatMessage({id:"settings.clear.item-confirm-content"},{key:a}),function(){a===null?((0,c.qt)(),(0,c.oB)()):((0,c.bA)(a),(0,c.lv)(a)),C.ZP.success(a===null?e.formatMessage({id:"settings.clear.all.success"}):e.formatMessage({id:"settings.clear.item.success"},{key:a})),g()})},rt=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;j(a===null?e.formatMessage({id:"settings.clear.all-config-confirm-title"}):e.formatMessage({id:"settings.clear.item-config-confirm-title"},{key:a}),a===null?e.formatMessage({id:"settings.clear.all-config-confirm-content"}):e.formatMessage({id:"settings.clear.item-config-confirm-content"},{key:a}),function(){a===null?(0,c.qt)():(0,c.bA)(a),C.ZP.success(a===null?e.formatMessage({id:"settings.clear.config.success"}):e.formatMessage({id:"settings.clear.config-item.success"},{key:a})),g()})},B=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;j(a===null?e.formatMessage({id:"settings.clear.all-stats-confirm-title"}):e.formatMessage({id:"settings.clear.item-stats-confirm-title"},{key:a}),a===null?e.formatMessage({id:"settings.clear.all-stats-confirm-content"}):e.formatMessage({id:"settings.clear.item-stats-confirm-content"},{key:a}),function(){a===null?(0,c.oB)():(0,c.lv)(a),C.ZP.success(a===null?e.formatMessage({id:"settings.clear.stats.success"}):e.formatMessage({id:"settings.clear.stats-item.success"},{key:a})),g()})};return(0,t.jsxs)(W._z,{title:e.formatMessage({id:"settings.title"}),children:[(0,t.jsxs)(N.Z,{title:e.formatMessage({id:"settings.global-actions"}),gutter:[16,16],wrap:!0,ghost:!0,children:[(0,t.jsx)(N.Z,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Z,{})," ",e.formatMessage({id:"settings.export.title"})]}),colSpan:{xs:24,md:8},bordered:!0,hoverable:!0,children:(0,t.jsxs)(E.Z,{size:"middle",align:"start",wrap:!0,children:[(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(Z.Z,{}),onClick:function(){return A(null)},children:e.formatMessage({id:"settings.export.all"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(I.Z,{}),onClick:function(){return x(null)},children:e.formatMessage({id:"settings.export.config"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(y.Z,{}),onClick:function(){return F(null)},children:e.formatMessage({id:"settings.export.stats"})})]})}),(0,t.jsx)(N.Z,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U.Z,{})," ",e.formatMessage({id:"settings.import.title"})]}),colSpan:{xs:24,md:8},bordered:!0,hoverable:!0,children:(0,t.jsx)(l.Z,{beforeUpload:R,showUploadList:!1,accept:".json",children:(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(U.Z,{}),type:"primary",children:e.formatMessage({id:"settings.import.button"})})})}),(0,t.jsx)(N.Z,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G.Z,{})," ",e.formatMessage({id:"settings.clear.title"})]}),colSpan:{xs:24,md:8},bordered:!0,hoverable:!0,children:(0,t.jsxs)(E.Z,{size:"middle",align:"start",wrap:!0,children:[(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(k.Z,{}),danger:!0,onClick:function(){return P(null)},children:e.formatMessage({id:"settings.clear.all"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(G.Z,{}),danger:!0,onClick:function(){return rt(null)},children:e.formatMessage({id:"settings.clear.config"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(y.Z,{}),danger:!0,onClick:function(){return B(null)},children:e.formatMessage({id:"settings.clear.stats"})})]})})]}),(0,t.jsx)(N.Z,{title:e.formatMessage({id:"settings.item-actions"}),gutter:[16,16],wrap:!0,ghost:!0,children:J.Yi.map(function(S){var a,f=S.key,M=S.name,O=T[f];return(0,t.jsx)(N.Z,{title:e.formatMessage({id:M}),colSpan:{xs:24,md:8},layout:"center",bordered:!0,hoverable:!0,children:(0,t.jsxs)(r.Z,{gutter:[16,16],children:[(0,t.jsx)(o.Z,{span:24,children:(0,t.jsxs)(E.Z,{size:"middle",align:"start",wrap:!0,children:[(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(Z.Z,{}),onClick:function(){return A(f)},children:e.formatMessage({id:"settings.export.all"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(I.Z,{}),onClick:function(){return x(f)},children:e.formatMessage({id:"settings.export.config.success"},{key:"mta:cfg"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(y.Z,{}),onClick:function(){return F(f)},children:e.formatMessage({id:"settings.export.stats-item.success"},{key:"mta:sta"})})]})}),(0,t.jsx)(o.Z,{span:24,children:(0,t.jsxs)(E.Z,{size:"middle",wrap:!0,children:[(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(k.Z,{}),danger:!0,onClick:function(){return P(f)},children:e.formatMessage({id:"settings.clear.all"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(G.Z,{}),danger:!0,onClick:function(){return rt(f)},children:e.formatMessage({id:"settings.clear.config"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(y.Z,{}),danger:!0,onClick:function(){return B(f)},children:e.formatMessage({id:"settings.clear.stats"})})]})}),(0,t.jsx)(o.Z,{span:24,children:(0,t.jsx)(X,{storageKey:f,name:e.formatMessage({id:M}),initialValue:(a=O==null?void 0:O.value)!==null&&a!==void 0?a:{},onSaved:g},f)})]})},"config-cart-".concat(f))})})]})},H=$},6946:function(st,L,i){i.d(L,{GR:function(){return G},Jm:function(){return k},QM:function(){return W},Tp:function(){return Z},_Y:function(){return U},bA:function(){return V},fy:function(){return y},lv:function(){return _},oB:function(){return C},pd:function(){return I},qt:function(){return N}});var z=i(48305),D=i.n(z),J=i(31759),c=i.n(J),u=i(67849),Z=function(n,l){var r=localStorage.getItem("".concat(u.f1).concat(n));if(!r&&n==="tones:training"){var o=localStorage.getItem("music-teaching-assistant-settings");if(o)return localStorage.setItem("".concat(u.f1).concat(n),o),JSON.parse(o)}if(!r)return l;try{var s=JSON.parse(r);return s&&c()(s)==="object"&&"name"in s&&"value"in s?s.value:s}catch(p){return console.error("Failed to parse settings for ".concat(n),p),l}},I=function(n,l,r){var o=localStorage.getItem("".concat(u.f1).concat(n)),s=r;if(!s&&o)try{var p=JSON.parse(o);p!=null&&p.name&&(s=p.name)}catch(K){}var b={name:s||n,value:l,updatedAt:Date.now()};localStorage.setItem("".concat(u.f1).concat(n),JSON.stringify(b))},y=function(n,l){var r=localStorage.getItem("".concat(u.CV).concat(n));if(!r)return l;try{var o=JSON.parse(r);return o&&c()(o)==="object"&&"name"in o&&"value"in o?o.value:o}catch(s){return console.error("Failed to parse stats for ".concat(n),s),l}},U=function(n,l,r){var o=localStorage.getItem("".concat(u.CV).concat(n)),s=r;if(!s&&o)try{var p=JSON.parse(o);p!=null&&p.name&&(s=p.name)}catch(K){}var b={name:s||n,value:l,updatedAt:Date.now()};localStorage.setItem("".concat(u.CV).concat(n),JSON.stringify(b))},G=function(){for(var n={},l=0;l<localStorage.length;l++){var r=localStorage.key(l);if(r!=null&&r.startsWith(u.f1)){var o=localStorage.getItem(r);if(o)try{n[r.replace(u.f1,"")]=JSON.parse(o)}catch(s){console.error("Failed to parse all settings for key ".concat(r),s)}}}return n},k=function(){for(var n={},l=0;l<localStorage.length;l++){var r=localStorage.key(l);if(r!=null&&r.startsWith(u.CV)){var o=localStorage.getItem(r);if(o)try{n[r.replace(u.CV,"")]=JSON.parse(o)}catch(s){console.error("Failed to parse all stats for key ".concat(r),s)}}}return n},W=function(n){if(n&&c()(n)==="object"){if(n.settings||n.stats){n.settings&&Object.entries(n.settings).forEach(function(l){var r=D()(l,2),o=r[0],s=r[1];s&&c()(s)==="object"&&"name"in s&&"value"in s?localStorage.setItem("".concat(u.f1).concat(o),JSON.stringify(s)):I(o,s,o)}),n.stats&&Object.entries(n.stats).forEach(function(l){var r=D()(l,2),o=r[0],s=r[1];s&&c()(s)==="object"&&"name"in s&&"value"in s?localStorage.setItem("".concat(u.CV).concat(o),JSON.stringify(s)):U(o,s,o)});return}Object.entries(n).forEach(function(l){var r=D()(l,2),o=r[0],s=r[1];s&&c()(s)==="object"&&"name"in s&&"value"in s?localStorage.setItem("".concat(u.f1).concat(o),JSON.stringify(s)):I(o,s,o)})}},N=function(){for(var n=[],l=0;l<localStorage.length;l++){var r=localStorage.key(l);r!=null&&r.startsWith(u.f1)&&n.push(r)}n.forEach(function(o){return localStorage.removeItem(o)})},V=function(n){localStorage.removeItem("".concat(u.f1).concat(n))},C=function(){for(var n=[],l=0;l<localStorage.length;l++){var r=localStorage.key(l);r!=null&&r.startsWith(u.CV)&&n.push(r)}n.forEach(function(o){return localStorage.removeItem(o)})},_=function(n){localStorage.removeItem("".concat(u.CV).concat(n))}}}]);
