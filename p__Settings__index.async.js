"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[471],{69454:function(st,U,i){i.d(U,{An:function(){return y},CV:function(){return nt},Dz:function(){return j},F6:function(){return X},Gg:function(){return V},L3:function(){return O},LB:function(){return s},N7:function(){return W},OG:function(){return c},Qx:function(){return r},Ry:function(){return H},W4:function(){return N},Yi:function(){return at},Zf:function(){return o},aj:function(){return b},cS:function(){return tt},f1:function(){return Y},qL:function(){return f},qx:function(){return K},sO:function(){return et},sw:function(){return B}});var $="Umi Max",N="GuitarChords",W=[{label:"option.tone-type.guitar-chords",value:"GuitarChords"},{label:"option.tone-type.12-tone",value:"12-Tone"},{label:"option.tone-type.8-tone",value:"8-Tone"}],c="guitar-acoustic",f=[{label:"option.instrument.guitar-acoustic",value:"guitar-acoustic"},{label:"option.instrument.guitar-electric",value:"guitar-electric"},{label:"option.instrument.piano",value:"piano"}],b=["C","D","E","F","G","A","B"],y=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],j=[2,3,4,5,6],G=j.flatMap(function(F){return b.map(function(u){return"".concat(u).concat(F)})}),k=j.flatMap(function(F){return y.map(function(u){return"".concat(u).concat(F)})}),B=["C","D","E","F","G","A","B","Em","Am","Dm","Bm","F#m","C#m","Gm","C5","D5","E5","F5","G5","A5","B5","G7","C7","D7","E7","A7","B7","Cmaj7","Gmaj7","Fmaj7","Amaj7","Am7","Em7","Dm7","Bm7","F#m7","Dsus4","Asus4","Esus4","D/F#","C/G","G/B"],V=["C","D","G","A","Em","Am","Dm"],x=["C","D","G","A","Em","Am","Dm"],K=[{label:"option.loop-count.infinite",value:"0"},{label:"20\u6B21",value:"20"},{label:"50\u6B21",value:"50"},{label:"200\u6B21",value:"200"},{label:"option.loop-count.custom",value:"custom"}],C=!0,_=!1,h=1500,n=!1,l=1500,r=100,o=10*1e3,s=100,O=function(u){return function(A){var d=Number(A);if(isNaN(d))return"".concat(A);var S=Math.floor(d/1e3),e="",T=u.formatMessage({id:"formatter.second"}),R=u.formatMessage({id:"formatter.minute"}),M=u.formatMessage({id:"formatter.millisecond"});if(S<60)e="".concat(S).concat(T);else{var P=Math.floor(S/60),D=S%60;e="".concat(P).concat(R),D>0&&(e+="".concat(D).concat(T))}return"".concat(d," ").concat(M," (").concat(e,")")}},L=function(u){var A=Number(u);if(isNaN(A))return"".concat(u);var d=Math.floor(A/1e3),S="";if(d<60)S="".concat(d,"s");else{var e=Math.floor(d/60),T=d%60;S="".concat(e,"m"),T>0&&(S+="".concat(T,"s"))}return"".concat(A," ms (").concat(S,")")},z=1e3,Q=1500,w=2e3,t=1,q=!0,tt=[{label:"C2",value:"C2"},{label:"C3",value:"C3"},{label:"C4",value:"C4"},{label:"C5",value:"C5"},{label:"C6",value:"C6"}],et={toneType:N,instrumentName:c,toneList:x,toneDuration:z,toneWait:Q,ttsEnable:C,ttsWait:w,ttsRate:t,ttsSolfege:_,ttsSolfegeWait:h,ttsNotation:n,ttsNotationWait:l,random:q,loopCount:0,referenceNoteEnabled:!1,referenceNote:"C4"},Y="mta:cfg:",nt="mta:sta:",X="tones:training",H="tones:identification",at=[{name:"menu.instrument.tone-training",key:X},{name:"menu.instrument.tone-identification",key:H}]},77223:function(st,U,i){i.r(U),i.d(U,{default:function(){return at}});var $=i(48305),N=i.n($),W=i(69454),c=i(7901),f=i(18022),b=i(80788),y=i(9015),j=i(76350),G=i(30244),k=i(78732),B=i(2866),V=i(5318),x=i(440),K=i(91056),C=i(30933),_=i(1073),h=i(52402),n=i(70439),l=i(17121),r=i(33717),o=i(91521),s=i(75271),O=i(90228),L=i.n(O),z=i(87999),Q=i.n(z),w=i(8481),t=i(52676),q=function(u){var A=u.value,d=u.onChange,S=u.height,e=S===void 0?"300px":S,T=u.language,R=T===void 0?"json":T,M=u.readonly,P=M===void 0?!1:M,D=function(Z){d&&d(Z)};return(0,t.jsx)("div",{style:{border:"1px solid #d9d9d9",borderRadius:"4px",overflow:"auto",resize:"vertical",height:e},children:(0,t.jsx)(w.ZP,{height:"100%",language:R,value:A,onChange:D,options:{minimap:{enabled:!1},fontSize:13,scrollBeyondLastLine:!1,automaticLayout:!0,readOnly:P,tabSize:2,formatOnPaste:!0,formatOnType:!0}})})},tt=q,et=i(69334),Y=i(40624),nt=function(u){var A=u.storageKey,d=u.name,S=u.initialValue,e=u.onSaved,T=Y.A.useForm(),R=N()(T,1),M=R[0];(0,s.useEffect)(function(){M.setFieldsValue({json:JSON.stringify(S,null,2)})},[S]);var P=function(){var D=Q()(L()().mark(function I(Z){return L()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:_.Z.confirm({title:"\u786E\u8BA4\u4FDD\u5B58\u914D\u7F6E\u5417\uFF1F",content:"\u786E\u8BA4\u4FDD\u5B58 ".concat(d," (key: ").concat(A,") \u7684\u914D\u7F6E\u5417\uFF1F"),okText:"\u786E\u8BA4",okType:"primary",onOk:function(){try{var a=JSON.parse(Z.json);(0,c.pd)(A,a,d),C.ZP.success("".concat(d," \u4FDD\u5B58\u6210\u529F")),e()}catch(m){C.ZP.error("\u4FDD\u5B58\u5931\u8D25\uFF1AJSON \u8BED\u6CD5\u9519\u8BEF")}}});case 1:case"end":return J.stop()}},I)}));return function(Z){return D.apply(this,arguments)}}();return(0,t.jsx)(x.Z,{title:(0,t.jsx)("span",{className:"font-bold text-primary",children:d}),subTitle:(0,t.jsxs)("code",{className:"text-xs text-secondary opacity-60 ml-2",children:["Key: ",A]}),className:"mb-4 shadow-sm",collapsible:!0,defaultCollapsed:!0,children:(0,t.jsx)(Y.A,{form:M,onFinish:P,submitter:{render:function(I){return(0,t.jsx)(n.ZP,{type:"primary",icon:(0,t.jsx)(et.Z,{}),onClick:function(){return I.submit()},children:"\u4FDD\u5B58\u672C\u9879\u4FEE\u6539"})}},children:(0,t.jsx)(Y.A.Item,{name:"json",label:"\u914D\u7F6E\u503C",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u914D\u7F6E\u5185\u5BB9"}],children:(0,t.jsx)(tt,{height:"300px"})})})})},X=nt,H=function(){var u=(0,s.useState)({}),A=N()(u,2),d=A[0],S=A[1],e=(0,K.useIntl)(),T=function(){S((0,c.GR)())};(0,s.useEffect)(function(){T()},[]);var R=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,m=a===null?{settings:(0,c.GR)(),stats:(0,c.Jm)()}:{settings:(0,c.Tp)(a,{}),stats:(0,c.fy)(a,{})},p=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),E=URL.createObjectURL(p),g=document.createElement("a");g.href=E,g.download="mta-all-data-".concat(new Date().toISOString().split("T")[0],".json"),g.click(),URL.revokeObjectURL(E),C.ZP.success(a===null?e.formatMessage({id:"settings.export.all.success"}):e.formatMessage({id:"settings.export.config.success"},{key:a}))},M=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,m=a===null?(0,c.GR)():(0,c.Tp)(a,{}),p=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),E=URL.createObjectURL(p),g=document.createElement("a");g.href=E,g.download="mta-config-only-".concat(new Date().toISOString().split("T")[0],".json"),g.click(),URL.revokeObjectURL(E),C.ZP.success(a===null?e.formatMessage({id:"settings.export.config.success"},{key:"all"}):e.formatMessage({id:"settings.export.config.success"},{key:a}))},P=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,m=a===null?(0,c.Jm)():(0,c.fy)(a,{}),p=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),E=URL.createObjectURL(p),g=document.createElement("a");g.href=E,g.download="mta-stats-only-".concat(new Date().toISOString().split("T")[0],".json"),g.click(),URL.revokeObjectURL(E),C.ZP.success(a===null?e.formatMessage({id:"settings.export.stats.success"}):e.formatMessage({id:"settings.export.stats-item.success"},{key:a}))},D=function(a){var m=new FileReader;return m.onload=function(p){try{var E,g=JSON.parse((E=p.target)===null||E===void 0?void 0:E.result);(0,c.QM)(g),C.ZP.success(e.formatMessage({id:"settings.import.success"})),T()}catch(ot){C.ZP.error(e.formatMessage({id:"settings.import.error"}))}},m.readAsText(a),!1},I=function(a,m,p){_.Z.confirm({title:a,content:m,okText:e.formatMessage({id:"settings.clear.confirm-ok"}),okType:"danger",onOk:p})},Z=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;I(a===null?e.formatMessage({id:"settings.clear.all-confirm-title"}):e.formatMessage({id:"settings.clear.item-confirm-title"},{key:a}),a===null?e.formatMessage({id:"settings.clear.all-confirm-content"}):e.formatMessage({id:"settings.clear.item-confirm-content"},{key:a}),function(){a===null?((0,c.qt)(),(0,c.oB)()):((0,c.bA)(a),(0,c.lv)(a)),C.ZP.success(a===null?e.formatMessage({id:"settings.clear.all.success"}):e.formatMessage({id:"settings.clear.item.success"},{key:a})),T()})},rt=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;I(a===null?e.formatMessage({id:"settings.clear.all-config-confirm-title"}):e.formatMessage({id:"settings.clear.item-config-confirm-title"},{key:a}),a===null?e.formatMessage({id:"settings.clear.all-config-confirm-content"}):e.formatMessage({id:"settings.clear.item-config-confirm-content"},{key:a}),function(){a===null?(0,c.qt)():(0,c.bA)(a),C.ZP.success(a===null?e.formatMessage({id:"settings.clear.config.success"}):e.formatMessage({id:"settings.clear.config-item.success"},{key:a})),T()})},J=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;I(a===null?e.formatMessage({id:"settings.clear.all-stats-confirm-title"}):e.formatMessage({id:"settings.clear.item-stats-confirm-title"},{key:a}),a===null?e.formatMessage({id:"settings.clear.all-stats-confirm-content"}):e.formatMessage({id:"settings.clear.item-stats-confirm-content"},{key:a}),function(){a===null?(0,c.oB)():(0,c.lv)(a),C.ZP.success(a===null?e.formatMessage({id:"settings.clear.stats.success"}):e.formatMessage({id:"settings.clear.stats-item.success"},{key:a})),T()})};return(0,t.jsxs)(V._z,{title:e.formatMessage({id:"settings.title"}),children:[(0,t.jsxs)(x.Z,{title:e.formatMessage({id:"settings.global-actions"}),gutter:[16,16],wrap:!0,ghost:!0,children:[(0,t.jsx)(x.Z,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.Z,{})," ",e.formatMessage({id:"settings.export.title"})]}),colSpan:{xs:24,sm:12,md:8},bordered:!0,hoverable:!0,children:(0,t.jsxs)(h.Z,{size:"middle",align:"start",wrap:!0,children:[(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(b.Z,{}),onClick:function(){return R(null)},children:e.formatMessage({id:"settings.export.all"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(y.Z,{}),onClick:function(){return M(null)},children:e.formatMessage({id:"settings.export.config"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(j.Z,{}),onClick:function(){return P(null)},children:e.formatMessage({id:"settings.export.stats"})})]})}),(0,t.jsx)(x.Z,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G.Z,{})," ",e.formatMessage({id:"settings.import.title"})]}),colSpan:{xs:24,sm:12,md:8},bordered:!0,hoverable:!0,children:(0,t.jsx)(l.Z,{beforeUpload:D,showUploadList:!1,accept:".json",children:(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(G.Z,{}),type:"primary",children:e.formatMessage({id:"settings.import.button"})})})}),(0,t.jsx)(x.Z,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.Z,{})," ",e.formatMessage({id:"settings.clear.title"})]}),colSpan:{xs:24,sm:12,md:8},bordered:!0,hoverable:!0,children:(0,t.jsxs)(h.Z,{size:"middle",align:"start",wrap:!0,children:[(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(B.Z,{}),danger:!0,onClick:function(){return Z(null)},children:e.formatMessage({id:"settings.clear.all"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(k.Z,{}),danger:!0,onClick:function(){return rt(null)},children:e.formatMessage({id:"settings.clear.config"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(j.Z,{}),danger:!0,onClick:function(){return J(null)},children:e.formatMessage({id:"settings.clear.stats"})})]})})]}),(0,t.jsx)(x.Z,{title:e.formatMessage({id:"settings.item-actions"}),gutter:[16,16],wrap:!0,ghost:!0,children:W.Yi.map(function(v){var a,m=v.key,p=v.name,E=d[m];return(0,t.jsx)(x.Z,{title:e.formatMessage({id:p}),colSpan:{xs:24,sm:12,md:8},layout:"center",bordered:!0,hoverable:!0,children:(0,t.jsxs)(r.Z,{gutter:[16,16],children:[(0,t.jsx)(o.Z,{span:24,children:(0,t.jsxs)(h.Z,{size:"middle",align:"start",wrap:!0,children:[(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(b.Z,{}),onClick:function(){return R(m)},children:e.formatMessage({id:"settings.export.all"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(y.Z,{}),onClick:function(){return M(m)},children:e.formatMessage({id:"settings.export.config.success"},{key:"mta:cfg"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(j.Z,{}),onClick:function(){return P(m)},children:e.formatMessage({id:"settings.export.stats-item.success"},{key:"mta:sta"})})]})}),(0,t.jsx)(o.Z,{span:24,children:(0,t.jsxs)(h.Z,{size:"middle",wrap:!0,children:[(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(B.Z,{}),danger:!0,onClick:function(){return Z(m)},children:e.formatMessage({id:"settings.clear.all"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(k.Z,{}),danger:!0,onClick:function(){return rt(m)},children:e.formatMessage({id:"settings.clear.config"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(j.Z,{}),danger:!0,onClick:function(){return J(m)},children:e.formatMessage({id:"settings.clear.stats"})})]})}),(0,t.jsx)(o.Z,{span:24,children:(0,t.jsx)(X,{storageKey:m,name:e.formatMessage({id:p}),initialValue:(a=E==null?void 0:E.value)!==null&&a!==void 0?a:{},onSaved:T},m)})]})},"config-cart-".concat(m))})})]})},at=H},7901:function(st,U,i){i.d(U,{GR:function(){return k},Jm:function(){return B},QM:function(){return V},Tp:function(){return b},_Y:function(){return G},bA:function(){return K},fy:function(){return j},lv:function(){return _},oB:function(){return C},pd:function(){return y},qt:function(){return x}});var $=i(48305),N=i.n($),W=i(31759),c=i.n(W),f=i(69454),b=function(n,l){var r=localStorage.getItem("".concat(f.f1).concat(n));if(!r&&n==="tones:training"){var o=localStorage.getItem("music-teaching-assistant-settings");if(o)return localStorage.setItem("".concat(f.f1).concat(n),o),JSON.parse(o)}if(!r)return l;try{var s=JSON.parse(r);return s&&c()(s)==="object"&&"name"in s&&"value"in s?s.value:s}catch(O){return console.error("Failed to parse settings for ".concat(n),O),l}},y=function(n,l,r){var o=localStorage.getItem("".concat(f.f1).concat(n)),s=r;if(!s&&o)try{var O=JSON.parse(o);O!=null&&O.name&&(s=O.name)}catch(z){}var L={name:s||n,value:l,updatedAt:Date.now()};localStorage.setItem("".concat(f.f1).concat(n),JSON.stringify(L))},j=function(n,l){var r=localStorage.getItem("".concat(f.CV).concat(n));if(!r)return l;try{var o=JSON.parse(r);return o&&c()(o)==="object"&&"name"in o&&"value"in o?o.value:o}catch(s){return console.error("Failed to parse stats for ".concat(n),s),l}},G=function(n,l,r){var o=localStorage.getItem("".concat(f.CV).concat(n)),s=r;if(!s&&o)try{var O=JSON.parse(o);O!=null&&O.name&&(s=O.name)}catch(z){}var L={name:s||n,value:l,updatedAt:Date.now()};localStorage.setItem("".concat(f.CV).concat(n),JSON.stringify(L))},k=function(){for(var n={},l=0;l<localStorage.length;l++){var r=localStorage.key(l);if(r!=null&&r.startsWith(f.f1)){var o=localStorage.getItem(r);if(o)try{n[r.replace(f.f1,"")]=JSON.parse(o)}catch(s){console.error("Failed to parse all settings for key ".concat(r),s)}}}return n},B=function(){for(var n={},l=0;l<localStorage.length;l++){var r=localStorage.key(l);if(r!=null&&r.startsWith(f.CV)){var o=localStorage.getItem(r);if(o)try{n[r.replace(f.CV,"")]=JSON.parse(o)}catch(s){console.error("Failed to parse all stats for key ".concat(r),s)}}}return n},V=function(n){if(n&&c()(n)==="object"){if(n.settings||n.stats){n.settings&&Object.entries(n.settings).forEach(function(l){var r=N()(l,2),o=r[0],s=r[1];s&&c()(s)==="object"&&"name"in s&&"value"in s?localStorage.setItem("".concat(f.f1).concat(o),JSON.stringify(s)):y(o,s,o)}),n.stats&&Object.entries(n.stats).forEach(function(l){var r=N()(l,2),o=r[0],s=r[1];s&&c()(s)==="object"&&"name"in s&&"value"in s?localStorage.setItem("".concat(f.CV).concat(o),JSON.stringify(s)):G(o,s,o)});return}Object.entries(n).forEach(function(l){var r=N()(l,2),o=r[0],s=r[1];s&&c()(s)==="object"&&"name"in s&&"value"in s?localStorage.setItem("".concat(f.f1).concat(o),JSON.stringify(s)):y(o,s,o)})}},x=function(){for(var n=[],l=0;l<localStorage.length;l++){var r=localStorage.key(l);r!=null&&r.startsWith(f.f1)&&n.push(r)}n.forEach(function(o){return localStorage.removeItem(o)})},K=function(n){localStorage.removeItem("".concat(f.f1).concat(n))},C=function(){for(var n=[],l=0;l<localStorage.length;l++){var r=localStorage.key(l);r!=null&&r.startsWith(f.CV)&&n.push(r)}n.forEach(function(o){return localStorage.removeItem(o)})},_=function(n){localStorage.removeItem("".concat(f.CV).concat(n))}}}]);
