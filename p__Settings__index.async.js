"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[471],{79497:function(ot,L,i){i.d(L,{An:function(){return P},CV:function(){return rt},Dz:function(){return D},F6:function(){return H},Gg:function(){return V},L3:function(){return O},LB:function(){return o},N7:function(){return W},OG:function(){return c},Qx:function(){return r},Ry:function(){return Q},W4:function(){return F},Yi:function(){return I},Z:function(){return w},Zf:function(){return s},aj:function(){return Z},cS:function(){return nt},f1:function(){return z},kk:function(){return A},n2:function(){return X},qL:function(){return u},qx:function(){return K},sO:function(){return at},sw:function(){return k}});var $="Umi Max",F="GuitarChords",W=[{label:"option.tone-type.guitar-chords",value:"GuitarChords"},{label:"option.tone-type.12-tone",value:"12-Tone"},{label:"option.tone-type.8-tone",value:"8-Tone"}],c="guitar-acoustic",u=[{label:"option.instrument.guitar-acoustic",value:"guitar-acoustic"},{label:"option.instrument.guitar-electric",value:"guitar-electric"},{label:"option.instrument.piano",value:"piano"}],Z=["C","D","E","F","G","A","B"],P=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],D=[2,3,4,5,6],U=D.flatMap(function(C){return Z.map(function(d){return"".concat(d).concat(C)})}),_=D.flatMap(function(C){return P.map(function(d){return"".concat(d).concat(C)})}),k=["C","D","E","F","G","A","B","Em","Am","Dm","Bm","F#m","C#m","Gm","C5","D5","E5","F5","G5","A5","B5","G7","C7","D7","E7","A7","B7","Cmaj7","Gmaj7","Fmaj7","Amaj7","Am7","Em7","Dm7","Bm7","F#m7","Dsus4","Asus4","Esus4","D/F#","C/G","G/B"],V=["C","D","G","A","Em","Am","Dm"],N=["C","D","G","A","Em","Am","Dm"],K=[{label:"option.loop-count.infinite",value:"0"},{label:"option.loop-count.n-times",value:"20"},{label:"option.loop-count.n-times",value:"50"},{label:"option.loop-count.n-times",value:"200"},{label:"option.loop-count.custom",value:"custom"}],x=!0,G=!1,h=1500,n=!1,l=1500,r=100,s=10*1e3,o=100,O=function(d){return function(e){var f=Number(e);if(isNaN(f))return"".concat(e);var E=d.formatMessage({id:"formatter.millisecond"});if(f<1e3)return"".concat(f).concat(E);var S=Math.floor(f/1e3),p=f%1e3,R=d.formatMessage({id:"formatter.second"});if(S<60)return p===0?"".concat(S).concat(R):"".concat(S).concat(R).concat(p).concat(E);var j=Math.floor(S/60),y=S%60,B=d.formatMessage({id:"formatter.minute"});return y===0&&p===0?"".concat(j).concat(B).concat(p).concat(E):"".concat(j).concat(B).concat(y).concat(R).concat(p).concat(E)}},b=function(d){var e=Number(d);if(isNaN(e))return"".concat(d);var f=Math.floor(e/1e3),E="";if(f<60)E="".concat(f,"s");else{var S=Math.floor(f/60),p=f%60;E="".concat(S,"m"),p>0&&(E+="".concat(p,"s"))}return"".concat(e," ms (").concat(E,")")},Y=1e3,q=1500,tt=2e3,t=1,et=!0,nt=[{label:"C2",value:"C2"},{label:"C3",value:"C3"},{label:"C4",value:"C4"},{label:"C5",value:"C5"},{label:"C6",value:"C6"}],at={toneType:F,instrumentName:c,toneList:N,toneDuration:Y,toneWait:q,ttsEnable:x,ttsWait:tt,ttsRate:t,ttsSolfege:G,ttsSolfegeWait:h,ttsNotation:n,ttsNotationWait:l,random:et,loopCount:0,referenceNoteEnabled:!1,referenceNote:"C4"},z="mta:cfg:",rt="mta:sta:",H="tones:training",Q="tones:identification",w="vocal:ma-exercise",X="vocal:resonance",A="vocal:range-extension",I=[{name:"menu.instrument.tone-training",key:H},{name:"menu.instrument.tone-identification",key:Q},{name:"vocal.ma-exercise.title",key:w},{name:"vocal.resonance.title",key:X},{name:"vocal.range-extension.title",key:A}]},72121:function(ot,L,i){i.r(L),i.d(L,{default:function(){return w}});var $=i(48305),F=i.n($),W=i(79497),c=i(43525),u=i(18022),Z=i(80788),P=i(9015),D=i(76350),U=i(30244),_=i(78732),k=i(2866),V=i(49600),N=i(24930),K=i(40692),x=i(91028),G=i(52722),h=i(83757),n=i(67929),l=i(26035),r=i(61988),s=i(55893),o=i(75271),O=i(90228),b=i.n(O),Y=i(87999),q=i.n(Y),tt=i(8481),t=i(52676),et=function(A){var I=A.value,C=A.onChange,d=A.height,e=d===void 0?"300px":d,f=A.language,E=f===void 0?"json":f,S=A.readonly,p=S===void 0?!1:S,R=function(y){C&&C(y)};return(0,t.jsx)("div",{style:{border:"1px solid #d9d9d9",borderRadius:"4px",overflow:"auto",resize:"vertical",height:e},children:(0,t.jsx)(tt.ZP,{height:"100%",language:E,value:I,onChange:R,options:{minimap:{enabled:!1},fontSize:13,scrollBeyondLastLine:!1,automaticLayout:!0,readOnly:p,tabSize:2,formatOnPaste:!0,formatOnType:!0}})})},nt=et,at=i(69334),z=i(42874),rt=function(A){var I=A.storageKey,C=A.name,d=A.initialValue,e=A.onSaved,f=z.A.useForm(),E=F()(f,1),S=E[0];(0,o.useEffect)(function(){S.setFieldsValue({json:JSON.stringify(d,null,2)})},[d]);var p=function(){var R=q()(b()().mark(function j(y){return b()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:G.Z.confirm({title:"\u786E\u8BA4\u4FDD\u5B58\u914D\u7F6E\u5417\uFF1F",content:"\u786E\u8BA4\u4FDD\u5B58 ".concat(C," (key: ").concat(I,") \u7684\u914D\u7F6E\u5417\uFF1F"),okText:"\u786E\u8BA4",okType:"primary",onOk:function(){try{var a=JSON.parse(y.json);(0,c.pd)(I,a,C),x.ZP.success("".concat(C," \u4FDD\u5B58\u6210\u529F")),e()}catch(m){x.ZP.error("\u4FDD\u5B58\u5931\u8D25\uFF1AJSON \u8BED\u6CD5\u9519\u8BEF")}}});case 1:case"end":return J.stop()}},j)}));return function(y){return R.apply(this,arguments)}}();return(0,t.jsx)(N.Z,{title:(0,t.jsx)("span",{className:"font-bold text-primary",children:C}),subTitle:(0,t.jsxs)("code",{className:"text-xs text-secondary opacity-60 ml-2",children:["Key: ",I]}),className:"mb-4 shadow-sm",collapsible:!0,defaultCollapsed:!0,children:(0,t.jsx)(z.A,{form:S,onFinish:p,submitter:{render:function(j){return(0,t.jsx)(n.ZP,{type:"primary",icon:(0,t.jsx)(at.Z,{}),onClick:function(){return j.submit()},children:"\u4FDD\u5B58\u672C\u9879\u4FEE\u6539"})}},children:(0,t.jsx)(z.A.Item,{name:"json",label:"\u914D\u7F6E\u503C",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u914D\u7F6E\u5185\u5BB9"}],children:(0,t.jsx)(nt,{height:"300px"})})})})},H=rt,Q=function(){var A=(0,o.useState)({}),I=F()(A,2),C=I[0],d=I[1],e=(0,K.useIntl)(),f=function(){d((0,c.GR)())};(0,o.useEffect)(function(){f()},[]);var E=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,m=a===null?{settings:(0,c.GR)(),stats:(0,c.Jm)()}:{settings:(0,c.Tp)(a,{}),stats:(0,c.fy)(a,{})},M=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),T=URL.createObjectURL(M),g=document.createElement("a");g.href=T,g.download="mta-all-data-".concat(new Date().toISOString().split("T")[0],".json"),g.click(),URL.revokeObjectURL(T),x.ZP.success(a===null?e.formatMessage({id:"settings.export.all.success"}):e.formatMessage({id:"settings.export.config.success"},{key:a}))},S=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,m=a===null?(0,c.GR)():(0,c.Tp)(a,{}),M=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),T=URL.createObjectURL(M),g=document.createElement("a");g.href=T,g.download="mta-config-only-".concat(new Date().toISOString().split("T")[0],".json"),g.click(),URL.revokeObjectURL(T),x.ZP.success(a===null?e.formatMessage({id:"settings.export.config.success"},{key:"all"}):e.formatMessage({id:"settings.export.config.success"},{key:a}))},p=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,m=a===null?(0,c.Jm)():(0,c.fy)(a,{}),M=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),T=URL.createObjectURL(M),g=document.createElement("a");g.href=T,g.download="mta-stats-only-".concat(new Date().toISOString().split("T")[0],".json"),g.click(),URL.revokeObjectURL(T),x.ZP.success(a===null?e.formatMessage({id:"settings.export.stats.success"}):e.formatMessage({id:"settings.export.stats-item.success"},{key:a}))},R=function(a){var m=new FileReader;return m.onload=function(M){try{var T,g=JSON.parse((T=M.target)===null||T===void 0?void 0:T.result);(0,c.QM)(g),x.ZP.success(e.formatMessage({id:"settings.import.success"})),f()}catch(st){x.ZP.error(e.formatMessage({id:"settings.import.error"}))}},m.readAsText(a),!1},j=function(a,m,M){G.Z.confirm({title:a,content:m,okText:e.formatMessage({id:"settings.clear.confirm-ok"}),okType:"danger",onOk:M})},y=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;j(a===null?e.formatMessage({id:"settings.clear.all-confirm-title"}):e.formatMessage({id:"settings.clear.item-confirm-title"},{key:a}),a===null?e.formatMessage({id:"settings.clear.all-confirm-content"}):e.formatMessage({id:"settings.clear.item-confirm-content"},{key:a}),function(){a===null?((0,c.qt)(),(0,c.oB)()):((0,c.bA)(a),(0,c.lv)(a)),x.ZP.success(a===null?e.formatMessage({id:"settings.clear.all.success"}):e.formatMessage({id:"settings.clear.item.success"},{key:a})),f()})},B=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;j(a===null?e.formatMessage({id:"settings.clear.all-config-confirm-title"}):e.formatMessage({id:"settings.clear.item-config-confirm-title"},{key:a}),a===null?e.formatMessage({id:"settings.clear.all-config-confirm-content"}):e.formatMessage({id:"settings.clear.item-config-confirm-content"},{key:a}),function(){a===null?(0,c.qt)():(0,c.bA)(a),x.ZP.success(a===null?e.formatMessage({id:"settings.clear.config.success"}):e.formatMessage({id:"settings.clear.config-item.success"},{key:a})),f()})},J=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;j(a===null?e.formatMessage({id:"settings.clear.all-stats-confirm-title"}):e.formatMessage({id:"settings.clear.item-stats-confirm-title"},{key:a}),a===null?e.formatMessage({id:"settings.clear.all-stats-confirm-content"}):e.formatMessage({id:"settings.clear.item-stats-confirm-content"},{key:a}),function(){a===null?(0,c.oB)():(0,c.lv)(a),x.ZP.success(a===null?e.formatMessage({id:"settings.clear.stats.success"}):e.formatMessage({id:"settings.clear.stats-item.success"},{key:a})),f()})};return(0,t.jsxs)(V._z,{title:e.formatMessage({id:"settings.title"}),children:[(0,t.jsxs)(N.Z,{title:e.formatMessage({id:"settings.global-actions"}),gutter:[16,16],wrap:!0,ghost:!0,children:[(0,t.jsx)(N.Z,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Z,{})," ",e.formatMessage({id:"settings.export.title"})]}),colSpan:{xs:24,md:8},bordered:!0,hoverable:!0,children:(0,t.jsxs)(h.Z,{size:"middle",align:"start",wrap:!0,children:[(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(Z.Z,{}),onClick:function(){return E(null)},children:e.formatMessage({id:"settings.export.all"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(P.Z,{}),onClick:function(){return S(null)},children:e.formatMessage({id:"settings.export.config"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(D.Z,{}),onClick:function(){return p(null)},children:e.formatMessage({id:"settings.export.stats"})})]})}),(0,t.jsx)(N.Z,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U.Z,{})," ",e.formatMessage({id:"settings.import.title"})]}),colSpan:{xs:24,md:8},bordered:!0,hoverable:!0,children:(0,t.jsx)(l.Z,{beforeUpload:R,showUploadList:!1,accept:".json",children:(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(U.Z,{}),type:"primary",children:e.formatMessage({id:"settings.import.button"})})})}),(0,t.jsx)(N.Z,{title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.Z,{})," ",e.formatMessage({id:"settings.clear.title"})]}),colSpan:{xs:24,md:8},bordered:!0,hoverable:!0,children:(0,t.jsxs)(h.Z,{size:"middle",align:"start",wrap:!0,children:[(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(k.Z,{}),danger:!0,onClick:function(){return y(null)},children:e.formatMessage({id:"settings.clear.all"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(_.Z,{}),danger:!0,onClick:function(){return B(null)},children:e.formatMessage({id:"settings.clear.config"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(D.Z,{}),danger:!0,onClick:function(){return J(null)},children:e.formatMessage({id:"settings.clear.stats"})})]})})]}),(0,t.jsx)(N.Z,{title:e.formatMessage({id:"settings.item-actions"}),gutter:[16,16],wrap:!0,ghost:!0,children:W.Yi.map(function(v){var a,m=v.key,M=v.name,T=C[m];return(0,t.jsx)(N.Z,{title:e.formatMessage({id:M}),colSpan:{xs:24,md:8},layout:"center",bordered:!0,hoverable:!0,children:(0,t.jsxs)(r.Z,{gutter:[16,16],children:[(0,t.jsx)(s.Z,{span:24,children:(0,t.jsxs)(h.Z,{size:"middle",align:"start",wrap:!0,children:[(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(Z.Z,{}),onClick:function(){return E(m)},children:e.formatMessage({id:"settings.export.all"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(P.Z,{}),onClick:function(){return S(m)},children:e.formatMessage({id:"settings.export.config.success"},{key:"mta:cfg"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(D.Z,{}),onClick:function(){return p(m)},children:e.formatMessage({id:"settings.export.stats-item.success"},{key:"mta:sta"})})]})}),(0,t.jsx)(s.Z,{span:24,children:(0,t.jsxs)(h.Z,{size:"middle",wrap:!0,children:[(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(k.Z,{}),danger:!0,onClick:function(){return y(m)},children:e.formatMessage({id:"settings.clear.all"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(_.Z,{}),danger:!0,onClick:function(){return B(m)},children:e.formatMessage({id:"settings.clear.config"})}),(0,t.jsx)(n.ZP,{icon:(0,t.jsx)(D.Z,{}),danger:!0,onClick:function(){return J(m)},children:e.formatMessage({id:"settings.clear.stats"})})]})}),(0,t.jsx)(s.Z,{span:24,children:(0,t.jsx)(H,{storageKey:m,name:e.formatMessage({id:M}),initialValue:(a=T==null?void 0:T.value)!==null&&a!==void 0?a:{},onSaved:f},m)})]})},"config-cart-".concat(m))})})]})},w=Q},43525:function(ot,L,i){i.d(L,{GR:function(){return _},Jm:function(){return k},QM:function(){return V},Tp:function(){return Z},_Y:function(){return U},bA:function(){return K},fy:function(){return D},lv:function(){return G},oB:function(){return x},pd:function(){return P},qt:function(){return N}});var $=i(48305),F=i.n($),W=i(31759),c=i.n(W),u=i(79497),Z=function(n,l){var r=localStorage.getItem("".concat(u.f1).concat(n));if(!r&&n==="tones:training"){var s=localStorage.getItem("music-teaching-assistant-settings");if(s)return localStorage.setItem("".concat(u.f1).concat(n),s),JSON.parse(s)}if(!r)return l;try{var o=JSON.parse(r);return o&&c()(o)==="object"&&"name"in o&&"value"in o?o.value:o}catch(O){return console.error("Failed to parse settings for ".concat(n),O),l}},P=function(n,l,r){var s=localStorage.getItem("".concat(u.f1).concat(n)),o=r;if(!o&&s)try{var O=JSON.parse(s);O!=null&&O.name&&(o=O.name)}catch(Y){}var b={name:o||n,value:l,updatedAt:Date.now()};localStorage.setItem("".concat(u.f1).concat(n),JSON.stringify(b))},D=function(n,l){var r=localStorage.getItem("".concat(u.CV).concat(n));if(!r)return l;try{var s=JSON.parse(r);return s&&c()(s)==="object"&&"name"in s&&"value"in s?s.value:s}catch(o){return console.error("Failed to parse stats for ".concat(n),o),l}},U=function(n,l,r){var s=localStorage.getItem("".concat(u.CV).concat(n)),o=r;if(!o&&s)try{var O=JSON.parse(s);O!=null&&O.name&&(o=O.name)}catch(Y){}var b={name:o||n,value:l,updatedAt:Date.now()};localStorage.setItem("".concat(u.CV).concat(n),JSON.stringify(b))},_=function(){for(var n={},l=0;l<localStorage.length;l++){var r=localStorage.key(l);if(r!=null&&r.startsWith(u.f1)){var s=localStorage.getItem(r);if(s)try{n[r.replace(u.f1,"")]=JSON.parse(s)}catch(o){console.error("Failed to parse all settings for key ".concat(r),o)}}}return n},k=function(){for(var n={},l=0;l<localStorage.length;l++){var r=localStorage.key(l);if(r!=null&&r.startsWith(u.CV)){var s=localStorage.getItem(r);if(s)try{n[r.replace(u.CV,"")]=JSON.parse(s)}catch(o){console.error("Failed to parse all stats for key ".concat(r),o)}}}return n},V=function(n){if(n&&c()(n)==="object"){if(n.settings||n.stats){n.settings&&Object.entries(n.settings).forEach(function(l){var r=F()(l,2),s=r[0],o=r[1];o&&c()(o)==="object"&&"name"in o&&"value"in o?localStorage.setItem("".concat(u.f1).concat(s),JSON.stringify(o)):P(s,o,s)}),n.stats&&Object.entries(n.stats).forEach(function(l){var r=F()(l,2),s=r[0],o=r[1];o&&c()(o)==="object"&&"name"in o&&"value"in o?localStorage.setItem("".concat(u.CV).concat(s),JSON.stringify(o)):U(s,o,s)});return}Object.entries(n).forEach(function(l){var r=F()(l,2),s=r[0],o=r[1];o&&c()(o)==="object"&&"name"in o&&"value"in o?localStorage.setItem("".concat(u.f1).concat(s),JSON.stringify(o)):P(s,o,s)})}},N=function(){for(var n=[],l=0;l<localStorage.length;l++){var r=localStorage.key(l);r!=null&&r.startsWith(u.f1)&&n.push(r)}n.forEach(function(s){return localStorage.removeItem(s)})},K=function(n){localStorage.removeItem("".concat(u.f1).concat(n))},x=function(){for(var n=[],l=0;l<localStorage.length;l++){var r=localStorage.key(l);r!=null&&r.startsWith(u.CV)&&n.push(r)}n.forEach(function(s){return localStorage.removeItem(s)})},G=function(n){localStorage.removeItem("".concat(u.CV).concat(n))}}}]);
